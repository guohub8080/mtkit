import{c as Mi,g as Ci}from"./base_tool.js";import{r as Ti}from"./music.js";var $t,ne={exports:{}},te,xi=($t||($t=1,(te=ne).exports=function(){var un,j,U,K,A,$=typeof window>"u"?Mi:window,R="1.9.2",wn=Date.now||function(){return new Date().getTime()},L=wn(),rn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return wn()-L},C=function(n){setTimeout(n,0)};function B(){}function s(n){return typeof n=="function"}function c(){this._orig=this,this._ready=!1,this._queue=[],this._log=[]}function f(n,t){this._bad?s(t)&&t.apply(this,[new Error(this._err())]):s(n)&&n.apply(this,[this])}function b(n,t){this._bad?n._crash(this._err()):setTimeout(function(){n._resume()},t)}function T(n){this._bad&&n._break(this._err()),n._resume()}function E(n,t,e){n[e]=function(){var i=arguments,r=t._image();return this._push(T,[r]),r[e].apply(r,i)}}function X(n){this._bad||(s(n)?n.apply(this):console.log(n))}function v(n){this._bad&&(s(n)?n.apply(this):console.log(n))}function O(n){this._bad?n._crash(this._err()):(this._break("Closed"),n._resume())}function Z(n){if(n.length){var t=n.shift();if(n.length){var e=this;this._slip(v,[function(){Z.apply(e,[n])}])}try{this._repair(),t.apply(this)}catch(i){this._break(i.toString())}}else this._break()}function W(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return;n.push(t)}function V(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return void n.splice(e,1)}function k(){c.apply(this)}function q(n,t){for(var e in n)n.hasOwnProperty(e)&&t.call(this,e)}function M(n,t,e){if(t===void 0)return M(n,[],[]);if(n instanceof Object){for(var i=0;i<t.length;i++)if(t[i]===n)return e[i];var r;return r=n instanceof Array?[]:{},t.push(n),e.push(r),q(n,function(o){r[o]=M(n[o],t,e)}),r}return n}c.prototype._exec=function(){for(;this._ready&&this._queue.length;){var n=this._queue.shift();n[0].apply(this,n[1])}},c.prototype._push=function(n,t){this._queue.push([n,t]),c.prototype._exec.apply(this)},c.prototype._slip=function(n,t){this._queue.unshift([n,t])},c.prototype._pause=function(){this._ready=!1},c.prototype._resume=function(){this._ready=!0,c.prototype._exec.apply(this)},c.prototype._break=function(n){this._orig._bad=!0,this._orig._log.push(n||"Unknown JZZ error")},c.prototype._repair=function(){this._orig._bad=!1},c.prototype._crash=function(n){this._break(n),this._resume()},c.prototype._err=function(){return this._log[this._log.length-1]},c.prototype.log=function(){return M(this._log)},c.prototype._dup=function(){var n=function(){};n.prototype=this._orig;var t=new n;return t._ready=!1,t._queue=[],t},c.prototype._image=function(){return this._dup()},c.prototype._thenable=function(){if(this.then)return this;var n=this,t=function(){};t.prototype=n;var e=new t;return e.then=function(i,r){return n._push(f,[i,r]),this},e},c.prototype.wait=function(n){if(!n)return this;var t=this._image();return this._push(b,[t,n]),t._thenable()},c.prototype.and=function(n){return this._push(X,[n]),this._thenable()},c.prototype.or=function(n){return this._push(v,[n]),this._thenable()},c.prototype._info={},c.prototype.info=function(){var n=M(this._orig._info);return n.engine===void 0&&(n.engine="none"),n.sysex===void 0&&(n.sysex=!0),n},c.prototype.name=function(){return this.info().name},c.prototype.close=function(){var n=new c;return this._close&&this._push(this._close,[]),this._push(O,[n]),n._thenable()},k.prototype=new c,k.prototype._info={name:"JZZ.js",ver:R,version:R,inputs:[],outputs:[]};var x,En=[],In=[],dt=[],pt=[],Kn={},Hn={};function Mn(){var n,t;for(x._info.engine=a._type,x._info.version=a._version,x._info.sysex=a._sysex,x._info.inputs=[],x._info.outputs=[],En=[],In=[],a._allOuts={},a._allIns={},n=0;n<a._outs.length;n++)t=a._outs[n],Kn[t.name]||(t.engine=a,a._allOuts[t.name]=t,x._info.outputs.push({id:t.name,name:t.name,manufacturer:t.manufacturer,version:t.version,engine:a._type}),En.push(t));for(n=0;n<nn._outs.length;n++)t=nn._outs[n],Kn[t.name]||(x._info.outputs.push({id:t.name,name:t.name,manufacturer:t.manufacturer,version:t.version,engine:t.type}),En.push(t));for(n=0;n<a._ins.length;n++)t=a._ins[n],Hn[t.name]||(t.engine=a,a._allIns[t.name]=t,x._info.inputs.push({id:t.name,name:t.name,manufacturer:t.manufacturer,version:t.version,engine:a._type}),In.push(t));for(n=0;n<nn._ins.length;n++)t=nn._ins[n],Hn[t.name]||(x._info.inputs.push({id:t.name,name:t.name,manufacturer:t.manufacturer,version:t.version,engine:t.type}),In.push(t));if(x._watcher&&x._watcher._handles.length){var e=de(pt,dt,x._info.inputs,x._info.outputs);if(e){for(j=0;j<e.inputs.removed.length;j++)(t=a._inMap[e.inputs.removed[j].name])&&t._closeAll();for(j=0;j<e.outputs.removed.length;j++)(t=a._outMap[e.outputs.removed[j].name])&&t._closeAll();C(function(){pe(e)})}}pt=x._info.inputs,dt=x._info.outputs}function tt(){this._bad||a._refresh(this)}function gt(n,t){var e,i;s(n)&&(n=n(t)),n instanceof Array||(n=[n]);var r=[],o=[],u=t.slice(),l=r;for(e=0;e<n.length;e++)if(n[e]===void 0)l=o;else if(n[e]instanceof RegExp)for(i=0;i<u.length;i++)n[e].test(u[i].name)&&(l.push(u[i]),u.splice(i,1),i--);else for(i=0;i<u.length;i++)(n[e]+""==i+""||n[e]===u[i].name||n[e]instanceof Object&&n[e].name===u[i].name)&&(l.push(u[i]),u.splice(i,1),i--);return l==r?r:r.concat(u).concat(o)}function mt(n,t){var e;e=t instanceof RegExp?"Port matching "+t+" not found":t instanceof Object||t===void 0?"Port not found":'Port "'+t+'" not found',n._crash(e)}function vt(n,t){if(this._bad)n._crash(this._err());else{var e=gt(t,En);if(!e.length)return void mt(n,t);for(var i=function(o){return function(){o.engine._openOut(this,o.name)}},r=0;r<e.length;r++)e[r]=i(e[r]);n._slip(Z,[e]),n._resume()}}function _t(n,t){if(this._bad)n._crash(this._err());else{var e=gt(t,In);if(!e.length)return void mt(n,t);for(var i=function(o){return function(){o.engine._openIn(this,o.name)}},r=0;r<e.length;r++)e[r]=i(e[r]);n._slip(Z,[e]),n._resume()}}function se(n,t){this._bad?n._crash():(n._slip(bt,[t]),n._resume())}function D(){c.apply(this),this._handles=[],this._outs=[]}function yt(n){this._bad||this._receive(n)}function et(n){return n.isMidi2?new _(n):h.apply(null,arguments)}function ae(n){this._emit(n)}function wt(n){s(n)?W(this._orig._handles,n):W(this._orig._outs,n)}function ue(n){n===void 0?(this._orig._handles=[],this._orig._outs=[]):s(n)?V(this._orig._handles,n):V(this._orig._outs,n)}function ce(n,t){this._orig._mpe||(this._orig._mpe=new pn),this._orig._mpe.setup(n,t)}function St(n){if(n!=parseInt(n)||n<0||n>15)throw RangeError("Bad channel value (must not be less than 0 or more than 15): "+n)}function on(n){c.apply(this),this._sink=n}function he(n){return n.isMidi&&!n.isMidi2?new h(n):_.apply(null,arguments)}function Un(){c.apply(this),this._handles=[],E(this,x,"refresh"),E(this,x,"openMidiOut"),E(this,x,"openMidiIn"),E(this,x,"onChange"),E(this,x,"close")}function bt(n){s(n)&&(this._orig._handles.length||a._watch(),W(this._orig._handles,n))}function le(n){n===void 0?this._orig._handles=[]:V(this._orig._handles,n),this._orig._handles.length||a._unwatch()}function fe(n,t,e,i){var r;if(n.length!=e.length||t.length!=i.length)return!0;for(r=0;r<n.length;r++)if(n[r].name!=e[r].name)return!0;for(r=0;r<t.length;r++)if(t[r].name!=i[r].name)return!0;return!1}function de(n,t,e,i){if(fe(n,t,e,i)){var r,o=[],u=[],l=[],m=[],y={};for(r=0;r<n.length;r++)y[n[r].name]=!0;for(r=0;r<e.length;r++)y[e[r].name]||o.push(e[r]);for(y={},r=0;r<e.length;r++)y[e[r].name]=!0;for(r=0;r<n.length;r++)y[n[r].name]||l.push(n[r]);for(y={},r=0;r<t.length;r++)y[t[r].name]=!0;for(r=0;r<i.length;r++)y[i[r].name]||u.push(i[r]);for(y={},r=0;r<i.length;r++)y[i[r].name]=!0;for(r=0;r<t.length;r++)y[t[r].name]||m.push(t[r]);return{inputs:{added:o,removed:l},outputs:{added:u,removed:m}}}}function pe(n){for(un=0;un<x._watcher._handles.length;un++)x._watcher._handles[un].apply(x,[n])}k.prototype.refresh=function(){return this._push(tt,[]),this._thenable()},k.prototype.openMidiOut=function(n){var t=new D;return this._push(tt,[]),this._push(vt,[t,n]),t._thenable()},k.prototype._openMidiOutNR=function(n){var t=new D;return this._push(vt,[t,n]),t._thenable()},k.prototype.openMidiIn=function(n){var t=new D;return this._push(tt,[]),this._push(_t,[t,n]),t._thenable()},k.prototype._openMidiInNR=function(n){var t=new D;return this._push(_t,[t,n]),t._thenable()},k.prototype.onChange=function(n){this._orig._watcher||(this._orig._watcher=new Un);var t=this._orig._watcher._image();return this._push(se,[t,n]),t._thenable()},k.prototype._close=function(){a._close();for(var n=0;n<mn.length;n++)mn[n]&&mn[n].close&&mn[n].close()},D.prototype=new c,D.prototype._filter=function(n){if(this._orig._mpe){var t,e=0;this._handles&&this._handles.length&&(e=this._handles.length,t=this._handles[0]),this._outs&&this._outs.length&&(e=this._outs.length,t=this._outs[0]),e!=1||t._mpe||(n=this._orig._mpe.filter(n))}return n},D.prototype._receive=function(n){this._emit(this._filter(n))},D.prototype.send=function(){return this._push(yt,[et.apply(null,arguments)]),this._thenable()},D.prototype.note=function(n,t,e,i){return this.noteOn(n,t,e),this._ch===void 0&&this._master===void 0?i>0&&this.wait(i).noteOff(n,t):e>0&&this.wait(e).noteOff(n),this._thenable()},D.prototype._emit=function(n){var t,e;for(t=0;t<this._handles.length;t++)e=et(n),this._handles[t].apply(this,[e._stamp(this)]);for(t=0;t<this._outs.length;t++)(e=et(n))._stamped(this._outs[t])||this._outs[t].send(e._stamp(this))},D.prototype.emit=function(n){return this._push(ae,[n]),this._thenable()},D.prototype.connect=function(n){return this._push(wt,[n]),this._thenable()},D.prototype.disconnect=function(n){return this._push(ue,[n]),this._thenable()},D.prototype.connected=function(){return this._orig._handles.length+this._orig._outs.length},D.prototype._image=function(){var n=this._dup();return n._gr=this._gr,n._ch=this._ch,n._sxid=this._sxid,n._master=this._master,n._band=this._band,n},D.prototype._sxid=127,D.prototype.sxId=function(n){if(n===void 0&&(n=D.prototype._sxid),n==this._sxid)return this._thenable();n=g(n);var t=this._image();return t._sxid=n,this._push(T,[t]),t._thenable()},D.prototype.ch=function(n){if(n==this._ch||n===void 0&&this._ch===void 0)return this._thenable();var t=this._image();return n!==void 0&&(n=p(n)),t._ch=n,t._master=void 0,t._band=void 0,this._push(T,[t]),t._thenable()},D.prototype.MIDI1=function(){var n=this._image();return n._ch=void 0,n._sxid=D.prototype._sxid,n._master=void 0,n._band=void 0,this._push(T,[n]),n._thenable()},D.prototype.MIDI2=function(){var n=this._image();n._ch=void 0,n._sxid=D.prototype._sxid,n._master=void 0,n._band=void 0;var t=new on(n);return this._push(T,[t]),t._thenable()},D.prototype.mpe=function(n,t){if(n==this._master&&t==this._band||n===void 0&&this._master===void 0)return this._thenable();if(n!==void 0&&pn.validate(n,t),!t)return this.ch(n);var e=this._image();return e._ch=void 0,e._master=n,e._band=t,this._push(ce,[n,t]),this._push(T,[e]),e._thenable()},on.prototype=new c,on.prototype._sxid=D.prototype._sxid,on.prototype._receive=function(n){this._sink._receive(n)},on.prototype.send=function(){return this._push(yt,[he.apply(null,arguments)]),this._thenable()},on.prototype._image=D.prototype._image,on.prototype.connect=function(n){return this._sink.connect(n),this._push(T,[this._sink]),this._thenable()},on.prototype.disconnect=function(n){return this._sink.disconnect(n),this._push(T,[this._sink]),this._thenable()},on.prototype.connected=function(){return this._sink.connected()},on.prototype.sxId=D.prototype.sxId,on.prototype.ch=D.prototype.ch,on.prototype.gr=function(n){if(n==this._gr||n===void 0&&this._gr===void 0)return this._thenable();var t=this._image();return n!==void 0&&(n=g(n)),t._gr=n,this._push(T,[t]),t._thenable()},on.prototype.MIDI1=function(){var n=this._sink._image();return this._push(T,[n]),n._thenable()},on.prototype.MIDI2=function(){var n=this._image();return n._gr=void 0,n._ch=void 0,n._sxid=D.prototype._sxid,this._push(T,[n]),n._thenable()},Un.prototype=new c,Un.prototype.connect=function(n){return this._push(bt,[n]),this._thenable()},Un.prototype.disconnect=function(n){return this._push(le,[n]),this._thenable()};var it,Bn,a={_outs:[],_ins:[],_close:B},nn={_outs:[],_ins:[]},mn=[];function ge(){if(te.exports){var n=Ti();if(n)return void Te(n)}this._break()}function me(){var n=document.createElement("div");n.style.visibility="hidden",document.body.appendChild(n);var t=document.createElement("object");t.style.visibility="hidden",t.style.width="0px",t.style.height="0px",t.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",t.type="audio/x-jazz",document.body.appendChild(t),t.isJazz?xe(t):this._break()}function Mt(){if(typeof navigator<"u"&&navigator.requestMIDIAccess){it=navigator,Bn=navigator.requestMIDIAccess;try{Bn.toString().indexOf("JZZ(")!=-1&&(Bn=void 0)}catch{}}}function ve(){if(Mt(),Bn){var n=this,t=function(r){Tt(r),n._resume()},e=function(r){n._crash(r)},i={};return Bn.call(it,i).then(t,e),void this._pause()}this._break()}function _e(){if(Mt(),Bn){var n=this,t=function(r){Tt(r,!0),n._resume()},e=function(r){n._crash(r)},i={sysex:!0};return Bn.call(it,i).then(t,e),void this._pause()}this._break()}function ye(){var n,t,e=this;function i(r){n=!0;var o=r.detail;if(!o){if(t||(t=document.getElementById("jazz-midi-msg")),!t)return;try{o=JSON.parse(t.innerText)}catch{}t.innerText=""}document.removeEventListener("jazz-midi-msg",i),o[0]==="version"?(Ae(t,o[2]),e._resume()):e._crash()}this._pause();try{document.addEventListener("jazz-midi-msg",i),document.dispatchEvent(new Event("jazz-midi"))}catch{}setTimeout(function(){n||e._crash()},50)}function we(){this._pause();var n=this;C(function(){n._crash()})}function Se(n){for(var t=[],e=be(n),i=0;i<e.length;i++)e[i]=="webmidi"?(n&&n.sysex===!0&&t.push(_e),n&&n.sysex===!0&&n.degrade!==!0||t.push(ve)):e[i]=="node"?(t.push(ge),t.push(we)):e[i]=="extension"?t.push(ye):e[i]=="plugin"&&t.push(me);return t.push(Ce),t}function be(n){var t=["node","extension","plugin","webmidi"];if(!n||!n.engine)return t;var e,i,r,o=n.engine instanceof Array?n.engine:[n.engine],u={},l=[],m=[];for(r=0;r<o.length;r++){var y=o[r].toString().toLowerCase();u[y]||(u[y]=!0,y==="none"&&(e=!0),y!=="etc"&&y!==void 0||(i=!0),i?m.push(y):l.push(y),V(t,y))}return(i||l.length||m.length)&&(e=!1),e?[]:l.concat(i?t:m)}function Me(n){(x=new k)._options=n,x._push(Z,[Se(n)]),x.refresh(),x._resume()}function Ce(){a._type="none",a._version=R,a._sysex=!0,a._outs=[],a._ins=[],a._outMap={},a._inMap={},a._refresh=function(){Mn()},a._watch=B,a._unwatch=B,a._close=B}function Ct(){var n;function t(){for(var e=0;e<this.clients.length;e++)this._close(this.clients[e])}a._inArr=[],a._outArr=[],a._inMap={},a._outMap={},a._outsW=[],a._insW=[],a._version=a._main.version,a._sysex=!0,a._refresh=function(){var e,i;for(a._outs=[],a._ins=[],e=0;(i=a._main.MidiOutInfo(e)).length;e++)a._outs.push({type:a._type,name:i[0],manufacturer:i[1],version:i[2]});for(e=0;(i=a._main.MidiInInfo(e)).length;e++)a._ins.push({type:a._type,name:i[0],manufacturer:i[1],version:i[2]});Mn()},a._openOut=function(e,i){var r=a._outMap[i];if(!r){a._pool.length<=a._outArr.length&&a._pool.push(a._newPlugin()),r={name:i,clients:[],info:{name:i,manufacturer:a._allOuts[i].manufacturer,version:a._allOuts[i].version,type:"MIDI-out",sysex:a._sysex,engine:a._type},_close:function(l){a._closeOut(l)},_closeAll:t,_receive:function(l){l.length&&this.plugin.MidiOutRaw(l.slice())}};var o=a._pool[a._outArr.length];r.plugin=o,a._outArr.push(r),a._outMap[i]=r}if(!r.open){var u=r.plugin.MidiOutOpen(i);if(u!==i)return u&&r.plugin.MidiOutClose(),void e._break();r.open=!0}e._orig._impl=r,W(r.clients,e._orig),e._info=r.info,e._receive=function(l){r._receive(l)},e._close=function(){r._close(this)}},a._openIn=function(e,i){var r=a._inMap[i];if(!r){a._pool.length<=a._inArr.length&&a._pool.push(a._newPlugin()),r={name:i,clients:[],info:{name:i,manufacturer:a._allIns[i].manufacturer,version:a._allIns[i].version,type:"MIDI-in",sysex:a._sysex,engine:a._type},_close:function(m){a._closeIn(m)},_closeAll:t,handle:function(m,y){for(var H=0;H<this.clients.length;H++){var zn=h(y);this.clients[H]._emit(zn)}}};var o=function(m){return function(y,H){m.handle(y,H)}};r.onmidi=o(r);var u=a._pool[a._inArr.length];r.plugin=u,a._inArr.push(r),a._inMap[i]=r}if(!r.open){var l=r.plugin.MidiInOpen(i,r.onmidi);if(l!==i)return l&&r.plugin.MidiInClose(),void e._break();r.open=!0}e._orig._impl=r,W(r.clients,e._orig),e._info=r.info,e._close=function(){r._close(this)}},a._closeOut=function(e){var i=e._impl;V(i.clients,e._orig),!i.clients.length&&i.open&&(i.open=!1,i.plugin.MidiOutClose())},a._closeIn=function(e){var i=e._impl;V(i.clients,e._orig),!i.clients.length&&i.open&&(i.open=!1,i.plugin.MidiInClose())},a._close=function(){for(var e=0;e<a._inArr.length;e++)a._inArr[e].open&&a._inArr[e].plugin.MidiInClose();a._unwatch()},a._watch=function(){n||(n=setInterval(function(){a._refresh()},250))},a._unwatch=function(){n&&clearInterval(n),n=void 0}}function Te(n){a._type="node",a._main=n,a._pool=[],a._newPlugin=function(){return new n.MIDI},Ct()}function xe(n){a._type="plugin",a._main=n,a._pool=[n],a._newPlugin=function(){var t=document.createElement("object");return t.style.visibility="hidden",t.style.width="0px",n.style.height="0px",t.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",t.type="audio/x-jazz",document.body.appendChild(t),t.isJazz?t:void 0},Ct()}function Tt(n,t){var e;function i(){for(var r=0;r<this.clients.length;r++)this._close(this.clients[r])}a._type="webmidi",a._version=43,a._sysex=!!t,a._access=n,a._inMap={},a._outMap={},a._outsW=[],a._insW=[],a._refresh=function(){a._outs=[],a._ins=[],a._access.outputs.forEach(function(r){a._outs.push({type:a._type,name:r.name,manufacturer:r.manufacturer,version:r.version})}),a._access.inputs.forEach(function(r){a._ins.push({type:a._type,name:r.name,manufacturer:r.manufacturer,version:r.version})}),Mn()},a._openOut=function(r,o){var u,l=a._outMap[o];l||(l={name:o,clients:[],info:{name:o,manufacturer:a._allOuts[o].manufacturer,version:a._allOuts[o].version,type:"MIDI-out",sysex:a._sysex,engine:a._type},_close:function(m){a._closeOut(m)},_closeAll:i,_receive:function(m){l.dev&&m.length&&this.dev.send(m.slice())}}),a._access.outputs.forEach(function(m){m.name===o&&(u=m)}),u?(l.dev=u,a._outMap[o]=l,r._orig._impl=l,W(l.clients,r._orig),r._info=l.info,r._receive=function(m){l._receive(m)},r._close=function(){l._close(this)},l.dev.open&&(r._pause(),l.dev.open().then(function(){r._resume()},function(){r._crash()}))):r._break()},a._openIn=function(r,o){var u,l=a._inMap[o];if(l||(l={name:o,clients:[],info:{name:o,manufacturer:a._allIns[o].manufacturer,version:a._allIns[o].version,type:"MIDI-in",sysex:a._sysex,engine:a._type},_close:function(y){a._closeIn(y)},_closeAll:i,handle:function(y){for(var H=0;H<this.clients.length;H++){var zn=h([].slice.call(y.data));this.clients[H]._emit(zn)}}}),a._access.inputs.forEach(function(y){y.name===o&&(u=y)}),u){l.dev=u;var m=function(y){return function(H){y.handle(H)}};l.dev.onmidimessage=m(l),a._inMap[o]=l,r._orig._impl=l,W(l.clients,r._orig),r._info=l.info,r._close=function(){l._close(this)},l.dev.open&&(r._pause(),l.dev.open().then(function(){r._resume()},function(){r._crash()}))}else r._break()},a._closeOut=function(r){var o=r._impl;V(o.clients,r._orig),o.clients.length||(o.dev&&o.dev.close&&o.dev.close(),o.dev=void 0)},a._closeIn=function(r){var o=r._impl;V(o.clients,r._orig),o.clients.length||(o.dev&&(o.dev.onmidimessage=null,o.dev.close&&o.dev.close()),o.dev=void 0)},a._close=function(){a._unwatch()},a._watch=function(){a._access.onstatechange=function(){e=!0,C(function(){e&&(a._refresh(),e=!1)})}},a._unwatch=function(){a._access.onstatechange=void 0}}function Ae(n,t){function e(){for(var r=0;r<this.clients.length;r++)this._close(this.clients[r])}var i;a._type="extension",a._version=t,a._sysex=!0,a._pool=[],a._outs=[],a._ins=[],a._inArr=[],a._outArr=[],a._inMap={},a._outMap={},a._outsW=[],a._insW=[],a.refreshClients=[],a._msg=n,a._newPlugin=function(){var r={id:a._pool.length};a._pool.push(r),r.id?document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["new"]})):r.ready=!0},a._newPlugin(),a._refresh=function(r){a.refreshClients.push(r),r._pause(),C(function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["refresh"]}))})},a._openOut=function(r,o){var u=a._outMap[o];if(!u){a._pool.length<=a._outArr.length&&a._newPlugin();var l=a._pool[a._outArr.length];u={name:o,clients:[],info:{name:o,manufacturer:a._allOuts[o].manufacturer,version:a._allOuts[o].version,type:"MIDI-out",sysex:a._sysex,engine:a._type},_start:function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["openout",l.id,o]}))},_close:function(m){a._closeOut(m)},_closeAll:e,_receive:function(m){if(m.length){var y=m.slice();y.splice(0,0,"play",l.id),document.dispatchEvent(new CustomEvent("jazz-midi",{detail:y}))}}},u.plugin=l,l.output=u,a._outArr.push(u),a._outMap[o]=u}r._orig._impl=u,W(u.clients,r._orig),r._info=u.info,r._receive=function(m){u._receive(m)},r._close=function(){u._close(this)},u.open||(r._pause(),u.plugin.ready&&u._start())},a._openIn=function(r,o){var u=a._inMap[o];if(!u){a._pool.length<=a._inArr.length&&a._newPlugin();var l=a._pool[a._inArr.length];u={name:o,clients:[],info:{name:o,manufacturer:a._allIns[o].manufacturer,version:a._allIns[o].version,type:"MIDI-in",sysex:a._sysex,engine:a._type},_start:function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["openin",l.id,o]}))},_close:function(m){a._closeIn(m)},_closeAll:e},u.plugin=l,l.input=u,a._inArr.push(u),a._inMap[o]=u}r._orig._impl=u,W(u.clients,r._orig),r._info=u.info,r._close=function(){u._close(this)},u.open||(r._pause(),u.plugin.ready&&u._start())},a._closeOut=function(r){var o=r._impl;V(o.clients,r._orig),!o.clients.length&&o.open&&(o.open=!1,document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["closeout",o.plugin.id]})))},a._closeIn=function(r){var o=r._impl;V(o.clients,r._orig),!o.clients.length&&o.open&&(o.open=!1,document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["closein",o.plugin.id]})))},a._close=function(){a._unwatch()},a._watch=function(){a._insW=a._ins,a._outsW=a._outs,i=setInterval(function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["refresh"]}))},250)},a._unwatch=function(){clearInterval(i),i=void 0},document.addEventListener("jazz-midi-msg",function(r){var o,u,l,m=r.detail?[r.detail]:void 0;if(!m)for(m=a._msg.innerText.split(`
`),a._msg.innerText="",o=0;o<m.length;o++)try{m[o]=JSON.parse(m[o])}catch{m[o]=[]}for(o=0;o<m.length;o++){var y=m[o];if(y.length){if(y[0]==="refresh"){if(y[1].ins){for(u=0;u<y[1].ins.length;u++)y[1].ins[u].type=a._type;a._ins=y[1].ins}if(y[1].outs){for(u=0;u<y[1].outs.length;u++)y[1].outs[u].type=a._type;a._outs=y[1].outs}for(Mn(),u=0;u<a.refreshClients.length;u++)a.refreshClients[u]._resume();a.refreshClients=[]}else if(y[0]==="version"){var H=a._pool[y[1]];H&&(H.ready=!0,H.input&&H.input._start(),H.output&&H.output._start())}else if(y[0]==="openout"){if(l=a._pool[y[1]].output){if(y[2]==l.name){if(l.open=!0,l.clients)for(u=0;u<l.clients.length;u++)l.clients[u]._resume()}else if(l.clients)for(u=0;u<l.clients.length;u++)l.clients[u]._crash()}}else if(y[0]==="openin"){if(l=a._pool[y[1]].input){if(y[2]==l.name){if(l.open=!0,l.clients)for(u=0;u<l.clients.length;u++)l.clients[u]._resume()}else if(l.clients)for(u=0;u<l.clients.length;u++)l.clients[u]._crash()}}else if(y[0]==="midi"&&(l=a._pool[y[1]].input)&&l.clients)for(u=0;u<l.clients.length;u++){var zn=h(y.slice(3));l.clients[u]._emit(zn)}}}})}var d=function(n){return x||Me(n),x._thenable()};function Pe(n){var t=new D;return n instanceof Object&&q(n,function(e){t[e]=n[e]}),t._resume(),t}function G(){var n=this instanceof G?this:n=new G;return G.prototype.reset.apply(n,arguments),n}function kn(){this.type==29.97&&!this.second&&this.frame<2&&this.minute%10&&(this.frame=2)}function xt(n){return[[24,25,29.97,30][n[7]>>1&3],(1&n[7])<<4|n[6],n[5]<<4|n[4],n[3]<<4|n[2],n[1]<<4|n[0]]}function Ie(n){var t;switch(!n.backwards&&n.quarter>=4?n.decrFrame():n.backwards&&n.quarter<4&&n.incrFrame(),n.quarter>>1){case 0:t=n.frame;break;case 1:t=n.second;break;case 2:t=n.minute;break;default:t=n.hour}return 1&n.quarter?t>>=4:t&=15,n.quarter==7&&(n.type==25?t|=2:n.type==29.97?t|=4:n.type==30&&(t|=6)),!n.backwards&&n.quarter>=4?n.incrFrame():n.backwards&&n.quarter<4&&n.decrFrame(),t|n.quarter<<4}function Be(n){return n.type==25?32|n.hour:n.type==29.97?64|n.hour:n.type==30?96|n.hour:n.hour}function De(n){return n<10?"0"+n:n}function At(n){for(var t=[],e=0;e<n.length;e++)t[e]=De(e?n[e]:31&n[e]);return t.join(":")}function h(n){var t,e=this instanceof h?this:e=new h;if(n instanceof h)return e._from=n._from.slice(),q(n,function(r){r!="_from"&&(e[r]=n[r])}),e;if(e._from=[],n===void 0)return e;var i=n instanceof Array?n:arguments;for(t=0;t<i.length;t++)A=i[t],t==1&&(e[0]>=128&&e[0]<=175&&(A=h.noteValue(A)),e[0]>=192&&e[0]<=207&&(A=h.programValue(A))),(A!=parseInt(A)||A<0||A>255)&&vn(i[t]),e.push(A);return e}d.JZZ=d,d.version=R,d.info=function(){return k.prototype.info()},d.Widget=Pe,k.prototype.Widget=d.Widget,d.addMidiIn=function(n,t){var e=M(t._info||{});e.name=n,e.type=e.type||"javascript",e.manufacturer=e.manufacturer||"virtual",e.version=e.version||"0.0";var i={_info:function(){return e},_openIn:function(r){r._pause(),r._info=M(e),r._close=function(){t.disconnect(r)},t.connect(r),r._resume()}};return d.lib.registerMidiIn(n,i)},k.prototype.addMidiIn=d.addMidiIn,d.addMidiOut=function(n,t){var e=M(t._info||{});e.name=n,e.type=e.type||"javascript",e.manufacturer=e.manufacturer||"virtual",e.version=e.version||"0.0";var i={_info:function(){return e},_openOut:function(r){r._pause(),r._info=M(e),r._close=function(){r.disconnect()},wt.apply(r,[t]),r._resume()}};return d.lib.registerMidiOut(n,i)},k.prototype.addMidiOut=d.addMidiOut,d.removeMidiOut=function(n){return d.lib.unregisterMidiOut(n)},k.prototype.removeMidiOut=d.removeMidiOut,d.removeMidiIn=function(n){return d.lib.unregisterMidiIn(n)},k.prototype.removeMidiIn=d.removeMidiIn,d.maskMidiIn=function(n){Hn[n]=!0},k.prototype.maskMidiIn=d.maskMidiIn,d.unmaskMidiIn=function(n){delete Hn[n]},k.prototype.unmaskMidiIn=d.unmaskMidiIn,d.maskMidiOut=function(n){Kn[n]=!0},k.prototype.maskMidiOut=d.maskMidiOut,d.unmaskMidiOut=function(n){delete Kn[n]},k.prototype.unmaskMidiOut=d.unmaskMidiOut,G.prototype.reset=function(n){if(n instanceof G)return this.setType(n.getType()),this.setHour(n.getHour()),this.setMinute(n.getMinute()),this.setSecond(n.getSecond()),this.setFrame(n.getFrame()),this.setQuarter(n.getQuarter()),this;var t=n instanceof Array?n:arguments;return this.setType(t[0]),this.setHour(t[1]),this.setMinute(t[2]),this.setSecond(t[3]),this.setFrame(t[4]),this.setQuarter(t[5]),this},G.prototype.isFullFrame=function(){return this.quarter==0||this.quarter==4},G.prototype.getType=function(){return this.type},G.prototype.getHour=function(){return this.hour},G.prototype.getMinute=function(){return this.minute},G.prototype.getSecond=function(){return this.second},G.prototype.getFrame=function(){return this.frame},G.prototype.getQuarter=function(){return this.quarter},G.prototype.setType=function(n){if(n===void 0||n==24)this.type=24;else if(n==25)this.type=25;else if(n==29.97)this.type=29.97,kn.apply(this);else{if(n!=30)throw RangeError("Bad SMPTE frame rate: "+n);this.type=30}return this.frame>=this.type&&(this.frame=this.type-1),this},G.prototype.setHour=function(n){if(n===void 0&&(n=0),n!=parseInt(n)||n<0||n>=24)throw RangeError("Bad SMPTE hours value: "+n);return this.hour=n,this},G.prototype.setMinute=function(n){if(n===void 0&&(n=0),n!=parseInt(n)||n<0||n>=60)throw RangeError("Bad SMPTE minutes value: "+n);return this.minute=n,kn.apply(this),this},G.prototype.setSecond=function(n){if(n===void 0&&(n=0),n!=parseInt(n)||n<0||n>=60)throw RangeError("Bad SMPTE seconds value: "+n);return this.second=n,kn.apply(this),this},G.prototype.setFrame=function(n){if(n===void 0&&(n=0),n!=parseInt(n)||n<0||n>=this.type)throw RangeError("Bad SMPTE frame number: "+n);return this.frame=n,kn.apply(this),this},G.prototype.setQuarter=function(n){if(n===void 0&&(n=0),n!=parseInt(n)||n<0||n>=8)throw RangeError("Bad SMPTE quarter frame: "+n);return this.quarter=n,this},G.prototype.incrFrame=function(){return this.frame++,this.frame>=this.type&&(this.frame=0,this.second++,this.second>=60&&(this.second=0,this.minute++,this.minute>=60&&(this.minute=0,this.hour=this.hour>=23?0:this.hour+1))),kn.apply(this),this},G.prototype.decrFrame=function(){return!this.second&&this.frame==2&&this.type==29.97&&this.minute%10&&(this.frame=0),this.frame--,this.frame<0&&(this.frame=this.type==29.97?29:this.type-1,this.second--,this.second<0&&(this.second=59,this.minute--,this.minute<0&&(this.minute=59,this.hour=this.hour?this.hour-1:23))),this},G.prototype.incrQF=function(){return this.backwards=!1,this.quarter=this.quarter+1&7,this.quarter!=0&&this.quarter!=4||this.incrFrame(),this},G.prototype.decrQF=function(){return this.backwards=!0,this.quarter=this.quarter+7&7,this.quarter!=3&&this.quarter!=7||this.decrFrame(),this},G.prototype.read=function(n){if(n instanceof h||(n=h.apply(null,arguments)),n[0]==240&&n[1]==127&&n[3]==1&&n[4]==1&&n[9]==247)return this.type=[24,25,29.97,30][n[5]>>5&3],this.hour=31&n[5],this.minute=n[6],this.second=n[7],this.frame=n[8],this.quarter=0,this._=void 0,this._b=void 0,this._f=void 0,!0;if(n[0]==241&&n[1]!==void 0){var t=n[1]>>4,e=15&n[1];return t==0?this._==7&&(this._f==7&&(this.reset(xt(this._a)),this.incrFrame()),this.incrFrame()):t==3?this._==4&&this.decrFrame():t==4?this._==3&&this.incrFrame():t==7&&this._===0&&(this._b===0&&(this.reset(xt(this._a)),this.decrFrame()),this.decrFrame()),this._a||(this._a=[]),this._a[t]=e,this._f=this._f===t-1||t==0?t:void 0,this._b=this._b===t+1||t==7?t:void 0,this._=t,this.quarter=t,!0}return!1},G.prototype.toString=function(){return At([this.hour,this.minute,this.second,this.frame])},d.SMPTE=G,k.prototype.SMPTE=G,h.prototype=[],h.prototype.constructor=h,h.prototype.isMidi=function(){return 1};var tn={};function Cn(n){if(n!=parseFloat(n))throw TypeError("Not a number: "+n)}function rt(){}h.noteValue=function(n){return n===void 0?void 0:tn[n.toString().toLowerCase()]},h.programValue=function(n){return n},h.octaveValue=function(n){var t=tn[n.toString().toLowerCase()];return t===void 0&&(t=tn[n.toString().toLowerCase()+"1"]),t===void 0?void 0:t%12},h.freq=function(n,t){return t===void 0&&(t=440),Cn(t),n!=parseFloat(n)&&(n=N(n)),t*Math.pow(2,(n-69)/12)},h.shift=function(n,t){return t===void 0&&(t=440),Cn(n),Cn(t),12*Math.log2(n/t)},h.midi=function(n,t){return n!=parseFloat(n)?N(n):h.shift(n,t)+69},h.to7b=function(n){return Cn(n),n<=0?0:n>=1?127:Math.floor(128*n)},h.to14b=function(n){return Cn(n),n<=0?0:n>=1?16383:Math.floor(16384*n)},h.to21b=function(n){return n===void 0?2097151:(Cn(n),n<=0?0:(n=(Math.floor(n)<<14)+h.to14b(n-Math.floor(n)))<2097151?n:2097150)},h.to32b=function(n){return Cn(n),n<=0?0:n>=1?4294967295:Math.floor(4294967296*n)},rt.prototype=h,h._sxid=127,h.sxId=function(n){if(n===void 0&&(n=h._sxid),n==this._sxid)return this;n=g(n);var t=new rt;return t._ch=this._ch,t._sxid=n,t},h.ch=function(n){if(n==this._ch||n===void 0&&this._ch===void 0)return this;var t=new rt;return n!==void 0&&(n=p(n)),t._ch=n,t._sxid=this._sxid,t};var Pt={c:0,d:2,e:4,f:5,g:7,a:9,b:11,h:11};for(q(Pt,function(n){for(A=0;A<12&&!((K=Pt[n]+12*A)>127);A++)tn[n+A]=K,tn[n+"♮"+A]=K,K>0&&(tn[n+"b"+A]=K-1,tn[n+"♭"+A]=K-1,tn[n+"bb"+A]=K-2,tn[n+"♭♭"+A]=K-2,tn[n+"𝄫"+A]=K-2),K<127&&(tn[n+"#"+A]=K+1,tn[n+"♯"+A]=K+1,tn[n+"##"+A]=K+2,tn[n+"♯♯"+A]=K+2,tn[n+"𝄪"+A]=K+2)}),A=0;A<128;A++)tn[A]=A;function vn(n){throw RangeError("Bad MIDI value: "+n)}function It(n){throw TypeError("Invalid value: "+n)}function Ee(n){throw RangeError("Out of range: "+n)}function p(n){return St(n),parseInt(n)}function F(n){if(n!=parseInt(n)||n<0||n>15)throw RangeError("Expected a 4-bit value: "+n);return parseInt(n)}function g(n,t){return(n!=parseInt(n)||n<0||n>127)&&vn(t===void 0?n:t),parseInt(n)}function cn(n){return(n!=parseInt(n)||n<0||n>255)&&vn(n),parseInt(n)}function Bt(n){return(n!=parseInt(n)||n<0||n>16383)&&vn(n),parseInt(n)}function Sn(n){if(n!=parseInt(n)||n<0||n>65535)throw RangeError("Expected a 16-bit value: "+n);return parseInt(n)}function Fe(n){if(n!=parseInt(n)||n<0||n>1048575)throw RangeError("Expected a 20-bit value: "+n);return parseInt(n)}function Re(n){return(n!=parseInt(n)||n<0||n>2097151)&&vn(n),parseInt(n)}function Oe(n){return(n!=parseInt(n)||n<0||n>4294967295)&&vn(n),parseInt(n)}function N(n){return g(h.noteValue(n),n)}function J(n){return 127&Bt(n)}function Q(n){return Bt(n)>>7}function ke(n){n=""+n;for(var t=0;t<n.length;t++)n.charCodeAt(t)>255&&vn(n[t]);return n}function ot(n){return[n>>14,n>>7&127,127&n]}function qn(n,t){return n!=parseFloat(n)&&It(t===void 0?n:t),(n<0||n>1)&&Ee(t===void 0?n:t),parseFloat(n)}function st(n){return n===void 0||n?127:126}function Dt(n){var t,e,i=[],r={};q(n,function(u){if(e=Re(n[u]),(u=N(u))in r)throw RangeError("Duplicate MIDI value: "+u);i.push(u),r[u]=e}),i.sort();var o=[i.length];for(t=0;t<i.length;t++)o=o.concat([i[t]],ot(r[i[t]]));return o}function Et(n){var t={};return q(n,function(e){t[e]=h.to21b(n[e]==parseFloat(n[e])?n[e]:N(n[e]))}),t}function Ft(n){var t={};return q(n,function(e){t[e]=h.to21b(h.midi(n[e]))}),t}function qe(n){var t=[];if(!(n instanceof Array)||n.length!=12)throw TypeError("Expected an array of size 12");for(var e=0;e<12;e++)t.push(g(n[e]));return t}function Ne(n){var t=[];if(!(n instanceof Array)||n.length!=12)throw TypeError("Expected an array of size 12");for(var e=0;e<12;e++)t.push(Q(n[e])),t.push(J(n[e]));return t}var Wn={noteOff:function(n,t,e){return e===void 0&&(e=64),[128+p(n),N(t),g(e)]},noteOn:function(n,t,e){return e===void 0&&(e=127),[144+p(n),N(t),g(e)]},aftertouch:function(n,t,e){return[160+p(n),N(t),g(e)]}},w={control:function(n,t,e){return[176+p(n),g(t),g(e)]},program:function(n,t){return[192+p(n),g(h.programValue(t),t)]},pressure:function(n,t){return[208+p(n),g(t)]},pitchBend:function(n,t,e){return e===void 0?[224+p(n),J(t),Q(t)]:[224+p(n),g(e),g(t)]},pitchBendF:function(n,t){return w.pitchBend(n,h.to14b((t+1)/2))},bankMSB:function(n,t){return[176+p(n),0,g(t)]},bankLSB:function(n,t){return[176+p(n),32,g(t)]},modMSB:function(n,t){return[176+p(n),1,g(t)]},modLSB:function(n,t){return[176+p(n),33,g(t)]},breathMSB:function(n,t){return[176+p(n),2,g(t)]},breathLSB:function(n,t){return[176+p(n),34,g(t)]},footMSB:function(n,t){return[176+p(n),4,g(t)]},footLSB:function(n,t){return[176+p(n),36,g(t)]},portamentoMSB:function(n,t){return[176+p(n),5,g(t)]},portamentoLSB:function(n,t){return[176+p(n),37,g(t)]},dataMSB:function(n,t){return[176+p(n),6,g(t)]},dataLSB:function(n,t){return[176+p(n),38,g(t)]},volumeMSB:function(n,t){return[176+p(n),7,g(t)]},volumeLSB:function(n,t){return[176+p(n),39,g(t)]},balanceMSB:function(n,t){return[176+p(n),8,g(t)]},balanceLSB:function(n,t){return[176+p(n),40,g(t)]},panMSB:function(n,t){return[176+p(n),10,g(t)]},panLSB:function(n,t){return[176+p(n),42,g(t)]},expressionMSB:function(n,t){return[176+p(n),11,g(t)]},expressionLSB:function(n,t){return[176+p(n),43,g(t)]},damper:function(n,t){return t===void 0&&(t=!0),[176+p(n),64,t?127:0]},portamento:function(n,t){return t===void 0&&(t=!0),[176+p(n),65,t?127:0]},sostenuto:function(n,t){return t===void 0&&(t=!0),[176+p(n),66,t?127:0]},soft:function(n,t){return t===void 0&&(t=!0),[176+p(n),67,t?127:0]},legato:function(n,t){return t===void 0&&(t=!0),[176+p(n),68,t?127:0]},hold2:function(n,t){return t===void 0&&(t=!0),[176+p(n),69,t?127:0]},soundVariation:function(n,t){return[176+p(n),70,N(t)]},filterResonance:function(n,t){return[176+p(n),71,N(t)]},releaseTime:function(n,t){return[176+p(n),72,N(t)]},attackTime:function(n,t){return[176+p(n),73,N(t)]},brightness:function(n,t){return[176+p(n),74,N(t)]},decayTime:function(n,t){return[176+p(n),75,N(t)]},vibratoRate:function(n,t){return[176+p(n),76,N(t)]},vibratoDepth:function(n,t){return[176+p(n),77,N(t)]},vibratoDelay:function(n,t){return[176+p(n),78,N(t)]},ptc:function(n,t){return[176+p(n),84,N(t)]},dataIncr:function(n){return[176+p(n),96,0]},dataDecr:function(n){return[176+p(n),97,0]},nrpnLSB:function(n,t){return[176+p(n),98,g(t)]},nrpnMSB:function(n,t){return[176+p(n),99,g(t)]},rpnLSB:function(n,t){return[176+p(n),100,g(t)]},rpnMSB:function(n,t){return[176+p(n),101,g(t)]},allSoundOff:function(n){return[176+p(n),120,0]},resetAllControllers:function(n){return[176+p(n),121,0]},localControl:function(n,t){return t===void 0&&(t=!0),[176+p(n),122,t?127:0]},allNotesOff:function(n){return[176+p(n),123,0]},omni:function(n,t){return t===void 0&&(t=!0),[176+p(n),t?125:124,0]},mono:function(n,t){return t===void 0&&(t=1),[176+p(n),126,g(t)]},poly:function(n){return[176+p(n),127,0]}};function Rt(n,t,e,i){return t!==void 0?[g(n),g(t),g(e),g(i)]:((n!=parseInt(n)||n<0||n>65535)&&It(n),[(n=parseInt(n))>>12&15,n>>8&15,n>>4&15,15&n])}function Ot(n){return Cn(n),(n=Math.round(65536*n+16384))<0?0:n>65535?65535:n}var jn={mtc:function(n){return[241,Ie(n)]},songPosition:function(n,t){return t===void 0?[242,J(n),Q(n)]:[242,g(t),g(n)]},songSelect:function(n){return[243,g(n)]},tune:function(){return[246]},clock:function(){return[248]},start:function(){return[250]},continue:function(){return[251]},stop:function(){return[252]},active:function(){return[254]},reset:function(){return[255]}},S={sxIdRequest:function(){return[240,126,this._sxid,6,1,247]},sxTuningDumpRequest:function(n,t){return t===void 0?[240,126,this._sxid,8,0,g(n),247]:[240,126,this._sxid,8,3,g(n),g(t),247]},sxFullFrame:function(n){return[240,127,this._sxid,1,1,Be(n),n.getMinute(),n.getSecond(),n.getFrame(),247]},sxMasterVolume:function(n,t){return t===void 0?[240,127,this._sxid,4,1,J(n),Q(n),247]:[240,127,this._sxid,4,1,g(t),g(n),247]},sxMasterVolumeF:function(n){return S.sxMasterVolume.call(this,h.to14b(qn(n)))},sxMasterFineTuning:function(n,t){return t===void 0?[240,127,this._sxid,4,3,J(n),Q(n),247]:[240,127,this._sxid,4,3,g(t),g(n),247]},sxMasterFineTuningF:function(n){return S.sxMasterFineTuning.call(this,h.to14b(qn((n%1+1)/2,n)))},sxMasterCoarseTuning:function(n){return[240,127,this._sxid,4,4,0,g(n),247]},sxMasterCoarseTuningF:function(n){return S.sxMasterCoarseTuning.call(this,n-n%1+64)},sxNoteTuning:function(n,t,e,i){return t==parseInt(t)?[240,st(i),this._sxid,8,7,g(n),g(t)].concat(Dt(e),[247]):[240,127,this._sxid,8,2,g(n)].concat(Dt(t),[247])},sxNoteTuningF:function(n,t,e,i){return t==parseInt(t)?S.sxNoteTuning.call(this,n,t,Et(e),i):S.sxNoteTuning.call(this,n,Et(t))},sxNoteTuningHZ:function(n,t,e,i){return t==parseInt(t)?S.sxNoteTuning.call(this,n,t,Ft(e),i):S.sxNoteTuning.call(this,n,Ft(t))},sxScaleTuning1:function(n,t,e){return n==parseInt(n)?[240,st(e),this._sxid,8,8].concat(ot(Sn(n)),qe(t),[247]):S.sxScaleTuning1.call(this,65535,n,t)},sxScaleTuning1F:function(n,t,e){if(n!=parseInt(n))return S.sxScaleTuning1F.call(this,65535,n,t);for(var i=[],r=0;r<t.length;r++){if(t[r]<-.64||t[r]>.63)throw RangeError("Out of range: "+t[r]);i.push(Math.floor(100*t[r]+64))}return S.sxScaleTuning1.call(this,n,i,e)},sxScaleTuning2:function(n,t,e){return n==parseInt(n)?[240,st(e),this._sxid,8,9].concat(ot(Sn(n)),Ne(t),[247]):S.sxScaleTuning2.call(this,65535,n,t)},sxScaleTuning2F:function(n,t,e){if(n!=parseInt(n))return S.sxScaleTuning2F.call(this,65535,n,t);for(var i=[],r=0;r<t.length;r++){var o=(t[r]+1)/2;if(o<-1||o>1)throw RangeError("Out of range: "+t[r]);i.push(h.to14b((t[r]+1)/2))}return S.sxScaleTuning2.call(this,n,i,e)},sxGM:function(n){return n===void 0&&(n=1),[240,126,this._sxid,9,n?n==2?3:1:2,247]},sxGS:function(n){for(var t=n===void 0?[64,0,127,0]:n instanceof Array?n:arguments,e=0,i=[240,65,this._sxid,66,18],r=0;r<t.length;r++){var o=g(t[r]);i.push(o),e+=o}return e%=128,i.push(e?128-e:0),i.push(247),i},sxXG:function(n){var t=n===void 0?[0,0,126,0]:n instanceof Array?n:arguments,e=this._sxid==127?0:this._sxid;e>15&&vn("Bad Yamaha device number: "+e);for(var i=[240,67,16+e,76],r=0;r<t.length;r++)i.push(g(t[r]));return i.push(247),i},sxMidiSoft:function(n,t){var e=[240,0,32,36,0,g(n||0)];t=t===void 0?"":""+t;for(var i=0;i<t.length;i++)e.push(g(t.charCodeAt(i)));return e.push(247),e},gsMasterVolume:function(n){return S.sxGS.call(this,[64,0,4,g(n)])},gsMasterVolumeF:function(n){return S.gsMasterVolume.call(this,h.to7b(qn(n)))},gsMasterFineTuning:function(n,t,e,i){return n=Rt(n,t,e,i),S.sxGS.call(this,[64,0,0,n[0],n[1],n[2],n[3]])},gsMasterFineTuningF:function(n){return S.gsMasterFineTuning.call(this,Ot(n%1))},gsMasterCoarseTuning:function(n){return S.sxGS.call(this,[64,0,5,g(n)])},gsMasterCoarseTuningF:function(n){return S.gsMasterCoarseTuning.call(this,n-n%1+64)},gsOctaveTuning:function(n,t,e){return S.sxGS.call(this,[64,16+[1,2,3,4,5,6,7,8,9,0,11,12,13,14,15][p(n)],64+h.octaveValue(t),g(e)])},gsOctaveTuningF:function(n,t,e){if(e<-.64||e>.63)throw RangeError("Out of range: "+e);return S.gsOctaveTuning.call(this,n,t,Math.floor(100*e+64))},xgMasterVolume:function(n){return S.sxXG.call(this,[0,0,4,g(n)])},xgMasterVolumeF:function(n){return S.xgMasterVolume.call(this,h.to7b(qn(n)))},xgMasterFineTuning:function(n,t,e,i){return n=Rt(n,t,e,i),S.sxXG.call(this,[0,0,0,n[0],n[1],n[2],n[3]])},xgMasterFineTuningF:function(n){return S.xgMasterFineTuning.call(this,Ot(n%1))},xgMasterCoarseTuning:function(n){return S.sxXG.call(this,[0,0,6,g(n)])},xgMasterCoarseTuningF:function(n){return S.xgMasterCoarseTuning.call(this,n-n%1+64)},xgOctaveTuning:function(n,t,e){return S.sxXG.call(this,[8,p(n),65+h.octaveValue(t),g(e)])},xgOctaveTuningF:function(n,t,e){if(e<-.64||e>.63)throw RangeError("Out of range: "+e);return S.xgOctaveTuning.call(this,n,t,Math.floor(100*e+64))}};S.sxScaleTuning=S.sxScaleTuning2,S.sxScaleTuningF=S.sxScaleTuning2F,S.sxMasterTranspose=S.sxMasterCoarseTuning,S.sxMasterTransposeF=S.sxMasterCoarseTuningF,S.gsMasterTranspose=S.gsMasterCoarseTuning,S.gsMasterTransposeF=S.gsMasterCoarseTuningF,S.xgMasterTranspose=S.xgMasterCoarseTuning,S.xgMasterTransposeF=S.xgMasterCoarseTuningF;var I={bank:function(n,t,e){return e===void 0?[w.bankMSB(n,Q(t)),w.bankLSB(n,J(t))]:[w.bankMSB(n,t),w.bankLSB(n,e)]},modF:function(n,t){return I.mod(n,h.to14b(t))},mod:function(n,t,e){return e===void 0?[w.modMSB(n,Q(t)),w.modLSB(n,J(t))]:[w.modMSB(n,t),w.modLSB(n,e)]},breathF:function(n,t){return I.breath(n,h.to14b(t))},breath:function(n,t,e){return e===void 0?[w.breathMSB(n,Q(t)),w.breathLSB(n,J(t))]:[w.breathMSB(n,t),w.breathLSB(n,e)]},footF:function(n,t){return I.foot(n,h.to14b(t))},foot:function(n,t,e){return e===void 0?[w.footMSB(n,Q(t)),w.footLSB(n,J(t))]:[w.footMSB(n,t),w.footLSB(n,e)]},portamentoTimeF:function(n,t){return I.portamentoTime(n,h.to14b(t))},portamentoTime:function(n,t,e){return e===void 0?[w.portamentoMSB(n,Q(t)),w.portamentoLSB(n,J(t))]:[w.portamentoMSB(n,t),w.portamentoLSB(n,e)]},dataF:function(n,t){return I.data(n,h.to14b(t))},data:function(n,t,e){return e===void 0?[w.dataMSB(n,Q(t)),w.dataLSB(n,J(t))]:[w.dataMSB(n,t),w.dataLSB(n,e)]},volumeF:function(n,t){return I.volume(n,h.to14b(t))},volume:function(n,t,e){return e===void 0?[w.volumeMSB(n,Q(t)),w.volumeLSB(n,J(t))]:[w.volumeMSB(n,t),w.volumeLSB(n,e)]},balanceF:function(n,t){return I.balance(n,h.to14b((t+1)/2))},balance:function(n,t,e){return e===void 0?[w.balanceMSB(n,Q(t)),w.balanceLSB(n,J(t))]:[w.balanceMSB(n,t),w.balanceLSB(n,e)]},panF:function(n,t){return I.pan(n,h.to14b((t+1)/2))},pan:function(n,t,e){return e===void 0?[w.panMSB(n,Q(t)),w.panLSB(n,J(t))]:[w.panMSB(n,t),w.panLSB(n,e)]},expressionF:function(n,t){return I.expression(n,h.to14b(t))},expression:function(n,t,e){return e===void 0?[w.expressionMSB(n,Q(t)),w.expressionLSB(n,J(t))]:[w.expressionMSB(n,t),w.expressionLSB(n,e)]},nrpn:function(n,t,e){return e===void 0?[w.nrpnMSB(n,Q(t)),w.nrpnLSB(n,J(t))]:[w.nrpnMSB(n,t),w.nrpnLSB(n,e)]},rpn:function(n,t,e){return e===void 0?[w.rpnMSB(n,Q(t)),w.rpnLSB(n,J(t))]:[w.rpnMSB(n,t),w.rpnLSB(n,e)]},rpnPitchBendRange:function(n,t,e){return I.rpn(n,0,0).concat(I.data(n,t,e))},rpnPitchBendRangeF:function(n,t){return I.rpnPitchBendRange(n,g(t-t%1),Math.floor(t%1*100))},rpnFineTuning:function(n,t,e){return I.rpn(n,0,1).concat(I.data(n,t,e))},rpnFineTuningF:function(n,t){return I.rpn(n,0,1).concat(I.dataF(n,(t%1+1)/2))},rpnCoarseTuning:function(n,t){return I.rpn(n,0,2).concat([w.dataMSB(n,t)])},rpnCoarseTuningF:function(n,t){return I.rpn(n,0,2).concat([w.dataMSB(n,t-t%1+64)])},rpnTuning:function(n,t,e,i){return I.rpnCoarseTuning(n,t).concat(I.rpnFineTuning(n,e,i))},rpnTuningF:function(n,t){return I.rpnCoarseTuningF(n,t).concat(I.rpnFineTuningF(n,t))},rpnTuningA:function(n,t){return I.rpnTuningF(n,h.shift(t))},rpnSelectTuningProgram:function(n,t){return I.rpn(n,0,3).concat([w.dataMSB(n,t)])},rpnSelectTuningBank:function(n,t){return I.rpn(n,0,4).concat([w.dataMSB(n,t)])},rpnSelectTuning:function(n,t,e){return e===void 0?I.rpnSelectTuningProgram(n,t):I.rpnSelectTuningBank(n,t).concat(I.rpnSelectTuningProgram(n,e))},rpnModulationDepthRange:function(n,t,e){return I.rpn(n,0,5).concat(I.data(n,t,e))},rpnModulationDepthRangeF:function(n,t){return I.rpnModulationDepthRange(n,g(t-t%1),Math.floor(t%1*128))},rpnNull:function(n){return I.rpn(n,127,127)},mode1:function(n){return[w.omni(n,!0),w.poly(n)]},mode2:function(n){return[w.omni(n,!0),w.mono(n)]},mode3:function(n){return[w.omni(n,!1),w.poly(n)]},mode4:function(n){return[w.omni(n,!1),w.mono(n)]}};I.rpnTranspose=I.rpnCoarseTuningF;var Dn={sxMasterTuning:function(n,t,e){return[S.sxMasterCoarseTuning.call(this,n),S.sxMasterFineTuning.call(this,t,e)]},sxMasterTuningF:function(n){return[S.sxMasterCoarseTuningF.call(this,n),S.sxMasterFineTuningF.call(this,n)]},gsMasterTuningF:function(n){return[S.gsMasterCoarseTuningF.call(this,n),S.gsMasterFineTuningF.call(this,n)]},xgMasterTuningF:function(n){return[S.xgMasterCoarseTuningF.call(this,n),S.xgMasterFineTuningF.call(this,n)]},sxMasterTuningA:function(n){return Dn.sxMasterTuningF.call(this,h.shift(n))},gsMasterTuningA:function(n){return Dn.gsMasterTuningF.call(this,h.shift(n))},xgMasterTuningA:function(n){return Dn.xgMasterTuningF.call(this,h.shift(n))},gsScaleTuning:function(n,t){var e=[];if(t.length!=12)throw RangeError("Wrong input size: "+t.length);for(var i=0;i<12;i++)e.push(S.gsOctaveTuning.call(this,n,i,t[i]));return e},gsScaleTuningF:function(n,t){var e=[];if(t.length!=12)throw RangeError("Wrong input size: "+t.length);for(var i=0;i<12;i++)e.push(S.gsOctaveTuningF.call(this,n,i,t[i]));return e},xgScaleTuning:function(n,t){var e=[];if(t.length!=12)throw RangeError("Wrong input size: "+t.length);for(var i=0;i<12;i++)e.push(S.xgOctaveTuning.call(this,n,i,t[i]));return e},xgScaleTuningF:function(n,t){var e=[];if(t.length!=12)throw RangeError("Wrong input size: "+t.length);for(var i=0;i<12;i++)e.push(S.xgOctaveTuningF.call(this,n,i,t[i]));return e}};function z(n,t){var e=new h;return e.ff=cn(n),e.dd=t===void 0?"":ke(t),e}var Xn={smf:function(n){if(n instanceof h)return new h(n);var t=n instanceof Array?n:arguments,e=cn(t[0]),i="";return t.length==2?i=xn(t[1]):t.length>2&&(i=xn(Array.prototype.slice.call(t,1))),z(e,i)},smfSeqNumber:function(n){if(n==parseInt(n)){if(n<0||n>65535)throw RangeError("Sequence number out of range: "+n);n=String.fromCharCode(n>>8)+String.fromCharCode(255&n)}else if((n=""+n).length==0)n="\0\0";else if(n.length==1)n="\0"+n;else if(n.length>2)throw RangeError("Sequence number out of range"+An(n));return z(0,n)},smfText:function(n){return z(1,d.lib.toUTF8(n))},smfCopyright:function(n){return z(2,d.lib.toUTF8(n))},smfSeqName:function(n){return z(3,d.lib.toUTF8(n))},smfInstrName:function(n){return z(4,d.lib.toUTF8(n))},smfLyric:function(n){return z(5,d.lib.toUTF8(n))},smfMarker:function(n){return z(6,d.lib.toUTF8(n))},smfCuePoint:function(n){return z(7,d.lib.toUTF8(n))},smfProgName:function(n){return z(8,d.lib.toUTF8(n))},smfDevName:function(n){return z(9,d.lib.toUTF8(n))},smfChannelPrefix:function(n){if(n==parseInt(n))St(n),n=String.fromCharCode(n);else if((n=""+n).length==0)n="\0";else if(n.length>1||n.charCodeAt(0)>15)throw RangeError("Channel number out of range"+An(n));return z(32,n)},smfMidiPort:function(n){if(n==parseInt(n)){if(n<0||n>127)throw RangeError("Port number out of range: "+n);n=String.fromCharCode(n)}else if((n=""+n).length==0)n="\0";else if(n.length>1||n.charCodeAt(0)>127)throw RangeError("Port number out of range"+An(n));return z(33,n)},smfEndOfTrack:function(n){if(xn(n)!="")throw RangeError("Unexpected data"+An(xn(n)));return z(47)},smfTempo:function(n){if((""+n).length==3)return z(81,n);if(n==parseInt(n)&&n>0&&n<=16777215)return z(81,String.fromCharCode(n>>16)+String.fromCharCode(n>>8&255)+String.fromCharCode(255&n));throw RangeError("Out of range"+An(xn(n)))},smfBPM:function(n){return Xn.smfTempo(Math.round(6e7/n))},smfSMPTE:function(n){if(n instanceof G)return z(84,String.fromCharCode(n.hour)+String.fromCharCode(n.minute)+String.fromCharCode(n.second)+String.fromCharCode(n.frame)+String.fromCharCode(n.quarter%4*25));if((""+n).length==5)return z(84,n);var t=n instanceof Array?n:Array.prototype.slice.call(arguments);return t.splice(0,0,30),Xn.smfSMPTE(new G(t))},smfTimeSignature:function(n,t,e,i){var r,o,u,l,m=(""+n).match(/^\s*(\d+)\s*\/\s*(\d+)\s*$/);if(m){if(r=parseInt(m[1]),o=parseInt(m[2]),r>0&&r<256&&o>0&&!(o&o-1)){for(u=o,o=0,u>>=1;u;u>>=1)o++;return u=t==parseInt(t)?t:24,l=e==parseInt(e)?e:8,z(88,String.fromCharCode(r)+String.fromCharCode(o)+String.fromCharCode(u)+String.fromCharCode(l))}if((""+n).length==4)return z(88,n)}else if(n==parseInt(n)&&t==parseInt(t)){if(n>0&&n<256&&t>0&&!(t&t-1)){for(r=n,o=0,u=t,u>>=1;u;u>>=1)o++;return u=e==parseInt(e)?e:24,l=i==parseInt(i)?i:8,z(88,String.fromCharCode(r)+String.fromCharCode(o)+String.fromCharCode(u)+String.fromCharCode(l))}if((""+n).length==4)return z(88,n);n=n+"/"+t}else if((""+n).length==4)return z(88,n);throw RangeError("Wrong time signature"+An(xn(""+n)))},smfKeySignature:function(n){var t=(n=""+n).match(/^\s*([A-H][b#]?)\s*(|maj|major|dur|m|min|minor|moll)\s*$/i);if(t){var e={CB:0,GB:1,DB:2,AB:3,EB:4,BB:5,F:6,C:7,G:8,D:9,A:10,E:11,B:12,H:12,"F#":13,"C#":14,"G#":15,"D#":16,"A#":17}[t[1].toUpperCase()],i={"":0,MAJ:0,MAJOR:0,DUR:0,M:1,MIN:1,MINOR:1,MOLL:1}[t[2].toUpperCase()];e!==void 0&&i!==void 0&&(i&&(e-=3),(e-=7)>=-7&&e<0?n=String.fromCharCode(256+e)+String.fromCharCode(i):e>=0&&e<=7&&(n=String.fromCharCode(e)+String.fromCharCode(i)))}if(n.length==2&&n.charCodeAt(1)<=1&&(n.charCodeAt(0)<=7||n.charCodeAt(0)<=255&&n.charCodeAt(0)>=249))return z(89,n);throw RangeError("Incorrect key signature"+An(n))},smfSequencer:function(n){return z(127,xn(n))}},Tn={};function kt(n,t){h[n]=function(){return new h(t.apply(this,arguments))},Tn[n]=function(){return this.send(t.apply(this,arguments))}}function Le(n,t){h[n]=function(){return t.apply(this,arguments)},Tn[n]=function(){return this.send(t.apply(this,arguments))}}function Ge(n,t){h[n]=function(){var e,i=[],r=t.apply(this,arguments);for(e=0;e<r.length;e++)i.push(new h(r[e]));return i},Tn[n]=function(){for(var e=t.apply(this,arguments),i=this,r=0;r<e.length;r++)i=i.send(e[r]);return i}}function Ve(n,t){h[n]=function(){return new h(t.apply(this,this._ch===void 0?arguments:[this._ch].concat(Array.prototype.slice.call(arguments))))},Tn[n]=function(){if(this._master!==void 0){var e=new h(t.apply(this,[this._master].concat(Array.prototype.slice.call(arguments))));return e._mpe=e[1],this.send(e)}return this.send(t.apply(this,this._ch===void 0?arguments:[this._ch].concat(Array.prototype.slice.call(arguments))))}}function ze(n,t){h[n]=function(){return new h(t.apply(this,this._ch===void 0?arguments:[this._ch].concat(Array.prototype.slice.call(arguments))))},Tn[n]=function(){if(this._master!==void 0){var e,i=Array.prototype.slice.call(arguments);i.length<t.length?i=[this._master].concat(i):(e=N(i[0]),i[0]=this._master);var r=new h(t.apply(this,i));return r._mpe=e,this.send(r)}return this.send(t.apply(this,this._ch===void 0?arguments:[this._ch].concat(Array.prototype.slice.call(arguments))))}}function Ke(n,t){h[n]=function(){var e,i=[],r=t.apply(this,this._ch===void 0?arguments:[this._ch].concat(Array.prototype.slice.call(arguments)));for(e=0;e<r.length;e++)i.push(new h(r[e]));return i},Tn[n]=function(){var e,i,r;if(this._master!==void 0){var o,u=Array.prototype.slice.call(arguments);for(u.length<t.length?u=[this._master].concat(u):(o=N(u[0]),u[0]=this._master),i=t.apply(this,u),r=this,e=0;e<i.length;e++){var l=h(i[e]);l._mpe=o,r=r.send(l)}return r}for(i=t.apply(this,this._ch===void 0?arguments:[this._ch].concat(Array.prototype.slice.call(arguments))),r=this,e=0;e<i.length;e++)r=r.send(i[e]);return r}}function qt(n){q(Tn,function(t){n.prototype[t]=Tn[t]})}q(jn,function(n){kt(n,jn[n])}),q(S,function(n){kt(n,S[n])}),q(Xn,function(n){Le(n,Xn[n])}),q(Dn,function(n){Ge(n,Dn[n])}),q(Wn,function(n){Ve(n,Wn[n])}),q(w,function(n){ze(n,w[n])}),q(I,function(n){Ke(n,I[n])}),qt(D);var Nt={a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};for(U=0;U<16;U++)Nt[U]=U;function He(n,t){return n==127&&t!==void 0&&t.charCodeAt(0)==67&&t.charCodeAt(1)==123}function Ue(n,t){return He(n,t)&&t.charCodeAt(2)==1}function We(n,t){if(n>=0&&n<=127&&t>=0&&t<=127){var e=15&n,i=n>>4;return e>0&&e<8&&i<7?(e=["C","D","E","F","G","A","B"][e-1]+["bbb","bb","b","","#","##","###"][i],t>34?e+"?":e+["","6","Maj7","Maj7(#11)","(9)","Maj7(9)","6(9)","aug","m","m6","m7","m7b5","m(9)","m7(9)","m7(11)","m+7","m+7(9)","dim","dim7","7","7sus4","7b5","7(9)","7(#11)","7(13)","7(b9)","7(b13)","7(#9)","Maj7aug","7aug","1+8","1+5","sus4","1+2+5","cc"][t]):"-"}return"-"}function Jn(n){for(var t=[],e=0;e<n.length;e++)t[e]=n.charCodeAt(e);return t}function je(n){for(var t="",e=0;e<n.length;e++)t+=String.fromCharCode(n[e]);return t}function xn(n){return n instanceof Array?je(n):n===void 0?"":""+n}function Xe(n){for(var t=0,e=0;e<n.length;e++)t=(t<<8)+n.charCodeAt(e);return t}function hn(n){return(n<16?"0":"")+n.toString(16)}function Qn(n){for(var t=[],e=0;e<n.length;e++)t.push(hn(n[e]));return t.join(" ")}function Lt(n){for(var t=[],e=0;e<n.length;e++)e&&e%4==0&&t.push(" "),t.push(hn(n[e]));return t.join("")}function Gt(n){for(var t="",e=0;e<n.length;e++)n[e]==`
`?t+="\\n":n[e]=="\r"?t+="\\r":n[e]=="	"?t+="\\t":n.charCodeAt(e)<32?t+="\\x"+hn(n.charCodeAt(e)):t+=n[e];return t}function Nn(n){return n.length?": "+Qn(Jn(n)):""}function An(n){return n.length?": "+Gt(d.lib.fromUTF8(n)):""}function Je(n){n===void 0?this._cc={}:this._cc[n]={}}function Qe(n,t){var e=n===void 0?"??":hn(n),i=t===void 0?"??":hn(t),r={"0000":"Pitch Bend Sensitivity","0001":"Channel Fine Tuning","0002":"Channel Coarse Tuning","0003":"Select Tuning Program","0004":"Select Tuning Bank","0005":"Vibrato Depth Range","7f7f":"NONE"}[e+""+i];return"RPN "+e+" "+i+(r?": "+r:"")}function Ze(n,t){return"NRPN "+(n===void 0?"??":hn(n))+" "+(t===void 0?"??":hn(t))}function Vt(n){var t,e="";for(t=0;t<n.length&&n[t];t++)e+=String.fromCharCode(n[t]);return d.lib.fromUTF8(e)}function Ye(n){var t,e,i,r,o,u,l,m="x",y="x";if(n.isMidi2?(i=n[0]>>4,e=m=(15&n[0]).toString(16),this._cc[e]||(this._cc[e]={}),i==2?t=new h(n.slice(1)):i==3?(r=n[1]>>4,o=15&n[1],u=n.slice(2,2+o),r==0&&(t=new h([240].concat(u,[247])),this._cc[e].sx=void 0),r==1&&(this._cc[e].sx=u),r==2&&this._cc[e].sx&&(this._cc[e].sx=this._cc[e].sx.concat(u)),r==3&&this._cc[e].sx&&(u=this._cc[e].sx.concat(u),t=new h([240].concat(u,[247])),this._cc[e].sx=void 0)):i==4?(r=n[1]>>4,e=m+(y=(15&n[1]).toString(16)),this._cc[e]||(this._cc[e]={}),r==12&&(1&n[3]&&(this._cc[e].bm=n[6],this._cc[e].bl=n[7]),n._bm=this._cc[e].bm,n._bl=this._cc[e].bl,d.MIDI.programName&&n.label(d.MIDI.programName(n[4],n._bm,n._bl)))):i==13&&(r=n[1]>>6,48&n[1]||(y=(15&n[1]).toString(16)),e=m+y,this._cc[e]||(this._cc[e]={}),u=n.slice(4),r==0&&(n.label(Vt(u)),this._cc[e].tx=void 0),r==1&&(this._cc[e].tx=u),r==2&&this._cc[e].tx&&(this._cc[e].tx=this._cc[e].tx.concat(u)),r==3&&this._cc[e].tx&&(u=this._cc[e].tx.concat(u),n.label(Vt(u)),this._cc[e].tx=void 0))):t=n,!t||!t.length||t[0]<128)return n;if(t[0]==255)return this._clear(),n;if(r=t[0]>>4,y=(15&t[0]).toString(16),e=r==15?m:m+y,this._cc[e]||(this._cc[e]={}),r==12)t._bm=this._cc[e].bm,t._bl=this._cc[e].bl,d.MIDI.programName&&n.label(d.MIDI.programName(t[1],t._bm,t._bl));else if(r==11)switch(t[1]){case 0:this._cc[e].bm=t[2];break;case 32:this._cc[e].bl=t[2];break;case 98:this._cc[e].nl=t[2],this._cc[e].rn="n";break;case 99:this._cc[e].nm=t[2],this._cc[e].rn="n";break;case 100:this._cc[e].rl=t[2],this._cc[e].rn="r";break;case 101:this._cc[e].rm=t[2],this._cc[e].rn="r";break;case 6:case 38:case 96:case 97:this._cc[e].rn=="r"&&(t._rm=this._cc[e].rm,t._rl=this._cc[e].rl,n.label(Qe(this._cc[e].rm,this._cc[e].rl))),this._cc[e].rn=="n"&&(t._nm=this._cc[e].rm,t._nl=this._cc[e].nl,n.label(Ze(this._cc[e].nm,this._cc[e].nl)))}else t.isFullSysEx()&&(t[1]==127?t[3]==4?(l={1:"Master Volume",2:"Master Balance",3:"Master Fine Tuning",4:"Master Coarse Tuning"}[t[4]])&&n.label(l):t[3]==8&&(l={2:"Note Tuning",7:"Note Tuning, Bank",8:"Scale Tuning, 1 byte format",9:"Scale Tuning, 2 byte format"}[t[4]])&&n.label(l):t[1]==126?t[3]==6?t[4]==1?n.label("Device ID Request"):t[4]==2&&n.label("Device ID Response"):t[3]==8?(l={0:"Bulk Tuning Dump Request",1:"Bulk Tuning Dump",3:"Bulk Tuning Dump Request, Bank",4:"Bulk Tuning Dump, Bank",5:"Scale Tuning Dump, 1 byte format",6:"Scale Tuning Dump, 2 byte format",7:"Note Tuning, Bank",8:"Scale Tuning, 1 byte format",9:"Scale Tuning, 2 byte format"}[t[4]])&&n.label(l):t[3]==9&&(t[4]==1?(n.label("GM1 System On"),this._clear(m),this._cc[m].gm="1"):t[4]==2?(n.label("GM System Off"),this._clear(m),this._cc[m].gm="0"):t[4]==3&&(n.label("GM2 System On"),this._clear(m),this._cc[m].gm="2")):t[1]==67?(240&t[2])==16&&t[3]==76&&(t[4]==0&&t[5]==0&&t[6]==126&&t[7]==0?(n.label("XG System On"),this._clear(m),this._cc[m].gm="Y"):t[4]==0&&t[5]==0&&t[6]==0?n.label("XG Master Tuning"):t[4]==0&&t[5]==0&&t[6]==4?n.label("XG Master Volume"):t[4]==0&&t[5]==0&&t[6]==6?n.label("XG Master Transpose"):t[4]==8&&t[5]<16&&t[6]>=65&&t[6]<=76?n.label("XG Scale Tuning"):n.label("XG Parameter")):t[1]==65&&t[3]==66&&t[4]==18&&(t[5]==64&&(t[6]==0?t[7]==127&&t[8]==0&&t[9]==65?(n.label("GS Reset"),this._clear(m),this._cc[m].gm="R"):t[7]==0?n.label("GS Master Tuning"):t[7]==4?n.label("GS Master Volume"):t[7]==5?n.label("GS Master Transpose"):n.label("GS Parameter"):(240&t[6])==16&&t[7]==21?n.label("GS Drum Part Change"):(240&t[6])==16&&t[7]>=64&&t[7]<=75?n.label("GS Scale Tuning"):n.label("GS Parameter")),t[5]==65&&n.label("GS Parameter")));return n}function zt(){var n=new D;return n._clear=Je,n._read=Ye,n._receive=function(t){this._emit(this._read(t))},n.gm=function(t){return t===void 0&&(t="x"),this._cc[t]&&this._cc[t].gm||0},n._clear(),n._resume(),n}function pn(){var n=this instanceof pn?this:n=new pn;return n.reset(),arguments.length&&pn.prototype.setup.apply(n,arguments),n}function _(n){var t,e=this instanceof _?this:e=new _;if(n instanceof _)return e._from=n._from.slice(),q(n,function(r){r!="_from"&&(e[r]=n[r])}),e;e._from=[],n===void 0&&(n=[0,0,0,0]);var i=n instanceof Array?n:arguments;for(e.length=0,t=0;t<i.length;t++)((A=i[t])!=parseInt(A)||A<0||A>255)&&vn(i[t]),e.push(A);if(e.length!=[4,4,4,8,8,16,4,4,8,8,8,12,12,16,16,16][e[0]>>4])throw RangeError("Wrong UMP size");return e}function Zn(){}h.prototype.getChannel=function(){if(this.ff==32&&this.dd.length==1&&this.dd.charCodeAt(0)<16)return this.dd.charCodeAt(0);var n=this[0];return n===void 0||n<128||n>239?void 0:15&n},h.prototype.setChannel=function(n){if((n=Nt[n])===void 0)return this;if(this.ff==32)this.dd=String.fromCharCode(n);else{var t=this[0];t!==void 0&&t>=128&&t<=239&&(this[0]=240&t|n)}return this},h.prototype.getNote=function(){var n=this[0];if(!(n===void 0||n<128||n>175))return this[1]},h.prototype.setNote=function(n){var t=this[0];return t===void 0||t<128||t>175||(n=h.noteValue(n))!==void 0&&(this[1]=n),this},h.prototype.getVelocity=function(){var n=this[0];if(!(n===void 0||n<128||n>159))return this[2]},h.prototype.setVelocity=function(n){var t=this[0];return t===void 0||t<128||t>159||(n=parseInt(n))>=0&&n<128&&(this[2]=n),this},h.prototype.getSysExId=function(){if(this[0]==240)return this[2]},h.prototype.setSysExId=function(n){return this[0]==240&&this.length>2&&(n=parseInt(n))>=0&&n<128&&(this[2]=n),this},h.prototype.getData=function(){if(this.dd!==void 0)return this.dd.toString()},h.prototype.setData=function(n){return this.dd=xn(n),this},h.prototype.getText=function(){if(this.dd!==void 0)return Ue(this.ff,this.dd)?We(this.dd.charCodeAt(3),this.dd.charCodeAt(4)):d.lib.fromUTF8(this.dd);if(this.isMidiSoft()){for(var n=[],t=6;t<this.length-1;t++)n.push(String.fromCharCode(this[t]));return n.join("")}},h.prototype.setText=function(n){return this.dd=d.lib.toUTF8(n),this},h.prototype.getTempo=function(){if(this.ff==81&&this.dd!==void 0)return 65536*this.dd.charCodeAt(0)+256*this.dd.charCodeAt(1)+this.dd.charCodeAt(2)},h.prototype.getBPM=function(){var n=this.getTempo();if(n)return 6e7/n},h.prototype.getTimeSignature=function(){if(this.ff==88&&this.dd!==void 0)return[this.dd.charCodeAt(0),1<<this.dd.charCodeAt(1)]},h.prototype.getTimeSignature4=function(){if(this.ff==88&&this.dd!==void 0){var n=[this.dd.charCodeAt(0),1<<this.dd.charCodeAt(1)];return this.dd.length==4&&n.push(this.dd.charCodeAt(2),this.dd.charCodeAt(3)),n}},h.prototype.getKeySignature=function(){if(this.ff==89&&this.dd!==void 0){var n=this.dd.charCodeAt(0),t=this.dd.charCodeAt(1);if(128&n&&(n-=256),n>=-7&&n<=7&&t>=0&&t<=1)return[n,["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#","G#","D#","A#"][t?n+10:n+7],!!t]}},h.prototype.isNoteOn=function(){var n=this[0];return!(n===void 0||n<144||n>159)&&this[2]>0},h.prototype.isNoteOff=function(){var n=this[0];return!(n===void 0||n<128||n>159)&&(n<144||this[2]==0)},h.prototype.isSysEx=function(){return this[0]==240},h.prototype.isFullSysEx=function(){return this[0]==240&&this[this.length-1]==247},h.prototype.isMidiSoft=function(){return this.isFullSysEx()&&this[1]==0&&this[2]==32&&this[3]==36&&this[4]==0},h.prototype.isSMF=function(){return this.ff>=0&&this.ff<=127},h.prototype.isEOT=function(){return this.ff==47},h.prototype.isText=function(){return this.ff==1},h.prototype.isCopyright=function(){return this.ff==2},h.prototype.isSeqName=function(){return this.ff==3},h.prototype.isInstrName=function(){return this.ff==4},h.prototype.isLyric=function(){return this.ff==5},h.prototype.isMarker=function(){return this.ff==6},h.prototype.isCuePoint=function(){return this.ff==7},h.prototype.isProgName=function(){return this.ff==8},h.prototype.isDevName=function(){return this.ff==9},h.prototype.isTempo=function(){return this.ff==81},h.prototype.isTimeSignature=function(){return this.ff==88},h.prototype.isKeySignature=function(){return this.ff==89},h.prototype.isGmReset=function(){return this.match([240,126,[0,0],9,[0,0],247])},h.prototype.isGsReset=function(){return this.match([240,65,[0,0],66,18,64,0,127,0,65,247])},h.prototype.isXgReset=function(){return this.match([240,67,[16,240],76,0,0,126,0,247])},h.prototype.match=function(n){var t,e;for(t=0;t<n.length;t++)if((e=n[t][1])===void 0){if(this[t]!=n[t])return!1}else if((this[t]&e)!=(n[t][0]&e))return!1;return!0},h.prototype.label=function(n){return this.lbl=this.lbl?this.lbl+", "+n:n,this},h.prototype.toString=function(){return this.lbl?this._str()+" ("+this.lbl+")":this._str()},h.prototype._str=function(){var n,t;if(this.length)n=Qn(this);else{if(this.ff===void 0)return"empty";n="ff"+hn(this.ff)}return(t=this._string())?n+" -- "+t:n},h.prototype._string=function(){var n,t="";if(!this.length){if(this.ff==0)t+="Sequence Number: "+Xe(this.dd);else if(this.ff>0&&this.ff<10)t+=["","Text","Copyright","Sequence Name","Instrument Name","Lyric","Marker","Cue Point","Program Name","Device Name"][this.ff]+An(this.dd);else if(this.ff==32)t+="Channel Prefix"+Nn(this.dd);else if(this.ff==33)t+="MIDI Port"+Nn(this.dd);else if(this.ff==47)t+="End of Track"+Nn(this.dd);else if(this.ff==81)t+="Tempo: "+Math.round(100*this.getBPM())/100+" bpm";else if(this.ff==84)t+="SMPTE Offset: "+At(Jn(this.dd));else if(this.ff==88){var e=1<<this.dd.charCodeAt(1);t+="Time Signature: "+this.dd.charCodeAt(0)+"/"+e,t+=" "+this.dd.charCodeAt(2)+" "+this.dd.charCodeAt(3)}else if(this.ff==89){t+="Key Signature: ";var i=this.getKeySignature();i?(t+=i[1],i[2]&&(t+=" min")):t+="invalid"}else if(this.ff==127){if(this.dd.charCodeAt(0)==67&&this.dd.charCodeAt(1)==123)return t+="[XF:"+hn(this.dd.charCodeAt(2))+"]",t+=(n={0:"Version",1:"Chord",2:"Rehearsal Mark",3:"Phrase Mark",4:"Max Phrase Mark",5:"Fingering Number",12:"Guide Track Flag",16:"Guitar Info",18:"Chord Voicing",127:"XG Song Data Number"}[this.dd.charCodeAt(2)])?" "+n:"",t+=": ",this.dd.charCodeAt(2)==0?t+this.dd.substring(3,7)+" "+Qn(Jn(this.dd.substring(7))):this.dd.charCodeAt(2)==1?t+this.getText():t+Qn(Jn(this.dd.substring(3)));t+="Sequencer Specific"+Nn(this.dd)}else t+="SMF"+Nn(this.dd);return t}if(n={241:"MIDI Time Code",242:"Song Position",243:"Song Select",244:"Undefined",245:"Undefined",246:"Tune request",248:"Timing clock",249:"Undefined",250:"Start",251:"Continue",252:"Stop",253:"Undefined",254:"Active Sensing",255:"Reset"}[this[0]])return n;if(this.isMidiSoft())return(n=Gt(this.getText()))&&(n=" "+n),"[K:"+hn(this[5])+"]"+n;var r=this[0]>>4;return(n={8:"Note Off",10:"Aftertouch",12:"Program Change",13:"Channel Aftertouch",14:"Pitch Wheel"}[r])?n:r==9?this[2]?"Note On":"Note Off":r!=11?t:(n={0:"Bank Select MSB",1:"Modulation Wheel MSB",2:"Breath Controller MSB",4:"Foot Controller MSB",5:"Portamento Time MSB",6:"Data Entry MSB",7:"Channel Volume MSB",8:"Balance MSB",10:"Pan MSB",11:"Expression Controller MSB",12:"Effect Control 1 MSB",13:"Effect Control 2 MSB",16:"General Purpose Controller 1 MSB",17:"General Purpose Controller 2 MSB",18:"General Purpose Controller 3 MSB",19:"General Purpose Controller 4 MSB",31:"Karaoke",32:"Bank Select LSB",33:"Modulation Wheel LSB",34:"Breath Controller LSB",36:"Foot Controller LSB",37:"Portamento Time LSB",38:"Data Entry LSB",39:"Channel Volume LSB",40:"Balance LSB",42:"Pan LSB",43:"Expression Controller LSB",44:"Effect control 1 LSB",45:"Effect control 2 LSB",48:"General Purpose Controller 1 LSB",49:"General Purpose Controller 2 LSB",50:"General Purpose Controller 3 LSB",51:"General Purpose Controller 4 LSB",64:"Damper Pedal",65:"Portamento",66:"Sostenuto",67:"Soft Pedal",68:"Legato",69:"Hold 2",70:"Sound Variation",71:"Filter Resonance",72:"Release Time",73:"Attack Time",74:"Brightness",75:"Decay Time",76:"Vibrato Rate",77:"Vibrato Depth",78:"Vibrato Delay",79:"Sound Controller 10",80:"General Purpose Controller 5",81:"General Purpose Controller 6",82:"General Purpose Controller 7",83:"General Purpose Controller 8",84:"Portamento Control",88:"High Resolution Velocity Prefix",91:"Effects 1 Depth",92:"Effects 2 Depth",93:"Effects 3 Depth",94:"Effects 4 Depth",95:"Effects 5 Depth",96:"Data Increment",97:"Data Decrement",98:"Non-Registered Parameter Number LSB",99:"Non-Registered Parameter Number MSB",100:"Registered Parameter Number LSB",101:"Registered Parameter Number MSB",120:"All Sound Off",121:"Reset All Controllers",122:"Local Control On/Off",123:"All Notes Off",124:"Omni Mode Off",125:"Omni Mode On",126:"Mono Mode On",127:"Poly Mode On"}[this[1]],this[1]>=64&&this[1]<=69&&(n+=this[2]<64?" Off":" On"),n||(n="Undefined"),n)},h.prototype._stamp=function(n){return this._from.push(n._orig?n._orig:n),this},h.prototype._unstamp=function(n){if(n===void 0)this._from=[];else{n._orig&&(n=n._orig);var t=this._from.indexOf(n);t>-1&&this._from.splice(t,1)}return this},h.prototype._stamped=function(n){n._orig&&(n=n._orig);for(var t=0;t<this._from.length;t++)if(this._from[t]==n)return!0;return!1},d.MIDI=h,k.prototype.MIDI=h,d.Context=zt,k.prototype.Context=zt,pn.validate=function(n){var t=n instanceof Array?n:arguments;if(t[0]!=parseInt(t[0])||t[0]<0||t[0]>14)throw RangeError("Bad master channel value: "+t[0]);if(t[1]!=parseInt(t[1])||t[1]<0||t[0]+t[1]>15)throw RangeError("Bad zone size value: "+t[1])},pn.prototype.reset=function(){for(var n=0;n<16;n++)this[n]={band:0,master:n}},pn.prototype.setup=function(n,t){var e;pn.validate(n,t);var i=n+t;if((this[n].master!=n||this[n].band!=t)&&(t||this[n].band)){for(this[n].band?i<(e=n+this[n].band)&&(i=e):this[n].master==n-1?(e=n-1,i<(e+=this[e].band)&&(i=e),this[n-1]={band:0,master:n-1}):this[n].master!=n&&(e=this[n].master,i<(e+=this[e].band)&&(i=e),this[this[n].master].band=n-this[n].master-1),this[n].master=n,this[n].band=t,e=n+1;e<=n+t;e++)this[e].band&&i<e+this[e].band&&(i=e+this[e].band),this[e]={band:0,master:n};for(;e<=i;e++)this[e]={band:0,master:e}}},pn.prototype.filter=function(n){var t=n.getChannel();if(!this[t]||!this[this[t].master].band)return n;var e,i,r,o=this[t].master,u=this[o].band;if(n._mpe!==void 0){for(r=256,e=o+1;e<=o+u;e++)if(this[e].notes){for(r>this[e].notes.length&&(t=e,r=this[e].notes.length),i=0;i<this[e].notes.length;i++)if(this[e].notes[i]==n._mpe){t=e,r=-1;break}}else r>0&&(t=e,r=0);n.setChannel(t),n._mpe=void 0}return t==o||(n.isNoteOn()?(this[t].notes||(this[t].notes=[]),W(this[t].notes,n.getNote())):n.isNoteOff()&&this[t].notes&&V(this[t].notes,n.getNote())),n},d.MPE=pn,_.prototype=[],_.prototype.constructor=_,_.prototype.isMidi=function(){return 2},_.prototype.isMidi2=!0,_.prototype.dump=function(){var n,t="";for(n=0;n<this.length;n++)t+=String.fromCharCode(this[n]);return t},Zn.prototype=_,_._sxid=127,_.sxId=function(n){if(n===void 0&&(n=_._sxid),n==this._sxid)return this;n=g(n);var t=new Zn;return t._ch=this._ch,t._gr=this._gr,t._sxid=n,t},_.ch=function(n){if(n==this._ch||n===void 0&&this._ch===void 0)return this;var t=new Zn;return n!==void 0&&(n=p(n)),t._ch=n,t._gr=this._gr,t._sxid=this._sxid,t},_.gr=function(n){if(n==this._gr||n===void 0&&this._gr===void 0)return this;var t=new Zn;return n!==void 0&&(n=F(n)),t._ch=this._ch,t._gr=n,t._sxid=this._sxid,t},_.prototype.getGroup=function(){if(this[0]){var n=this[0]>>4;return n==1||n==2||n==3||n==4||n==5||n==13?15&this[0]:void 0}};var gn=[0,0,0,0,0,0,0,0,0,0,0,0,0];function _n(n,t,e,i){return t!==void 0?[cn(n),cn(t),cn(e),cn(i)]:[(n=Oe(n))>>24&255,n>>16&255,n>>8&255,255&n]}function Yn(n){return(n=Math.floor(4294967296*n))>4294967295?4294967295:n<0?0:n}var Kt={noop:function(){return[0,0,0,0]},umpClock:function(n){return[0,16,(n=Sn(n))>>8,255&n]},umpTimestamp:function(n){return[0,32,(n=Sn(n))>>8,255&n]},umpTicksPQN:function(n){return[0,48,(n=Sn(n))>>8,255&n]},umpDelta:function(n){return[0,64+((n=Fe(n=n||0))>>16),n>>8&255,255&n]},umpStartClip:function(){return[240,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},umpEndClip:function(){return[240,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},at={umpTempo:function(n,t){return[208+F(n),16,0,0].concat(_n(t),[0,0,0,0,0,0,0,0])},umpBPM:function(n,t){return at.umpTempo(n,Math.round(6e9/t))},umpTimeSignature:function(n,t,e){var i,r,o,u=(""+t).match(/^\s*(\d+)\s*\/\s*(\d+)\s*$/);if(u?(i=parseInt(u[1]),r=parseInt(u[2])):t==parseInt(t)&&e==parseInt(e)&&(i=parseInt(t),r=parseInt(e)),i>0&&i<256&&r>0&&!(r&r-1)){for(o=0,r>>=1;r;r>>=1)o++;if((r=Math.round(32*i/(1<<o)))<256)return[208+F(n),16,0,1,i,o,r,0,0,0,0,0,0,0,0,0]}throw RangeError("Wrong time signature "+t+(e===void 0?"":"/"+e))}},Ht={umpMetadata:function(n,t){return P.umpCustomText(n,0,1,1,0,t)},umpProjectName:function(n,t){return P.umpCustomText(n,0,1,1,1,t)},umpCompositionName:function(n,t){return P.umpCustomText(n,0,1,1,2,t)},umpClipName:function(n,t){return P.umpCustomText(n,0,1,1,3,t)},umpCopyright:function(n,t){return P.umpCustomText(n,0,1,1,4,t)},umpComposerName:function(n,t){return P.umpCustomText(n,0,1,1,5,t)},umpLyricistName:function(n,t){return P.umpCustomText(n,0,1,1,6,t)},umpArrangerName:function(n,t){return P.umpCustomText(n,0,1,1,7,t)},umpPublisherName:function(n,t){return P.umpCustomText(n,0,1,1,8,t)},umpPerformerName:function(n,t){return P.umpCustomText(n,0,1,1,9,t)},umpAccPerformerName:function(n,t){return P.umpCustomText(n,0,1,1,10,t)},umpRecordingDate:function(n,t){return P.umpCustomText(n,0,1,1,11,t)},umpRecordingLocation:function(n,t){return P.umpCustomText(n,0,1,1,12,t)},umpText:function(n,t){return P.umpCustomText(n,0,1,2,0,t)},umpLyrics:function(n,t){return P.umpCustomText(n,0,1,2,1,t)},umpLyricsLanguage:function(n,t){return P.umpCustomText(n,0,1,2,2,t)},umpRuby:function(n,t){return P.umpCustomText(n,0,1,2,3,t)},umpRubyLanguage:function(n,t){return P.umpCustomText(n,0,1,2,4,t)},umpData:function(n,t,e){var i;e===void 0&&(e=t,t=0);var r=ct(ri(e),13);for(i=0;i<r.length;i++)r[i]=[80+F(n),16*ut(r.length,i)+r[i].length,cn(t)].concat(r[i],gn).slice(0,16);return r}},Ut=[0,6,32,38,98,99,100,101],Y={umpNoteOn:function(n,t,e,i,r,o){return i===void 0&&(i=65535),r=r||0,o=o||0,i=Sn(i),o=Sn(o),[64+F(n),144+p(t),N(e),cn(r),i>>8,255&i,o>>8,255&o]},umpNoteOff:function(n,t,e,i,r,o){return r=r||0,o=o||0,i=Sn(i=i||0),o=Sn(o),[64+F(n),128+p(t),N(e),cn(r),i>>8,255&i,o>>8,255&o]},umpAftertouch:function(n,t,e,i,r,o,u){return[64+F(n),160+p(t),N(e),0].concat(_n(i,r,o,u))},umpAftertouchF:function(n,t,e,i){return Y.umpAftertouch(n,t,e,Yn(i))},umpControl:function(n,t,e,i,r,o,u){return Ut.includes(e)&&vn(e),[64+F(n),176+p(t),g(e),0].concat(_n(i,r,o,u))},umpPortamento:function(n,t,e){return[64+F(n),176+p(t),84,0,N(e),0,0,0]},umpPressure:function(n,t,e,i,r,o){return[64+F(n),208+p(t),0,0].concat(_n(e,i,r,o))},umpPressureF:function(n,t,e){return Y.umpPressure(n,t,Yn(e))},umpProgram:function(n,t,e,i,r){return i===void 0&&r===void 0?[64+F(n),192+p(t),0,0,N(e),0,0,0]:r===void 0?[64+F(n),192+p(t),0,1,N(e),0,Q(i),J(i)]:[64+F(n),192+p(t),0,1,N(e),0,g(i),g(r)]},umpPitchBend:function(n,t,e,i,r,o){return[64+F(n),224+p(t),0,0].concat(_n(e,i,r,o))},umpPitchBendF:function(n,t,e){return Y.umpPitchBend(n,t,Yn((e+1)/2))},umpPnPitchBend:function(n,t,e,i,r,o,u){return[64+F(n),96+p(t),N(e),0].concat(_n(i,r,o,u))},umpPnPitchBendF:function(n,t,e,i){return Y.umpPnPitchBend(n,t,e,Yn((i+1)/2))},umpRPN:function(n,t,e,i,r,o,u,l){return[64+F(n),32+p(t),g(e),g(i)].concat(_n(r,o,u,l))},umpNRPN:function(n,t,e,i,r,o,u,l){return[64+F(n),48+p(t),g(e),g(i)].concat(_n(r,o,u,l))},umpPnRPN:function(n,t,e,i,r,o,u,l){return[64+F(n),0+p(t),N(e),cn(i)].concat(_n(r,o,u,l))},umpPnNRPN:function(n,t,e,i,r,o,u,l){return[64+F(n),16+p(t),N(e),cn(i)].concat(_n(r,o,u,l))},umpFineTuning:function(n,t,e,i,r,o){return Y.umpRPN(n,t,0,1,e,i,r,o)},umpFineTuningF:function(n,t,e){return Y.umpFineTuning(n,t,h.to32b(qn((e%1+1)/2,e)))},umpCoarseTuning:function(n,t,e){return[64+F(n),32+p(t),0,2,2*g(e),0,0,0]},umpCoarseTuningF:function(n,t,e){return Y.umpCoarseTuning(n,t,e-e%1+64)},umpTuningProgram:function(n,t,e){return[64+F(n),32+p(t),0,3,2*g(e),0,0,0]},umpTuningBank:function(n,t,e){return[64+F(n),32+p(t),0,4,2*g(e),0,0,0]},umpPnManagement:function(n,t,e,i){for(var r=i.toString().split(""),o=0,u=0;u<r.length;u++)if(r[u]!="S"||1&o){if(r[u]!="D"||2&o){o=i;break}o|=2}else o|=1;return[64+F(n),240+p(t),N(e),cn(o),0,0,0,0]}};Y.umpPnPressure=Y.umpAftertouch,Y.umpPnPressureF=Y.umpAftertouchF,Y.umpTranspose=Y.umpCoarseTuningF;var P={umpTuningF:function(n,t,e){return[Y.umpCoarseTuningF(n,t,e),Y.umpFineTuningF(n,t,e)]},umpTuningA:function(n,t,e){return P.umpTuningF(n,t,h.shift(e))},umpCustomText:function(n,t,e,i,r,o){var u,l=[];for(o=d.lib.toUTF8(""+o),u=0;u<o.length;u++)l.push(o.charCodeAt(u));for(l=ct(l,12),u=0;u<l.length;u++)l[u]=[208+F(n),64*ut(l.length,u)+(e?16:0)+p(t),i,r].concat(l[u],gn).slice(0,16);return l},umpCMetadata:function(n,t,e){return P.umpCustomText(n,t,0,1,0,e)},umpCProjectName:function(n,t,e){return P.umpCustomText(n,t,0,1,1,e)},umpCCompositionName:function(n,t,e){return P.umpCustomText(n,t,0,1,2,e)},umpCClipName:function(n,t,e){return P.umpCustomText(n,t,0,1,3,e)},umpCCopyright:function(n,t,e){return P.umpCustomText(n,t,0,1,4,e)},umpCComposerName:function(n,t,e){return P.umpCustomText(n,t,0,1,5,e)},umpCLyricistName:function(n,t,e){return P.umpCustomText(n,t,0,1,6,e)},umpCArrangerName:function(n,t,e){return P.umpCustomText(n,t,0,1,7,e)},umpCPublisherName:function(n,t,e){return P.umpCustomText(n,t,0,1,8,e)},umpCPerformerName:function(n,t,e){return P.umpCustomText(n,t,0,1,9,e)},umpCAccPerformerName:function(n,t,e){return P.umpCustomText(n,t,0,1,10,e)},umpCRecordingDate:function(n,t,e){return P.umpCustomText(n,t,0,1,11,e)},umpCRecordingLocation:function(n,t,e){return P.umpCustomText(n,t,0,1,12,e)},umpCText:function(n,t,e){return P.umpCustomText(n,t,0,2,0,e)},umpCLyrics:function(n,t,e){return P.umpCustomText(n,t,0,2,1,e)},umpCLyricsLanguage:function(n,t,e){return P.umpCustomText(n,t,0,2,2,e)},umpCRuby:function(n,t,e){return P.umpCustomText(n,t,0,2,3,e)},umpCRubyLanguage:function(n,t,e){return P.umpCustomText(n,t,0,2,4,e)}},ln={};function $e(n,t){_[n]=function(){return new _(t.apply(this,arguments))},ln[n]=function(){return this.send(t.apply(this,arguments))}}function ni(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),new _(t.apply(this,e))},ln[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),this.send(t.apply(this,e))}}function ti(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e));for(var i=t.apply(this,e),r=0;r<i.length;r++)i[r]=new _(i[r]);return i},ln[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e));for(var i=t.apply(this,e),r=0;r<i.length;r++)this.send(i[r]);return this}}function ei(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),this._ch!==void 0&&(e=[e[0]].concat([this._ch]).concat(e.slice(1))),new _(t.apply(this,e))},ln[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),this._ch!==void 0&&(e=[e[0]].concat([this._ch]).concat(e.slice(1))),this.send(t.apply(this,e))}}function ii(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e)),this._ch!==void 0&&(e=[e[0]].concat([this._ch]).concat(e.slice(1)));for(var i=t.apply(this,e),r=0;r<i.length;r++)i[r]=new _(i[r]);return i},ln[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e)),this._ch!==void 0&&(e=[e[0]].concat([this._ch]).concat(e.slice(1)));for(var i=t.apply(this,e),r=0;r<i.length;r++)this.send(i[r]);return this}}function ut(n,t){return n==1?0:t==0?1:t==n-1?3:2}function ct(n,t){for(var e=[],i=n;i.length;i=i.slice(t))e.push(i.slice(0,t));return e.length?e:[[]]}function Ln(n,t){for(var e=ct(t.slice(1,t.length-1),6),i=0;i<e.length;i++)e[i]=new _([48+n,16*ut(e.length,i)+e[i].length].concat(e[i],gn).slice(0,8));return e}function ri(n){var t,e=[];if(typeof n=="string")for(t=0;t<n.length;t++)e.push(n.charCodeAt(t));else for(t=0;t<n.length;t++)e.push(n[t]);for(t=0;t<e.length;t++)if(e[t]!=parseInt(e[t])||e[t]<0||e[t]>255)throw RangeError("Bad data");return e}function oi(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),Ln(F(e[0]),t.apply(this,e.slice(1)))},ln[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e));for(var i=Ln(F(e[0]),t.apply(this,e.slice(1))),r=this,o=0;o<i.length;o++)r=r.send(i[o]);return r}}function si(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e));for(var i=t.apply(this,e.slice(1)),r=[],o=0;o<i.length;o++)r=r.concat(Ln(F(e[0]),i[o]));return r},ln[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e));for(var i=t.apply(this,e.slice(1)),r=this,o=0;o<i.length;o++)for(var u=Ln(F(e[0]),i[o]),l=0;l<u.length;l++)r=r.send(u[l]);return r}}function ai(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),new _([16+F(e[0])].concat(t.apply(this,e.slice(1)),gn).slice(0,4))},ln[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),this.send([16+F(e[0])].concat(t.apply(this,e.slice(1)),gn).slice(0,4))}}function Wt(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),this._ch!==void 0&&(e=[e[0]].concat([this._ch]).concat(e.slice(1))),new _([32+F(e[0])].concat(t.apply(this,e.slice(1)),gn).slice(0,4))},ln[n]=function(){var e=Array.prototype.slice.call(arguments);return this._gr!==void 0&&(e=[this._gr].concat(e)),this._ch!==void 0&&(e=[e[0]].concat([this._ch]).concat(e.slice(1))),this.send([32+F(e[0])].concat(t.apply(this,e.slice(1)),gn).slice(0,4))}}function ui(n,t){_[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e)),this._ch!==void 0&&(e=[e[0]].concat([this._ch]).concat(e.slice(1)));for(var i=t.apply(this,e.slice(1)),r=0;r<i.length;r++)i[r]=new _([32+F(e[0])].concat(i[r],gn).slice(0,4));return i},ln[n]=function(){var e=Array.prototype.slice.call(arguments);this._gr!==void 0&&(e=[this._gr].concat(e)),this._ch!==void 0&&(e=[e[0]].concat([this._ch]).concat(e.slice(1)));for(var i=t.apply(this,e.slice(1)),r=this,o=0;o<i.length;o++)r=r.send([32+F(e[0])].concat(i[o],gn).slice(0,4));return r}}function ht(n){q(ln,function(t){n.prototype[t]=ln[t]})}function ci(n,t){var e=256*n+t;return e?e>>9||1:0}function lt(n,t,e,i){return 16777216*n+65536*t+256*e+i>>25&127}function sn(n,t){return n.gr=t,n}function hi(n){if(n.isMidi2){var t,e,i,r=n[0]>>4,o=15&n[0];if(r==1||r==2)this._emit(sn(new h(n.slice(1)),o));else if(r==3)e=n[1]>>4,t=15&n[1],e==0?(this._emit(sn(new h([240].concat(n.slice(2,2+t),[247])),o)),this._sx[o]=void 0):e==1?this._sx[o]=n.slice(2,2+t):e==2?this._sx[o]&&(this._sx[o]=this._sx[o].concat(n.slice(2,2+t))):e==3&&(this._sx[o]&&this._emit(sn(new h([240].concat(this._sx[o],n.slice(2,2+t),[247])),o)),this._sx[o]=void 0);else if(r==4){if(t=n[1]>>4,e=15&n[1],t==2||t==3?(this._emit(sn(new h([176+e,t==2?101:99,n[2]]),o)),this._emit(sn(new h([176+e,t==2?100:98,n[3]]),o)),this._emit(sn(new h([176+e,6,n[4]>>1]),o)),this._emit(sn(new h([176+e,38,64*(1&n[4])+(n[4]>>2)]),o))):t!=8&&t!=9||this._emit(sn(new h([n[1],n[2],ci(n[4],n[5])]),o)),t==10&&this._emit(sn(new h([n[1],n[2],lt(n[4],n[5],n[6],n[7])]),o)),t==11){if(Ut.includes(n[2]))return;this._emit(sn(new h([n[1],n[2],lt(n[4],n[5],n[6],n[7])]),o))}t==13&&this._emit(sn(new h([n[1],lt(n[4],n[5],n[6],n[7])]),o)),t==14?(i=16777216*n[4]+65536*n[5]+256*n[6]+n[4]>>18,this._emit(sn(new h([n[1],127&i,i>>7&127]),o))):t==12&&(n[3]&&(this._emit(sn(new h([176+e,0,n[6]]),o)),this._emit(sn(new h([176+e,32,n[7]]),o))),this._emit(sn(new h([n[1],n[4]]),o)))}}else this._emit(n)}function li(){var n=new D;return n._sx=[],n._receive=hi,n._resume(),n.MIDI2()}function fi(n){if(n.isMidi2)this._emit(n);else{var t=n.gr>=0&&n.gr<=15?n.gr:0;if(n[0]>=128&&n[0]<240)this._emit(d.MIDI2([32+t].concat(n.slice(),gn).slice(0,4)));else if(n[0]>240&&n[0]<=255&&n[0]!=247)this._emit(d.MIDI2([16+t].concat(n.slice(),gn).slice(0,4)));else if(n.isFullSysEx())for(var e=Ln(t,n.slice()),i=0;i<e.length;i++)this._emit(d.MIDI2(e[i]))}}function di(){var n=new D;return n._receive=fi,n._resume(),n}q(Kt,function(n){$e(n,Kt[n])}),q(at,function(n){ni(n,at[n])}),q(Ht,function(n){ti(n,Ht[n])}),q(Y,function(n){ei(n,Y[n])}),q(P,function(n){ii(n,P[n])}),q(jn,function(n){ai(n,jn[n])}),q(Wn,function(n){Wt(n,Wn[n])}),q(w,function(n){Wt(n,w[n])}),q(I,function(n){ui(n,I[n])}),q(S,function(n){oi(n,S[n])}),q(Dn,function(n){si(n,Dn[n])}),ht(on),_.prototype.getTempo=function(){if(this.isTempo())return(this[4]<<24)+(this[5]<<16)+(this[6]<<8)+this[7]},_.prototype.getBPM=function(){var n=this.getTempo();if(n)return Math.round(6e9/n)},_.prototype.getTimeSignature=function(){if(this.isTimeSignature())return[this[4],1<<this[5]]},_.prototype.getTicksPQN=function(){if(this.isTicksPQN())return(this[2]<<8)+this[3]},_.prototype.getDelta=function(){if(this.isDelta())return((15&this[1])<<16)+(this[2]<<8)+this[3]},_.prototype.getStatus=function(){return this.isFlex()?this[1]>>6:this.isData()||this.isSX()?this[1]>>4:void 0},_.prototype.isTempo=function(){return this[0]>>4==13&&this[1]>>4==1&&this[2]==0&&this[3]==0},_.prototype.isTimeSignature=function(){return this[0]>>4==13&&this[1]>>4==1&&this[2]==0&&this[3]==1},_.prototype.isTicksPQN=function(){return this[0]==0&&this[1]>>4==3},_.prototype.isDelta=function(){return this[0]==0&&this[1]>>4==4},_.prototype.isStartClip=function(){return this.match([240,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},_.prototype.isEndClip=function(){return this.match([240,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},_.prototype.isData=function(){return(240&this[0])==80},_.prototype.isFlex=function(){return(240&this[0])==208},_.prototype.isText=function(){return(240&this[0])==208&&(this[2]==1||this[2]==2)},_.prototype.isSX=function(){return(240&this[0])==48},_.prototype.isNoteOn=function(){var n=(this[0]||0)>>4,t=(this[1]||0)>>4;return n==4?t==9:n==2&&t==9&&!!this[3]},_.prototype.isNoteOff=function(){var n=(this[0]||0)>>4,t=(this[1]||0)>>4;return n==4?t==8:n==2&&(t==8||t==9&&!this[3])},_.prototype.label=h.prototype.label,_.prototype.toString=h.prototype.toString,_.prototype._str=function(){var n=this._string();return n?Lt(this)+" -- "+n:Lt(this)},_.prototype._string=function(){var n,t,e,i=this[0]>>4;return i==1||i==2?new h(this.slice(1))._string():(i==0?t=["NOOP","JR Clock","JR Timestamp","Ticks Per Quarter Note","Delta Ticks"][n=this[1]>>4]:i==3?t="SysEx":i==4?(t={0:"Registered Per-Note Controller",1:"Assignable Per-Note Controller",2:"Registered Controller",3:"Assignable Controller",4:"Relative Registered Controller",5:"Relative Assignable Controller",6:"Per-Note Pitch Bend",8:"Note Off",9:"Note On",10:"Poly Pressure",11:"Control Change",12:"Program Change",13:"Channel Pressure",14:"Pitch Bend",15:"Per-Note Management"}[n=this[1]>>4],n==11&&(t={84:"Portamento"}[this[2]]||t),n==2&&(e={"0000":"Pitch Bend Sensitivity","0001":"Fine Tuning","0002":"Coarse Tuning","0003":"Select Tuning Program","0004":"Select Tuning Bank","0005":"Vibrato Depth Range","7f7f":"NONE"}[hn(this[2])+""+hn(this[3])])&&(t+=": "+e)):i==5?t="Data":i==13&&((n=this[2])==0?(t={0:"Tempo ",1:"Time Signature ",2:"Metronome",5:"Key Signature",6:"Chord Name"}[n=this[3]],n==0?t+=this.getBPM()+" BPM":n==1&&(t+=this.getTimeSignature().join("/"))):n==1?t={0:"Metadata",1:"Project Name",2:"Composition Name",3:"Clip Name",4:"Copyright",5:"Composer Name",6:"Lyricist Name",7:"Arranger Name",8:"Publisher Name",9:"Primary Performer Name",10:"Accompanying Performer Name",11:"Recording Date",12:"Recording Location"}[n=this[3]]||"Unknown Text":n==2&&(t={0:"Text",1:"Lyrics",2:"Lyrics Language",3:"Ruby",4:"Ruby Language"}[n=this[3]]||"Unknown Text")),i==15&&(t={32:"Start of Clip",33:"End of Clip"}[this[1]]),t)},_.prototype._stamp=h.prototype._stamp,_.prototype._unstamp=h.prototype._unstamp,_.prototype._stamped=h.prototype._stamped,_.prototype.match=h.prototype.match,d.UMP=_,k.prototype.UMP=_,d.MIDI2=_,k.prototype.MIDI2=_,d.M2M1=li,k.prototype.M2M1=d.M2M1,d.M1M2=di,k.prototype.M1M2=d.M1M2,d.lib={},d.lib.now=rn,d.lib.schedule=C,d.lib.R=c;var Gn,an,ft=[],jt=0;try{var pi=URL.createObjectURL(new Blob(["(",(function(){function n(){postMessage({}),setTimeout(n,0)}n()}).toString(),")()"],{type:"application/javascript"})),gi=function(){for(var n=ft.length,t=0;t<n;t++)ft.shift()();++jt>20&&Gn&&(Gn.terminate(),Gn=void 0)},Xt=function(n){ft.push(n),jt=0,Gn||((Gn=new Worker(pi)).onmessage=gi)};Xt(function(){d.lib.schedule=Xt})}catch{}function mi(){if(!an&&typeof window<"u"){var n=window.AudioContext||window.webkitAudioContext;if(n){(an=new n)&&!an.createGain&&(an.createGain=an.createGainNode);var t=function(){if(an.state!="running"){an.resume();var e=an.createOscillator(),i=an.createGain();try{i.gain.value=0}catch{}i.gain.setTargetAtTime(0,an.currentTime,.01),e.connect(i),i.connect(an.destination),e.start||(e.start=e.noteOn),e.stop||(e.stop=e.noteOff),e.start(.1),e.stop(.11)}else typeof document<"u"&&(document.removeEventListener("touchstart",t),document.removeEventListener("touchend",t),document.removeEventListener("mousedown",t),document.removeEventListener("keydown",t))};typeof document<"u"&&(document.addEventListener("touchstart",t),document.addEventListener("touchend",t),document.addEventListener("mousedown",t),document.addEventListener("keydown",t)),t()}}}d.lib.openMidiOut=function(n,t){var e=new D;return t._openOut(e),e._info=t._info(n),e},d.lib.openMidiIn=function(n,t){var e=new D;return t._openIn(e),e._info=t._info(n),e},d.lib.registerMidiOut=function(n,t){for(var e=t._info(n),i=0;i<nn._outs.length;i++)if(nn._outs[i].name==e.name)return!1;return e.engine=t,nn._outs.push(e),x&&(Mn(),x._bad&&(x._repair(),x._resume())),!0},d.lib.registerMidiIn=function(n,t){for(var e=t._info(n),i=0;i<nn._ins.length;i++)if(nn._ins[i].name==e.name)return!1;return e.engine=t,nn._ins.push(e),x&&(Mn(),x._bad&&(x._repair(),x._resume())),!0},d.lib.unregisterMidiOut=function(n){for(var t=0;t<nn._outs.length;t++)if(nn._outs[t].name==n)return nn._outs.splice(t,t+1),x&&Mn(),!0;return!1},d.lib.unregisterMidiIn=function(n){for(var t=0;t<nn._ins.length;t++)if(nn._ins[t].name==n)return nn._ins.splice(t,t+1),x&&Mn(),!0;return!1},d.lib.plug=function(n){for(var t=0;t<mn.length;t++)if(mn[t]==n)return;mn.push(n)},d.lib.unplug=function(n){for(var t=0;t<mn.length;t++)if(mn[t]==n)return void mn.splice(t,1)},d.lib.copyMidiHelpers=qt,d.lib.copyMidi2Helpers=ht,d.lib.copyUmpHelpers=ht,d.lib.getAudioContext=function(){return mi(),an},d.lib.closeAudioContext=function(){an&&an.close(),an=void 0};var Pn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d.lib.fromBase64=function(n){var t,e,i,r,o,u,l="",m=0;for(n=n.replace(/[^A-Za-z0-9+/=]/g,"");m<n.length;)t=Pn.indexOf(n.charAt(m++))<<2|(r=Pn.indexOf(n.charAt(m++)))>>4,e=(15&r)<<4|(o=Pn.indexOf(n.charAt(m++)))>>2,i=(3&o)<<6|(u=Pn.indexOf(n.charAt(m++))),l+=String.fromCharCode(t),o!=64&&(l+=String.fromCharCode(e)),u!=64&&(l+=String.fromCharCode(i));return l},d.lib.toBase64=function(n){var t,e,i,r,o,u=0,l=0,m="",y=[];if(!n)return n;do t=(o=n.charCodeAt(u++)<<16|n.charCodeAt(u++)<<8|n.charCodeAt(u++))>>18&63,e=o>>12&63,i=o>>6&63,r=63&o,y[l++]=Pn.charAt(t)+Pn.charAt(e)+Pn.charAt(i)+Pn.charAt(r);while(u<n.length);m=y.join("");var H=n.length%3;return H?m.slice(0,H-3)+"===".slice(H):m},d.lib.fromUTF8=function(n){n=n===void 0?"":""+n;var t,e,i,r="";for(t=0;t<n.length;t++){if((e=n.charCodeAt(t))>255)return n;if(e<128)r+=n[t];else if((224&e)==192){if(e=(31&e)<<6,++t>=n.length||(192&(i=n.charCodeAt(t)))!=128)return n;e+=63&i,r+=String.fromCharCode(e)}else if((240&e)==224){if(e=(15&e)<<12,++t>=n.length||(192&(i=n.charCodeAt(t)))!=128||(e+=(63&i)<<6,++t>=n.length)||(192&(i=n.charCodeAt(t)))!=128)return n;e+=63&i,r+=String.fromCharCode(e)}else if((248&e)==240){if(e=(7&e)<<18,++t>=n.length||(192&(i=n.charCodeAt(t)))!=128||(e+=(63&i)<<12,++t>=n.length)||(192&(i=n.charCodeAt(t)))!=128||(e+=(63&i)<<6,++t>=n.length)||(192&(i=n.charCodeAt(t)))!=128||(e+=63&i)>1114111)return n;e-=65536,r+=String.fromCharCode(55296+(e>>10)),r+=String.fromCharCode(56320+(1023&e))}}return r},d.lib.toUTF8=function(n){n=n===void 0?"":""+n;var t,e,i="";for(t=0;t<n.length;t++)(e=n.charCodeAt(t))<128?i+=n[t]:e<2048?(i+=String.fromCharCode(192+(e>>6)),i+=String.fromCharCode(128+(63&e))):e<65536?(i+=String.fromCharCode(224+(e>>12)),i+=String.fromCharCode(128+(e>>6&63)),i+=String.fromCharCode(128+(63&e))):(i+=String.fromCharCode(240+(e>>18)),i+=String.fromCharCode(128+(e>>12&63)),i+=String.fromCharCode(128+(e>>6&63)),i+=String.fromCharCode(128+(63&e)));return i};var en=[],fn={},dn={},bn=$.Promise;function Vn(n,t,e){this.name=n,this.message=t,this.code=e}function Jt(n,t){this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=t,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.port=n,this.returnValue=!0,this.srcElement=t,this.target=t,this.timeStamp=rn(),this.type="statechange"}function vi(n,t){this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=n,this.data=t,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.receivedTime=rn(),this.returnValue=!0,this.srcElement=n,this.target=n,this.timeStamp=this.receivedTime,this.type="midimessage"}function yn(n,t){n&&(n.onstatechange&&n.onstatechange(new Jt(n,n)),t.onstatechange&&t.onstatechange(new Jt(n,t)))}function _i(n,t){var e=this,i=!1,r=null,o=null;this.type="input",this.id=t.id,this.name=t.name,this.manufacturer=t.man,this.version=t.ver,Object.defineProperty(this,"state",{get:function(){return t.connected?"connected":"disconnected"},enumerable:!0}),Object.defineProperty(this,"connection",{get:function(){return i?t.proxy?"open":"pending":"closed"},enumerable:!0}),Object.defineProperty(this,"onmidimessage",{get:function(){return o},set:function(u){s(u)?(o=u,i||e.open().then(B,B)):o=null},enumerable:!0}),Object.defineProperty(this,"onstatechange",{get:function(){return r},set:function(u){r=s(u)?u:null},enumerable:!0}),this.open=function(){return new bn(function(u,l){i?u(e):t.open().then(function(){i||(i=!0,yn(e,n)),u(e)},function(){l(new Vn("InvalidAccessError","Port is not available",15))})})},this.close=function(){return new bn(function(u){i&&(i=!1,t.close(),yn(e,n)),u(e)})},Object.freeze(this)}function Qt(n){for(var t,e;n.length;){for(t=0;t<n.length&&!(n[t]==parseInt(n[t])&&n[t]>=128&&n[t]<=255&&n[t]!=247);t++);if(n.splice(0,t),!n.length)return;if(n[0]==240){for(t=1;t<n.length&&n[t]!=247;t++);return t==n.length?void 0:n.splice(0,t+1)}if((e=Zt(n[0])+1)>n.length)return;for(t=1;t<e&&!(n[t]!=parseInt(n[t])||n[t]<0||n[t]>=128);t++);if(t==e)return n.splice(0,t);n.splice(0,t)}}function Fn(n,t,e,i){var r=this;this.id=n,this.name=t,this.man=e,this.ver=i,this.connected=!0,this.ports=[],this.pending=[],this.proxy=void 0,this.queue=[],this.onmidi=function(o){var u;for(r.queue=r.queue.concat(o.slice()),u=Qt(r.queue);u;u=Qt(r.queue))for(un=0;un<r.ports.length;un++)r.ports[un][0].onmidimessage&&(u[0]!=240||r.ports[un][1])&&r.ports[un][0].onmidimessage(new vi(r,new Uint8Array(u)))}}function Zt(n){return n>=128&&n<=191||n>=224&&n<=239||n==242?2:n>=192&&n<=223||n==241||n==243?1:0}typeof bn!="function"&&((bn=function(n){this.executor=n}).prototype.then=function(n,t){typeof n!="function"&&(n=B),typeof t!="function"&&(t=B),this.executor(n,t)}),Fn.prototype.open=function(){var n=this;return new bn(function(t,e){var i;n.proxy||!n.connected?t():(n.pending.push([t,e]),n.pending.length==1&&d().openMidiIn(n.name).or(function(){for(i=0;i<n.pending.length;i++)n.pending[i][1]();n.pending=[]}).and(function(){for(n.proxy=this,n.proxy.connect(n.onmidi),i=0;i<n.pending.length;i++)n.pending[i][0]();n.pending=[]}))})},Fn.prototype.close=function(){var n;if(this.proxy){for(n=0;n<this.ports.length;n++)if(this.ports[n].connection=="open")return;this.proxy.close(),this.proxy=void 0}},Fn.prototype.disconnect=function(){this.connected=!1,this.proxy&&(this.proxy.close(),this.proxy=void 0)},Fn.prototype.reconnect=function(){var n,t,e=this,i=[];for(this.connected=!0,n=0;n<en.length;n++)(t=en[n].inputs.get(this.id)).connection=="closed"?yn(t,en[n]):i.push([t,en[n]]);i.length&&d()._openMidiInNR(e.name).or(function(){for(n=0;n<i.length;n++)i[n][0].close()}).and(function(){for(e.proxy=this,e.proxy.connect(e.onmidi),n=0;n<i.length;n++)yn(i[n][0],i[n][1])})};var Rn="Failed to execute 'send' on 'MIDIOutput': ";function yi(n,t){var e,i,r,o=[];for(e=0;e<n.length;e++)if(n[e]!=parseInt(n[e])||n[e]<0||n[e]>255)throw TypeError(Rn+n[e]+" is not a UInt8 value.");for(i=0,e=0;e<n.length;e++)if(i){if(n[e]>127)throw TypeError(Rn+"Unexpected status byte at index "+e+" ("+n[e]+").");r.push(n[e]),i--}else{if(n[e]<128)throw TypeError(Rn+"Running status is not allowed at index "+e+" ("+n[e]+").");if(n[e]==247)throw TypeError(Rn+"Unexpected end of system exclusive message at index "+e+" ("+n[e]+").");if(r=[n[e]],o.push(r),n[e]==240){if(!t)throw new Vn("InvalidAccessError",Rn+"System exclusive messag is not allowed at index "+e+" ("+n[e]+").",15);for(i=-1;e<n.length;e++)if(r.push(n[e]),n[e]==247){i=0;break}}else i=Zt(n[e])}if(i)throw TypeError(Rn+"Message is incomplete");return[o]}function wi(n,t){var e=this,i=!1,r=null;this.type="output",this.id=t.id,this.name=t.name,this.manufacturer=t.man,this.version=t.ver,Object.defineProperty(this,"state",{get:function(){return t.connected?"connected":"disconnected"},enumerable:!0}),Object.defineProperty(this,"connection",{get:function(){return i?t.proxy?"open":"pending":"closed"},enumerable:!0}),Object.defineProperty(this,"onstatechange",{get:function(){return r},set:function(o){r=s(o)?o:null},enumerable:!0}),this.open=function(){return new bn(function(o,u){i?o(e):t.open().then(function(){i||(i=!0,yn(e,n)),o(e)},function(){u(new Vn("InvalidAccessError","Port is not available",15))})})},this.close=function(){return new bn(function(o){i&&(i=!1,e.clear(),t.close(),yn(e,n)),o(e)})},this.clear=function(){},this.send=function(o,u){if(yi(o,n.sysexEnabled),!t.connected)throw new Vn("InvalidStateError","Port is not connected",11);if(i){var l=rn();u>l?setTimeout(function(){t.proxy.send(o)},u-l):t.proxy.send(o)}else this.open().then(function(){e.send(o,u)},B)},Object.freeze(this)}function On(n,t,e,i){this.id=n,this.name=t,this.man=e,this.ver=i,this.connected=!0,this.ports=[],this.pending=[],this.proxy=void 0}function Yt(n){this.has=function(t){return n.hasOwnProperty(t)&&n[t].connected},this.keys=function(){try{var t=new Map;for(var e in n)this.has(e)&&t.set(e,this.get(e));return t.keys()}catch{}},this.values=function(){try{var t=new Map;for(var e in n)this.has(e)&&t.set(e,this.get(e));return t.values()}catch{}},this.entries=function(){try{var t=new Map;for(var e in n)this.has(e)&&t.set(e,this.get(e));return t.entries()}catch{}},this.forEach=function(t,e){for(var i in e===void 0&&(e=this),n)this.has(i)&&t.call(e,this.get(i),i,this)},Object.defineProperty(this,"size",{get:function(){var t=0;for(var e in n)this.has(e)&&t++;return t},enumerable:!0})}function $n(n,t){this.get=function(e){if(dn.hasOwnProperty(e)&&dn[e].connected)return t[e]||(t[e]=new _i(n,dn[e]),dn[e].ports.push([t[e],n.sysexEnabled])),t[e]},Object.freeze(this)}function nt(n,t){this.get=function(e){if(fn.hasOwnProperty(e)&&fn[e].connected)return t[e]||(t[e]=new wi(n,fn[e]),fn[e].ports.push([t[e],n.sysexEnabled])),t[e]},Object.freeze(this)}function Si(n){var t,e,i,r;for(t=0;t<n.inputs.added.length;t++)i=n.inputs.added[t],dn.hasOwnProperty(i.id)||(dn[i.id]=new Fn(i.id,i.name,i.manufacturer,i.version)),dn[i.id].reconnect();for(t=0;t<n.outputs.added.length;t++)i=n.outputs.added[t],fn.hasOwnProperty(i.id)||(fn[i.id]=new On(i.id,i.name,i.manufacturer,i.version)),fn[i.id].reconnect();for(t=0;t<n.inputs.removed.length;t++)if(i=n.inputs.removed[t],dn.hasOwnProperty(i.id)){for(r=[],e=0;e<en.length;e++)r.push([en[e].inputs.get(i.id),en[e]]);for(dn[i.id].disconnect(),e=0;e<r.length;e++)yn(r[e][0],r[e][1])}for(t=0;t<n.outputs.removed.length;t++)if(i=n.outputs.removed[t],fn.hasOwnProperty(i.id)){for(r=[],e=0;e<en.length;e++)r.push([en[e].outputs.get(i.id),en[e]]);for(fn[i.id].disconnect(),e=0;e<r.length;e++)yn(r[e][0],r[e][1])}}function bi(n){var t,e,i={},r={},o=null,u=this;this.sysexEnabled=n,this.inputs=new $n(u,i),this.outputs=new nt(u,r),Object.defineProperty(this,"onstatechange",{get:function(){return o},set:function(m){o=s(m)?m:null},enumerable:!0}),Object.freeze(this);var l=x._info;for(t=0;t<l.inputs.length;t++)e=l.inputs[t],dn.hasOwnProperty(e.id)||(dn[e.id]=new Fn(e.id,e.name,e.manufacturer,e.version));for(t=0;t<l.outputs.length;t++)e=l.outputs[t],fn.hasOwnProperty(e.id)||(fn[e.id]=new On(e.id,e.name,e.manufacturer,e.version));en.length||d().onChange(Si),en.push(this)}return On.prototype.open=function(){var n=this;return new bn(function(t,e){var i;n.proxy||!n.connected?t():(n.pending.push([t,e]),n.pending.length==1&&d().openMidiOut(n.name).or(function(){for(i=0;i<n.pending.length;i++)n.pending[i][1]();n.pending=[]}).and(function(){for(n.proxy=this,i=0;i<n.pending.length;i++)n.pending[i][0]();n.pending=[]}))})},On.prototype.close=function(){var n;if(this.proxy){for(n=0;n<this.ports.length;n++)if(this.ports[n].connection=="open")return;this.proxy.close(),this.proxy=void 0}},On.prototype.disconnect=function(){this.connected=!1,this.proxy&&(this.proxy.close(),this.proxy=void 0)},On.prototype.reconnect=function(){var n,t,e=this,i=[];for(this.connected=!0,n=0;n<en.length;n++)(t=en[n].outputs.get(this.id)).connection=="closed"?yn(t,en[n]):i.push([t,en[n]]);i.length&&d()._openMidiOutNR(e.name).or(function(){for(n=0;n<i.length;n++)i[n][0].close()}).and(function(){for(e.proxy=this,n=0;n<i.length;n++)yn(i[n][0],i[n][1])})},$n.prototype=new Yt(dn),$n.prototype.constructor=$n,nt.prototype=new Yt(fn),nt.prototype.constructor=nt,d.requestMIDIAccess=function(n){return new bn(function(t,e){d.JZZ(n).or(function(){}).and(function(){var i=!(!n||!n.sysex);if(i&&!this.info().sysex)e(new Vn("SecurityError","Sysex is not allowed",18));else{var r=new bi(i);t(r)}})})},typeof navigator>"u"||navigator.requestMIDIAccess||(navigator.requestMIDIAccess=d.requestMIDIAccess),d.close=function(){a._close&&a._close()},d}()),ne.exports);const Bi=Ci(xi);var ee,ie={exports:{}},re,Di=(ee||(ee=1,function(un){var j;j=function(U){if(U&&(U.synth||(U.synth={}),!U.synth.Tiny)){var K,A="1.4.2",$={},R={_info:function(C){return C||(C="JZZ.synth.Tiny"),{type:"Web Audio",name:C,manufacturer:"virtual",version:A}},_openOut:function(C,B){var s;rn(),K?(B!==void 0?($[B=""+B]||($[B]=new wn),s=$[B]):s=new wn,s.setAudioContext(K),C.plug=function(c){c&&(c.context instanceof AudioContext||c.context instanceof webkitAudioContext)&&s.setAudioContext(c.context,c)},C.setSynth=function(c,f,b){s.setTimbre(!!b,c,L(f))},C.getSynth=function(c,f){return L(f?s.drummap[c-35]:s.program[c])},C._info=R._info(B),C._receive=function(c){s.send(c)},C._resume()):C._crash("AudioContext not supported")}};U.synth.Tiny=function(C){return U.lib.openMidiOut(C,R)},U.synth.Tiny.register=function(C){return!!rn()&&U.lib.registerMidiOut(C,R)},U.synth.Tiny.version=function(){return A}}function wn(C){for(var B in this.__proto__=this.sy={is:"webaudio-tinysynth",properties:{masterVol:{type:Number,value:.5,observer:"setMasterVol"},reverbLev:{type:Number,value:.3,observer:"setReverbLev"},quality:{type:Number,value:1,observer:"setQuality"},debug:{type:Number,value:0},src:{type:String,value:null,observer:"loadMIDIUrl"},loop:{type:Number,value:0},tsmode:{type:Number,value:0},voices:{type:Number,value:64},useReverb:{type:Number,value:1}},program:[],drummap:[],program1:[[{w:"sine",v:.4,d:.7,r:.1},{w:"triangle",v:3,d:.7,s:.1,g:1,a:.01,k:-1.2}],[{w:"triangle",v:.4,d:.7,r:.1},{w:"triangle",v:4,t:3,d:.4,s:.1,g:1,k:-1,a:.01}],[{w:"sine",d:.7,r:.1},{w:"triangle",v:4,f:2,d:.5,s:.5,g:1,k:-1}],[{w:"sine",d:.7,v:.2},{w:"triangle",v:4,t:3,f:2,d:.3,g:1,k:-1,a:.01,s:.5}],[{w:"sine",v:.35,d:.7},{w:"sine",v:3,t:7,f:1,d:1,s:1,g:1,k:-.7}],[{w:"sine",v:.35,d:.7},{w:"sine",v:8,t:7,f:1,d:.5,s:1,g:1,k:-.7}],[{w:"sawtooth",v:.34,d:2},{w:"sine",v:8,f:.1,d:2,s:1,r:2,g:1}],[{w:"triangle",v:.34,d:1.5},{w:"square",v:6,f:.1,d:1.5,s:.5,r:2,g:1}],[{w:"sine",d:.3,r:.3},{w:"sine",v:7,t:11,d:.03,g:1}],[{w:"sine",d:.3,r:.3},{w:"sine",v:11,t:6,d:.2,s:.4,g:1}],[{w:"sine",v:.2,d:.3,r:.3},{w:"sine",v:11,t:5,d:.1,s:.4,g:1}],[{w:"sine",v:.2,d:.6,r:.6},{w:"triangle",v:11,t:5,f:1,s:.5,g:1}],[{w:"sine",v:.3,d:.2,r:.2},{w:"sine",v:6,t:5,d:.02,g:1}],[{w:"sine",v:.3,d:.2,r:.2},{w:"sine",v:7,t:11,d:.03,g:1}],[{w:"sine",v:.2,d:1,r:1},{w:"sine",v:11,t:3.5,d:1,r:1,g:1}],[{w:"triangle",v:.2,d:.5,r:.2},{w:"sine",v:6,t:2.5,d:.2,s:.1,r:.2,g:1}],[{w:"w9999",v:.22,s:.9},{w:"w9999",v:.22,t:2,f:2,s:.9}],[{w:"w9999",v:.2,s:1},{w:"sine",v:11,t:6,f:2,s:.1,g:1,h:.006,r:.002,d:.002},{w:"w9999",v:.2,t:2,f:1,h:0,s:1}],[{w:"w9999",v:.2,d:.1,s:.9},{w:"w9999",v:.25,t:4,f:2,s:.5}],[{w:"w9999",v:.3,a:.04,s:.9},{w:"w9999",v:.2,t:8,f:2,a:.04,s:.9}],[{w:"sine",v:.2,a:.02,d:.05,s:1},{w:"sine",v:6,t:3,f:1,a:.02,d:.05,s:1,g:1}],[{w:"triangle",v:.2,a:.02,d:.05,s:.8},{w:"square",v:7,t:3,f:1,d:.05,s:1.5,g:1}],[{w:"square",v:.2,a:.02,d:.2,s:.5},{w:"square",v:1,d:.03,s:2,g:1}],[{w:"square",v:.2,a:.02,d:.1,s:.8},{w:"square",v:1,a:.3,d:.1,s:2,g:1}],[{w:"sine",v:.3,d:.5,f:1},{w:"triangle",v:5,t:3,f:-1,d:1,s:.1,g:1}],[{w:"sine",v:.4,d:.6,f:1},{w:"triangle",v:12,t:3,d:.6,s:.1,g:1,f:-1}],[{w:"triangle",v:.3,d:1,f:1},{w:"triangle",v:6,f:-1,d:.4,s:.5,g:1,t:3}],[{w:"sine",v:.3,d:1,f:-1},{w:"triangle",v:11,f:1,d:.4,s:.5,g:1,t:3}],[{w:"sine",v:.4,d:.1,r:.01},{w:"sine",v:7,g:1}],[{w:"triangle",v:.4,d:1,f:1},{w:"square",v:4,f:-1,d:1,s:.7,g:1}],[{w:"triangle",v:.35,d:1,f:1},{w:"square",v:7,f:-1,d:.3,s:.5,g:1}],[{w:"sine",v:.2,t:1.5,a:.005,h:.2,d:.6},{w:"sine",v:11,t:5,f:2,d:1,s:.5,g:1}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"w9999",d:.3,v:.7,s:.5},{w:"sawtooth",v:1.2,d:.02,s:.5,g:1,h:0,r:.02}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"triangle",v:.3,t:2,d:1},{w:"triangle",v:15,t:2.5,d:.04,s:.1,g:1}],[{w:"triangle",v:.3,t:2,d:1},{w:"triangle",v:15,t:2.5,d:.04,s:.1,g:1}],[{w:"triangle",d:.7},{w:"square",v:.4,t:.5,f:1,d:.2,s:10,g:1}],[{w:"triangle",d:.7},{w:"square",v:.4,t:.5,f:1,d:.2,s:10,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,t:.5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,t:.5,d:11,s:.2,g:1}],[{w:"sine",v:.4,a:.1,d:11},{w:"sine",v:6,f:2.5,d:.05,s:1.1,g:1}],[{w:"sine",v:.3,d:.1,r:.1},{w:"square",v:4,t:3,d:1,s:.2,g:1}],[{w:"sine",v:.3,d:.5,r:.5},{w:"sine",v:7,t:2,f:2,d:1,r:1,g:1}],[{w:"triangle",v:.6,h:.03,d:.3,r:.3,t:.5},{w:"n0",v:8,t:1.5,d:.08,r:.08,g:1}],[{w:"sawtooth",v:.3,a:.03,s:.5},{w:"sawtooth",v:.2,t:2,f:2,d:1,s:2}],[{w:"sawtooth",v:.3,f:-2,a:.03,s:.5},{w:"sawtooth",v:.2,t:2,f:2,d:1,s:2}],[{w:"sawtooth",v:.2,a:.02,s:1},{w:"sawtooth",v:.2,t:2,f:2,a:1,d:1,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1},{w:"sawtooth",v:.2,f:2,a:.02,d:1,s:1}],[{w:"triangle",v:.3,a:.03,s:1},{w:"sine",v:3,t:5,f:1,d:1,s:1,g:1}],[{w:"sine",v:.4,a:.03,s:.9},{w:"sine",v:1,t:2,f:3,d:.03,s:.2,g:1}],[{w:"triangle",v:.6,a:.05,s:.5},{w:"sine",v:1,f:.8,d:.2,s:.2,g:1}],[{w:"square",v:.15,a:.01,d:.2,r:.2,t:.5,h:.03},{w:"square",v:4,f:.5,d:.2,r:11,a:.01,g:1,h:.02},{w:"square",v:.15,t:4,f:1,a:.02,d:.15,r:.15,h:.03},{g:3,w:"square",v:4,f:-.5,a:.01,h:.02,d:.15,r:11}],[{w:"square",v:.2,a:.01,d:1,s:.6,r:.04},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.04,d:1,s:.4,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.15,a:.04,s:1},{w:"sine",v:2,d:.1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6,r:.08},{w:"sine",v:1,f:.2,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:.5,s:.7,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:2,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:2,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"sine",v:.4,a:.02,d:.7,s:.5},{w:"square",v:5,t:2,d:.2,s:.5,g:1}],[{w:"sine",v:.3,a:.05,d:.2,s:.8},{w:"sawtooth",v:6,f:.1,d:.1,s:.3,g:1}],[{w:"sine",v:.3,a:.03,d:.2,s:.4},{w:"square",v:7,f:.2,d:1,s:.1,g:1}],[{w:"square",v:.2,a:.05,d:.1,s:.8},{w:"square",v:4,d:.1,s:1.1,g:1}],[{w:"sine",a:.02,d:2},{w:"sine",v:6,t:2,d:.04,g:1}],[{w:"sine",v:.7,a:.03,d:.4,s:.4},{w:"sine",v:4,t:2,f:.2,d:.4,g:1}],[{w:"sine",v:.7,a:.02,d:.4,s:.6},{w:"sine",v:3,t:2,d:0,s:1,g:1}],[{w:"sine",v:.4,a:.06,d:.3,s:.3},{w:"sine",v:7,t:2,d:.2,s:.2,g:1}],[{w:"sine",a:.02,d:.3,s:.3},{w:"sawtooth",v:3,t:2,d:.3,g:1}],[{w:"sine",v:.4,a:.02,d:2,s:.1},{w:"sawtooth",v:8,t:2,f:1,d:.5,g:1}],[{w:"sine",v:.7,a:.03,d:.5,s:.3},{w:"sine",v:.003,t:0,f:4,d:.1,s:.002,g:1}],[{w:"sine",v:.7,a:.02,d:2},{w:"sine",v:1,t:2,f:1,d:.02,g:1}],[{w:"square",v:.3,d:1,s:.5},{w:"square",v:1,f:.2,d:1,s:.5,g:1}],[{w:"sawtooth",v:.3,d:2,s:.5},{w:"square",v:2,f:.1,s:.5,g:1}],[{w:"triangle",v:.5,a:.05,d:2,s:.6},{w:"sine",v:4,t:2,g:1}],[{w:"triangle",v:.3,a:.01,d:2,s:.3},{w:"sine",v:22,t:2,f:1,d:.03,s:.2,g:1}],[{w:"sawtooth",v:.3,d:1,s:.5},{w:"sine",v:11,t:11,a:.2,d:.05,s:.3,g:1}],[{w:"sine",v:.3,a:.06,d:1,s:.5},{w:"sine",v:7,f:1,d:1,s:.2,g:1}],[{w:"sawtooth",v:.3,a:.03,d:.7,s:.3,r:.2},{w:"sawtooth",v:.3,t:.75,d:.7,a:.1,s:.3,r:.2}],[{w:"triangle",v:.3,a:.01,d:.7,s:.5},{w:"square",v:5,t:.5,d:.7,s:.5,g:1}],[{w:"triangle",v:.3,a:.02,d:.3,s:.3,r:.3},{w:"square",v:3,t:4,f:1,a:.02,d:.1,s:1,g:1},{w:"triangle",v:.08,t:.5,a:.1,h:0,d:.1,s:.5,r:.1,b:0,c:0}],[{w:"sine",v:.3,a:.05,d:1,s:.7,r:.3},{w:"sine",v:2,f:1,d:.3,s:1,g:1}],[{w:"square",v:.3,a:.03,d:.5,s:.3,r:.1},{w:"square",v:4,f:1,a:.03,d:.1,g:1}],[{w:"triangle",v:.3,a:.08,d:1,s:.3,r:.1},{w:"square",v:2,f:1,d:.3,s:.3,g:1,t:4,a:.08}],[{w:"sine",v:.3,a:.05,d:1,s:.3,r:.1},{w:"sine",v:.1,t:2.001,f:1,d:1,s:50,g:1}],[{w:"triangle",v:.3,a:.03,d:.7,s:.3,r:.2},{w:"sine",v:12,t:7,f:1,d:.5,s:1.7,g:1}],[{w:"sine",v:.3,a:.05,d:1,s:.3,r:.1},{w:"sawtooth",v:22,t:6,d:.06,s:.3,g:1}],[{w:"triangle",v:.3,a:.05,d:11,r:.3},{w:"triangle",v:1,d:1,s:8,g:1}],[{w:"sawtooth",v:.3,d:4,s:.8,r:.1},{w:"square",v:1,t:2,f:8,a:1,d:1,s:1,r:.1,g:1}],[{w:"triangle",v:.3,d:1,s:.5,t:.8,a:.2,p:1.25,q:.2},{w:"sawtooth",v:.2,a:.2,d:.3,s:1,t:1.2,p:1.25,q:.2}],[{w:"sine",v:.3,d:1,s:.3},{w:"square",v:22,t:11,d:.5,s:.1,g:1}],[{w:"sawtooth",v:.3,a:.04,d:1,s:.8,r:.1},{w:"square",v:1,t:.5,d:1,s:2,g:1}],[{w:"triangle",v:.3,d:1,s:.3},{w:"sine",v:22,t:6,d:.6,s:.05,g:1}],[{w:"sine",v:.6,a:.1,d:.05,s:.4},{w:"sine",v:5,t:5,f:1,d:.05,s:.3,g:1}],[{w:"sine",a:.1,d:.05,s:.4,v:.8},{w:"sine",v:5,t:5,f:1,d:.05,s:.3,g:1}],[{w:"square",v:.3,a:.1,d:.1,s:.4},{w:"square",v:1,f:1,d:.3,s:.1,g:1}],[{w:"sawtooth",v:.3,d:.5,r:.5},{w:"sawtooth",v:11,t:5,d:.05,g:1}],[{w:"square",v:.3,d:.2,r:.2},{w:"square",v:7,t:3,d:.05,g:1}],[{w:"triangle",d:.2,r:.2},{w:"square",v:9,t:3,d:.1,r:.1,g:1}],[{w:"triangle",d:.3,r:.3},{w:"square",v:6,t:3,d:1,r:1,g:1}],[{w:"triangle",v:.4,d:.2,r:.2},{w:"square",v:22,t:12,d:.1,r:.1,g:1}],[{w:"sine",v:.25,a:.02,d:.05,s:.8},{w:"square",v:1,t:2,d:.03,s:11,g:1}],[{w:"sine",v:.3,a:.05,d:11},{w:"square",v:7,t:3,f:1,s:.7,g:1}],[{w:"square",v:.3,a:.05,d:.1,s:.8},{w:"square",v:4,d:.1,s:1.1,g:1}],[{w:"sine",v:.4,d:.3,r:.3},{w:"sine",v:7,t:9,d:.1,r:.1,g:1}],[{w:"sine",v:.7,d:.1,r:.1},{w:"sine",v:22,t:7,d:.05,g:1}],[{w:"sine",v:.6,d:.15,r:.15},{w:"square",v:11,t:3.2,d:.1,r:.1,g:1}],[{w:"sine",v:.8,d:.07,r:.07},{w:"square",v:11,t:7,r:.01,g:1}],[{w:"triangle",v:.7,t:.5,d:.2,r:.2,p:.95},{w:"n0",v:9,g:1,d:.2,r:.2}],[{w:"sine",v:.7,d:.1,r:.1,p:.9},{w:"square",v:14,t:2,d:.005,r:.005,g:1}],[{w:"square",d:.15,r:.15,p:.5},{w:"square",v:4,t:5,d:.001,r:.001,g:1}],[{w:"n1",v:.3,a:1,s:1,d:.15,r:0,t:.5}],[{w:"sine",t:12.5,d:0,r:0,p:.5,v:.3,h:.2,q:.5},{g:1,w:"sine",v:1,t:2,d:0,r:0,s:1},{g:1,w:"n0",v:.2,t:2,a:.6,h:0,d:.1,r:.1,b:0,c:0}],[{w:"n0",v:.2,a:.05,h:.02,d:.02,r:.02}],[{w:"n0",v:.4,a:1,d:1,t:.25}],[{w:"sine",v:.3,a:.1,d:1,s:.5},{w:"sine",v:4,t:0,f:1.5,d:1,s:1,r:.1,g:1},{g:1,w:"sine",v:4,t:0,f:2,a:.6,h:0,d:.1,s:1,r:.1,b:0,c:0}],[{w:"square",v:.3,t:.25,d:11,s:1},{w:"square",v:12,t:0,f:8,d:1,s:1,r:11,g:1}],[{w:"n0",v:.4,t:.5,a:1,d:11,s:1,r:.5},{w:"square",v:1,t:0,f:14,d:1,s:1,r:11,g:1}],[{w:"sine",t:0,f:1221,a:.2,d:1,r:.25,s:1},{g:1,w:"n0",v:3,t:.5,d:1,s:1,r:1}],[{w:"sine",d:.4,r:.4,p:.1,t:2.5,v:1},{w:"n0",v:12,t:2,d:1,r:1,g:1}]],program0:[[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"sawtooth",v:.3,d:.7}],[{w:"sawtooth",v:.3,d:.7}],[{w:"sine",v:.5,d:.3,r:.3}],[{w:"triangle",v:.5,d:.3,r:.3}],[{w:"square",v:.2,d:.3,r:.3}],[{w:"square",v:.2,d:.3,r:.3}],[{w:"sine",v:.5,d:.1,r:.1}],[{w:"sine",v:.5,d:.1,r:.1}],[{w:"square",v:.2,d:1,r:1}],[{w:"sawtooth",v:.3,d:.7,r:.7}],[{w:"sine",v:.5,a:.01,s:1}],[{w:"sine",v:.7,d:.02,s:.7}],[{w:"square",v:.2,s:1}],[{w:"triangle",v:.5,a:.01,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.05,s:1}],[{w:"triangle",v:.5,d:.5}],[{w:"square",v:.2,d:.6}],[{w:"square",v:.2,d:.6}],[{w:"triangle",v:.8,d:.6}],[{w:"triangle",v:.4,d:.05}],[{w:"square",v:.2,d:1}],[{w:"square",v:.2,d:1}],[{w:"sine",v:.4,d:.6}],[{w:"triangle",v:.7,d:.4}],[{w:"triangle",v:.7,d:.7}],[{w:"triangle",v:.7,d:.7}],[{w:"triangle",v:.7,d:.7}],[{w:"square",v:.3,d:.2}],[{w:"square",v:.3,d:.2}],[{w:"square",v:.3,d:.1,s:.2}],[{w:"sawtooth",v:.4,d:.1,s:.2}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.3,d:.1}],[{w:"sawtooth",v:.3,d:.5,r:.5}],[{w:"triangle",v:.6,d:.1,r:.1,h:.03,p:.8}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"triangle",v:.3,a:.03,s:1}],[{w:"sine",v:.3,a:.03,s:1}],[{w:"triangle",v:.3,a:.05,s:1}],[{w:"sawtooth",v:.5,a:.01,d:.1}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.2,a:.05,d:.01,s:1}],[{w:"square",v:.3,a:.05,s:1}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"square",v:.3,a:.04,d:2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.05,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"square",v:.3,s:.7}],[{w:"sawtooth",v:.4,s:.7}],[{w:"triangle",v:.5,s:.7}],[{w:"sawtooth",v:.4,s:.7}],[{w:"sawtooth",v:.4,d:12}],[{w:"sine",v:.4,a:.06,d:12}],[{w:"sawtooth",v:.4,d:12}],[{w:"sawtooth",v:.4,d:12}],[{w:"sawtooth",v:.3,d:12}],[{w:"triangle",v:.5,d:12}],[{w:"square",v:.3,d:12}],[{w:"triangle",v:.5,a:.08,d:11}],[{w:"sawtooth",v:.5,a:.05,d:11}],[{w:"sawtooth",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"square",v:.3,d:11}],[{w:"sawtooth",v:.5,a:.04,d:11}],[{w:"sawtooth",v:.5,d:11}],[{w:"triangle",v:.5,a:.8,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"square",v:.3,d:11}],[{w:"sawtooth",v:.3,d:1,r:1}],[{w:"sawtooth",v:.5,d:.3}],[{w:"sawtooth",v:.5,d:.3,r:.3}],[{w:"sawtooth",v:.5,d:.3,r:.3}],[{w:"square",v:.3,d:.2,r:.2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"sawtooth",v:.2,a:.02,d:.7}],[{w:"triangle",v:.5,d:1}],[{w:"sawtooth",v:.3,d:.3,r:.3}],[{w:"sine",v:.8,d:.1,r:.1}],[{w:"square",v:.2,d:.1,r:.1,p:1.05}],[{w:"sine",v:.8,d:.05,r:.05}],[{w:"triangle",v:.5,d:.1,r:.1,p:.96}],[{w:"triangle",v:.5,d:.1,r:.1,p:.97}],[{w:"square",v:.3,d:.1,r:.1}],[{w:"n1",v:.3,a:1,s:1,d:.15,r:0,t:.5}],[{w:"triangle",v:.5,d:.03,t:0,f:1332,r:.001,p:1.1}],[{w:"n0",v:.2,t:.1,d:.02,a:.05,h:.02,r:.02}],[{w:"n0",v:.4,a:1,d:1,t:.25}],[{w:"sine",v:.3,a:.8,d:1,t:0,f:1832}],[{w:"triangle",d:.5,t:0,f:444,s:1}],[{w:"n0",v:.4,d:1,t:0,f:22,s:1}],[{w:"n0",v:.5,a:.2,d:11,t:0,f:44}],[{w:"n0",v:.5,t:.25,d:.4,r:.4}]],drummap1:[[{w:"triangle",t:0,f:70,v:1,d:.05,h:.03,p:.9,q:.1},{w:"n0",g:1,t:6,v:17,r:.01,h:0,p:0}],[{w:"triangle",t:0,f:88,v:1,d:.05,h:.03,p:.5,q:.1},{w:"n0",g:1,t:5,v:42,r:.01,h:0,p:0}],[{w:"n0",f:222,p:0,t:0,r:.01,h:0}],[{w:"triangle",v:.3,f:180,d:.05,t:0,h:.03,p:.9,q:.1},{w:"n0",v:.6,t:0,f:70,h:.02,r:.01,p:0},{g:1,w:"square",v:2,t:0,f:360,r:.01,b:0,c:0}],[{w:"square",f:1150,v:.34,t:0,r:.03,h:.025,d:.03},{g:1,w:"n0",t:0,f:13,h:.025,d:.1,s:1,r:.1,v:1}],[{w:"triangle",f:200,v:1,d:.06,t:0,r:.06},{w:"n0",g:1,t:0,f:400,v:12,r:.02,d:.02}],[{w:"triangle",f:100,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.4,h:.015,d:.005,r:.005}],[{w:"n1",f:390,v:.25,r:.01,t:0}],[{w:"triangle",f:120,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.5,h:.015,d:.005,r:.005}],[{w:"n1",v:.25,f:390,r:.03,t:0,h:.005,d:.03}],[{w:"triangle",f:140,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",v:.25,f:390,t:0,d:.2,r:.2},{w:"n0",v:.3,t:0,c:0,f:440,h:.005,d:.05}],[{w:"triangle",f:155,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"triangle",f:180,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",v:.3,f:1200,d:.2,r:.2,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,p:1.2,f:440}],[{w:"triangle",f:220,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",f:500,v:.15,d:.4,r:.4,h:0,t:0},{w:"n0",v:.1,t:0,r:.01,f:440}],[{w:"n1",v:.3,f:800,d:.2,r:.2,h:.05,t:0},{w:"square",t:0,v:1,d:.1,r:.1,p:.1,f:220,g:1}],[{w:"sine",f:1651,v:.15,d:.2,r:.2,h:0,t:0},{w:"sawtooth",g:1,t:1.21,v:7.2,d:.1,r:11,h:1},{g:1,w:"n0",v:3.1,t:.152,d:.002,r:.002}],null,[{w:"n1",v:.3,f:1200,d:.2,r:.2,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,p:1.2,f:440}],null,[{w:"n1",v:.3,f:555,d:.25,r:.25,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,f:440,a:.005,h:.02}],[{w:"sawtooth",f:776,v:.2,d:.3,t:0,r:.3},{g:1,w:"n0",v:2,t:0,f:776,a:.005,h:.02,d:.1,s:1,r:.1,c:0},{g:11,w:"sine",v:.1,t:0,f:22,d:.3,r:.3,b:0,c:0}],[{w:"n1",f:440,v:.15,d:.4,r:.4,h:0,t:0},{w:"n0",v:.4,t:0,r:.01,f:440}],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[{w:"sine",f:1720,v:.3,d:.02,t:0,r:.02},{w:"square",g:1,t:0,f:2876,v:6,d:.2,s:1,r:.2}],[{w:"sine",f:1720,v:.3,d:.25,t:0,r:.25},{w:"square",g:1,t:0,f:2876,v:6,d:.2,s:1,r:.2}]],drummap0:[[{w:"triangle",t:0,f:110,v:1,d:.05,h:.02,p:.1}],[{w:"triangle",t:0,f:150,v:.8,d:.1,p:.1,h:.02,r:.01}],[{w:"n0",f:392,v:.5,d:.01,p:0,t:0,r:.05}],[{w:"n0",f:33,d:.05,t:0}],[{w:"n0",f:100,v:.7,d:.03,t:0,r:.03,h:.02}],[{w:"n0",f:44,v:.7,d:.02,p:.1,t:0,h:.02}],[{w:"triangle",f:240,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,r:.01,t:0}],[{w:"triangle",f:270,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,d:.04,r:.04,t:0}],[{w:"triangle",f:300,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,d:.1,r:.1,h:.02,t:0}],[{w:"triangle",f:320,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"triangle",f:360,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.1,h:.05,t:0,p:.1}],[{w:"triangle",f:400,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:440,v:.3,d:.1,p:.9,t:0,r:.1}],[{w:"n0",f:200,v:.2,d:.05,p:.9,t:0}],[{w:"n0",f:440,v:.3,d:.12,p:.9,t:0}],[{w:"sine",f:800,v:.4,d:.06,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:33,v:.3,d:.2,p:.9,t:0}],[{w:"n0",f:300,v:.3,d:.14,p:.9,t:0}],[{w:"sine",f:200,d:.06,t:0}],[{w:"sine",f:150,d:.06,t:0}],[{w:"sine",f:300,t:0}],[{w:"sine",f:300,d:.06,t:0}],[{w:"sine",f:250,d:.06,t:0}],[{w:"square",f:300,v:.3,d:.06,p:.8,t:0}],[{w:"square",f:260,v:.3,d:.06,p:.8,t:0}],[{w:"sine",f:850,v:.5,d:.07,t:0}],[{w:"sine",f:790,v:.5,d:.07,t:0}],[{w:"n0",f:440,v:.3,a:.05,t:0}],[{w:"n0",f:440,v:.3,a:.05,t:0}],[{w:"triangle",f:1800,v:.4,p:.9,t:0,h:.03}],[{w:"triangle",f:1800,v:.3,p:.9,t:0,h:.13}],[{w:"n0",f:330,v:.3,a:.02,t:0,r:.01}],[{w:"n0",f:330,v:.3,a:.02,t:0,h:.04,r:.01}],[{w:"n0",f:440,v:.3,t:0}],[{w:"sine",f:800,t:0}],[{w:"sine",f:700,t:0}],[{w:"n0",f:330,v:.3,t:0}],[{w:"n0",f:330,v:.3,t:0,h:.1,r:.01,p:.7}],[{w:"sine",t:0,f:1200,v:.3,r:.01}],[{w:"sine",t:0,f:1200,v:.3,d:.2,r:.2}]],ready:function(){this.pg=[],this.vol=[],this.ex=[],this.bend=[],this.rpnidx=[],this.brange=[],this.sustain=[],this.notetab=[],this.rhythm=[],this.masterTuningC=0,this.masterTuningF=0,this.tuningC=[],this.tuningF=[],this.scaleTuning=[],this.maxTick=0,this.playTick=0,this.playing=0,this.releaseRatio=3.5;for(var s=0;s<16;++s)this.pg[s]=0,this.vol[s]=3e4/16129,this.bend[s]=0,this.brange[s]=256,this.tuningC[s]=0,this.tuningF[s]=0,this.scaleTuning[s]=[0,0,0,0,0,0,0,0,0,0,0,0],this.rhythm[s]=0;this.rhythm[9]=1,this.preroll=.2,this.relcnt=0,setInterval((function(){if(++this.relcnt>=3){this.relcnt=0;for(var c=this.notetab.length-1;c>=0;--c){var f=this.notetab[c];this.actx.currentTime>f.e&&(this._pruneNote(f),this.notetab.splice(c,1))}}if(this.playing&&this.song.ev.length>0)for(var b=this.song.ev[this.playIndex];this.actx.currentTime+this.preroll>this.playTime;)if(b.m[0]==65361?(this.song.tempo=b.m[1],this.tick2Time=240/this.song.tempo/this.song.timebase):this.send(b.m,this.playTime),++this.playIndex,this.playIndex>=this.song.ev.length){if(!this.loop){this.playTick=this.maxTick,this.playing=0;break}b=this.song.ev[this.playIndex=0],this.playTick=b.t}else b=this.song.ev[this.playIndex],this.playTime+=(b.t-this.playTick)*this.tick2Time,this.playTick=b.t}).bind(this),60),this.isReady=1},setMasterVol:function(s){s!=null&&(this.masterVol=s),this.out&&(this.out.gain.value=this.masterVol)},setReverbLev:function(s){s!=null&&(this.reverbLev=s);var c=parseFloat(this.reverbLev);this.rev&&!isNaN(c)&&(this.rev.gain.value=8*c)},setLoop:function(s){this.loop=s},setVoices:function(s){this.voices=s},reset:function(){for(var s=0;s<16;++s)this.setProgram(s,0),this.setBendRange(s,256),this.setModulation(s,0),this.setChVol(s,100),this.setPan(s,64),this.resetAllControllers(s),this.allSoundOff(s),this.rhythm[s]=0,this.tuningC[s]=0,this.tuningF[s]=0,this.scaleTuning[s]=[0,0,0,0,0,0,0,0,0,0,0,0];this.masterTuningC=0,this.masterTuningF=0,this.rhythm[9]=1},setQuality:function(s){var c;for(s!=null&&(this.quality=s),c=0;c<128;++c)this.setTimbre(0,c,this.program0[c]);for(c=0;c<this.drummap0.length;++c)this.setTimbre(1,c+35,this.drummap0[c]);if(this.quality){for(c=0;c<this.program1.length;++c)this.setTimbre(0,c,this.program1[c]);for(c=0;c<this.drummap.length;++c)this.drummap1[c]&&this.setTimbre(1,c+35,this.drummap1[c])}},setTimbre:function(s,c,f){var b={g:0,w:"sine",t:1,f:0,v:.5,a:0,h:.01,d:.01,s:0,r:.05,p:1,q:1,k:0};function T(E){for(c=0;c<E.length;++c)for(B in b)E[c].hasOwnProperty(B)&&E[c][B]!==void 0||(E[c][B]=b[B]);return E}s&&c>=35&&c<=81&&(this.drummap[c-35]=T(f)),s==0&&c>=0&&c<=127&&(this.program[c]=T(f))},_pruneNote:function(s){for(var c=s.o.length-1;c>=0;--c){if(s.o[c].frequency?s.o[c].frequency.cancelScheduledValues(0):s.o[c].playbackRate.cancelScheduledValues(0),s.g[c].gain.cancelScheduledValues(0),s.o[c].stop(),s.o[c].detune)try{this.chmod[s.ch].disconnect(s.o[c].detune)}catch{}s.g[c].gain.value=0}},_limitVoices:function(s,c){this.notetab.sort(function(T,E){return T.f!=E.f?T.f-E.f:T.e!=E.e?E.e-T.e:E.t-T.t});for(var f=this.notetab.length-1;f>=0;--f){var b=this.notetab[f];(this.actx.currentTime>b.e||f>=this.voices-1)&&(this._pruneNote(b),this.notetab.splice(f,1))}},_note:function(s,c,f,b,T){var E,X,v,O=[],Z=[],W=[],V=[],k=[],q=440*Math.pow(2,(f-69+this.masterTuningC+this.tuningC[c]+(this.masterTuningF+this.tuningF[c]/8192+this.scaleTuning[c][f%12]))/12);this._limitVoices(c,f);for(var M=0;M<T.length;++M){var x=s+(v=T[M]).a+v.h;v.g==0?(E=this.chvol[c],X=b*b/16384,V[M]=q*v.t+v.f):v.g>10?(E=Z[v.g-11].gain,X=1,V[M]=V[v.g-11]*v.t+v.f):O[v.g-1].frequency?(E=O[v.g-1].frequency,X=V[v.g-1],V[M]=V[v.g-1]*v.t+v.f):(E=O[v.g-1].playbackRate,X=V[v.g-1]/440,V[M]=V[v.g-1]*v.t+v.f),v.w[0]==="n"?(O[M]=this.actx.createBufferSource(),O[M].buffer=this.noiseBuf[v.w],O[M].loop=!0,O[M].playbackRate.value=V[M]/440,v.p!=1&&this._setParamTarget(O[M].playbackRate,V[M]/440*v.p,s,v.q),O[M].detune&&(this.chmod[c].connect(O[M].detune),O[M].detune.value=this.bend[c])):(O[M]=this.actx.createOscillator(),O[M].frequency.value=V[M],v.p!=1&&this._setParamTarget(O[M].frequency,V[M]*v.p,s,v.q),v.w[0]=="w"?O[M].setPeriodicWave(this.wave[v.w]):O[M].type=v.w,O[M].detune&&(this.chmod[c].connect(O[M].detune),O[M].detune.value=this.bend[c])),Z[M]=this.actx.createGain(),k[M]=v.r,O[M].connect(Z[M]),Z[M].connect(E),W[M]=X*v.v,v.k&&(W[M]*=Math.pow(2,(f-60)/12*v.k)),v.a?(Z[M].gain.value=0,Z[M].gain.setValueAtTime(0,s),Z[M].gain.linearRampToValueAtTime(W[M],s+v.a)):Z[M].gain.setValueAtTime(W[M],s),this._setParamTarget(Z[M].gain,v.s*W[M],x,v.d),O[M].start(s),this.rhythm[c]&&(O[M].onended=function(En,In){return function(){In&&En.disconnect(In)}}(this.chmod[c],O[M].detune),O[M].stop(s+T[0].d*this.releaseRatio))}this.rhythm[c]||this.notetab.push({t:s,e:99999,ch:c,n:f,o:O,g:Z,t2:s+v.a,v:W,r:k,f:0})},_setParamTarget:function(s,c,f,b){b!=0?s.setTargetAtTime(c,f,b):s.setValueAtTime(c,f)},_releaseNote:function(s,c){if(s.ch!=9)for(var f=s.g.length-1;f>=0;--f)s.g[f].gain.cancelScheduledValues(c),c==s.t2?s.g[f].gain.setValueAtTime(s.v[f],c):c<s.t2&&s.g[f].gain.setValueAtTime(s.v[f]*(c-s.t)/(s.t2-s.t),c),this._setParamTarget(s.g[f].gain,0,c,s.r[f]);s.e=c+s.r[0]*this.releaseRatio,s.f=1},setModulation:function(s,c,f){this.chmod[s].gain.setValueAtTime(100*c/127,this._tsConv(f))},setChVol:function(s,c,f){this.vol[s]=3*c*c/16129,this.chvol[s].gain.setValueAtTime(this.vol[s]*this.ex[s],this._tsConv(f))},setPan:function(s,c,f){this.chpan[s]&&this.chpan[s].pan.setValueAtTime((c-64)/64,this._tsConv(f))},setExpression:function(s,c,f){this.ex[s]=c*c/16129,this.chvol[s].gain.setValueAtTime(this.vol[s]*this.ex[s],this._tsConv(f))},setSustain:function(s,c,f){if(this.sustain[s]=c,f=this._tsConv(f),c<64)for(var b=this.notetab.length-1;b>=0;--b){var T=this.notetab[b];f>=T.t&&T.ch==s&&T.f==1&&this._releaseNote(T,f)}},allSoundOff:function(s){for(var c=this.notetab.length-1;c>=0;--c){var f=this.notetab[c];f.ch==s&&(this._pruneNote(f),this.notetab.splice(c,1))}},resetAllControllers:function(s){this.bend[s]=0,this.ex[s]=1,this.rpnidx[s]=16383,this.sustain[s]=0,this.chvol[s]&&(this.chvol[s].gain.value=this.vol[s]*this.ex[s],this.chmod[s].gain.value=0)},setBendRange:function(s,c){this.brange[s]=c},setProgram:function(s,c){this.debug&&console.log("Pg("+s+")="+c),this.pg[s]=c},setBend:function(s,c,f){f=this._tsConv(f);var b=100*this.brange[s]/127;this.bend[s]=(c-8192)*b/8192;for(var T=this.notetab.length-1;T>=0;--T){var E=this.notetab[T];if(E.ch==s)for(var X=E.o.length-1;X>=0;--X)E.o[X].frequency&&E.o[X].detune&&E.o[X].detune.setValueAtTime(this.bend[s],f)}},noteOn:function(s,c,f,b){f!=0?(b=this._tsConv(b),this.rhythm[s]?c>=35&&c<=81&&this._note(b,s,c,f,this.drummap[c-35]):this._note(b,s,c,f,this.program[this.pg[s]])):this.noteOff(s,c,b)},noteOff:function(s,c,f){if(!this.rhythm[s]){f=this._tsConv(f);for(var b=this.notetab.length-1;b>=0;--b){var T=this.notetab[b];f>=T.t&&T.ch==s&&T.n==c&&T.f==0&&(T.f=1,this.sustain[s]<64&&this._releaseNote(T,f))}}},_tsConv:function(s){return s==null||s<=0?(s=0,this.actx&&(s=this.actx.currentTime)):this.tsmode&&(s=.001*s-this.tsdiff),s},setTsMode:function(s){this.tsmode=s},send:function(s,c){var f=15&s[0],b=-16&s[0];if(!(b<128||b>=256))switch(this.audioContext.state=="suspended"&&this.audioContext.resume(),b){case 176:switch(s[1]){case 1:this.setModulation(f,s[2],c);break;case 7:this.setChVol(f,s[2],c);break;case 10:this.setPan(f,s[2],c);break;case 11:this.setExpression(f,s[2],c);break;case 64:this.setSustain(f,s[2],c);break;case 98:case 99:this.rpnidx[f]=16383;break;case 100:this.rpnidx[f]=16256&this.rpnidx[f]|s[2];break;case 101:this.rpnidx[f]=127&this.rpnidx[f]|s[2]<<7;break;case 6:switch(this.rpnidx[f]){case 0:this.brange[f]=(s[2]<<7)+(127&this.brange[f]);break;case 1:this.tuningF[f]=(s[2]<<7)+(this.tuningF[f]+8192&127)-8192;break;case 2:this.tuningC[f]=s[2]-64}break;case 38:switch(this.rpnidx[f]){case 0:this.brange[f]=16256&this.brange[f]|s[2];break;case 1:this.tuningF[f]=(this.tuningF[f]+8192&16256|s[2])-8192}break;case 120:case 123:case 124:case 125:case 126:case 127:this.allSoundOff(f);break;case 121:this.resetAllControllers(f)}break;case 192:this.setProgram(f,s[1]);break;case 224:this.setBend(f,s[1]+(s[2]<<7),c);break;case 144:this.noteOn(f,s[1],s[2],c);break;case 128:this.noteOff(f,s[1],c);break;case 240:if(s[0]==255){this.reset();break}if(s[0]!=254&&this.debug)for(var T=[],E=0;E<s.length;++E)T.push(s[E].toString(16));if(s[0]==240&&(s[1]==127&&s[3]==4&&(s[4]==3&&s.length>=8&&(this.masterTuningF=(128*s[6]+s[5]-8192)/8192),s[4]==4&&s.length>=8&&(this.masterTuningC=s[6]-64)),s[1]==65&&s[3]==66&&s[4]==18&&s[5]==64))if((240&s[6])==16&&s.length==11){var X=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][15&s[6]];s[7]==21?this.rhythm[X]=s[8]:s[7]>=64&&s[7]<=75&&(this.scaleTuning[X][s[7]-64]=(s[8]-64)/100)}else s[6]==0&&(s[7]==0&&s.length==14?this.masterTuningF=(4096*s[8]+256*s[9]+16*s[10]+s[11]-1024)/1e3:s[7]==5&&s.length==11&&(this.masterTuningC=s[8]-64))}},_createWave:function(s){for(var c=new Float32Array(s.length),f=new Float32Array(s.length),b=1;b<s.length;++b)c[b]=s[b];return this.actx.createPeriodicWave(f,c)},getAudioContext:function(){return this.actx},setAudioContext:function(s,c){this.audioContext=this.actx=s,this.dest=c,c||(this.dest=s.destination),this.tsdiff=.001*performance.now()-this.actx.currentTime,this.out=this.actx.createGain(),this.comp=this.actx.createDynamicsCompressor();var f=.5*this.actx.sampleRate|0;this.convBuf=this.actx.createBuffer(2,f,this.actx.sampleRate),this.noiseBuf={},this.noiseBuf.n0=this.actx.createBuffer(1,f,this.actx.sampleRate),this.noiseBuf.n1=this.actx.createBuffer(1,f,this.actx.sampleRate);for(var b=this.convBuf.getChannelData(0),T=this.convBuf.getChannelData(1),E=this.noiseBuf.n0.getChannelData(0),X=this.noiseBuf.n1.getChannelData(0),v=0;v<f;++v)v/f<Math.random()&&(b[v]=Math.exp(-3*v/f)*(Math.random()-.5)*.5,T[v]=Math.exp(-3*v/f)*(Math.random()-.5)*.5),E[v]=2*Math.random()-1;for(var O=0;O<64;++O){var Z=10*Math.random()+1,W=10*Math.random()+1;for(v=0;v<f;++v){var V=Math.sin(v/f*2*Math.PI*440*Z)*Math.sin(v/f*2*Math.PI*440*W);X[v]+=V/8}}for(this.useReverb&&(this.conv=this.actx.createConvolver(),this.conv.buffer=this.convBuf,this.rev=this.actx.createGain(),this.rev.gain.value=this.reverbLev,this.out.connect(this.conv),this.conv.connect(this.rev),this.rev.connect(this.comp)),this.setMasterVol(),this.out.connect(this.comp),this.comp.connect(this.dest),this.chvol=[],this.chmod=[],this.chpan=[],this.wave={w9999:this._createWave("w9999")},this.lfo=this.actx.createOscillator(),this.lfo.frequency.value=5,this.lfo.start(0),v=0;v<16;++v)this.chvol[v]=this.actx.createGain(),this.actx.createStereoPanner?(this.chpan[v]=this.actx.createStereoPanner(),this.chvol[v].connect(this.chpan[v]),this.chpan[v].connect(this.out)):(this.chpan[v]=null,this.chvol[v].connect(this.out)),this.chmod[v]=this.actx.createGain(),this.lfo.connect(this.chmod[v]),this.pg[v]=0,this.resetAllControllers(v);this.setReverbLev(),this.reset()}},this.sy.properties)this[B]=this.sy.properties[B].value;this.setQuality(1),C&&(C.useReverb!=null&&(this.useReverb=C.useReverb),C.quality!=null&&this.setQuality(C.quality),C.voices!=null&&this.setVoices(C.voices)),this.ready()}function L(C,B,s){if(B===void 0)return L(C,[],[]);if(C instanceof Object){for(var c=0;c<B.length;c++)if(B[c]===C)return s[c];var f;for(var b in f=C instanceof Array?[]:{},B.push(C),s.push(f),C)C.hasOwnProperty(b)&&(f[b]=L(C[b],B,s));return f}return C}function rn(){return K||(K=U.lib.getAudioContext()),!!K}},j.Tiny=j,un.exports=j}(ie)),ie.exports),oe={exports:{}},Ei=(re||(re=1,function(un){var j;j=function(U){function K(L){return L[2]==6&&L[3]==2&&L[4]==62}function A(L){return String.fromCharCode(L)}function $(L){return L.map(A).join("")}U.MIDI.prototype.isIdResponse=function(){return this[0]==240&&this[1]==126&&(this[3]==6&&this[4]==2||K(this))&&this[this.length-1]==247&&this.length>10},U.MIDI.prototype.gearInfo=function(){if(this.isIdResponse()){var L,rn;K(this)?(L=$(this.slice(4,5)),rn=$(this.slice(5,13))):this[5]?(L=$(this.slice(5,6)),rn=$(this.slice(6,14))):(L=$(this.slice(6,8)),rn=$(this.slice(8,16)));var C={brand:wn[L]};if(!R[L])return C;for(var B=8;B>=4;B--){var s=R[L][rn.substring(0,B)];if(s){C.model=s.m,C.descr=s.d,s.b&&(C.brand=s.b);break}}return C}},U.MIDI.setGearInfo=function(L,rn,C,B){if(!(L=U.MIDI(L)).isIdResponse())throw RangeError("Not a valid ID response");var s,c;L[5]?(s=$(L.slice(5,6)),c=$(L.slice(6,14))):(s=$(L.slice(6,8)),c=$(L.slice(8,16))),wn[s]||(wn[s]=rn),R[s]||(R[s]={}),R[s][c]={b:rn,m:C,d:B}};var R={},wn={"":"Sequential","":"IDP","":"Voyetra Turtle Beach","":"Moog","":"Passport Designs","":"Lexicon","\x07":"Kurzweil","\b":"Fender","	":"MIDI9","\n":"AKG","\v":"Voyce Music","\f":"WaveFrame","\r":"ADA","":"Garfield Electronics","":"Ensoniq","":"Oberheim","":"Apple","":"Grey Matter Response","":"Digidesign","":"Palmtree Instruments","":"JLCooper Electronics","":"Lowrey","":"Adams-Smith","":"E-MU","":"Harmony Systems","":"ART","\x1B":"Baldwin","":"Eventide","":"Inventronics","":"Key Concepts","":"Clarity"," ":"Passac","!":"Proel Labs",'"':"Synthaxe","#":"Stepp",$:"Hohner","%":"Twister","&":"Ketron","'":"Jellinghaus","(":"Southworth Music Systems",")":"PPG","*":"JEN","+":"Solid State",",":"Audio Vertrieb","-":"Neve",".":"Soundtracs","/":"Elka",0:"Dynacord",1:"Viscount",2:"Drawmer",3:"Clavia",4:"Audio Architecture",5:"Generalmusic",6:"Cheetah Marketing",7:"C.T.M.",8:"Simmons",9:"Soundcraft",":":"Steinberg",";":"Wersi","<":"AVAB","=":"Digigram",">":"Waldorf","?":"Quasimidi","@":"Kawai",A:"Roland",B:"Korg",C:"Yamaha",D:"Casio",F:"Kamiya Studio",G:"Akai",H:"Victor",K:"Fujitsu",L:"Sony",N:"Teac",P:"Matsushita Electric",Q:"Fostex",R:"Zoom",T:"Matsushita Communication",U:"Suzuki",V:"Fuji",W:"Acoustic Technical Laboratory",Y:"Faith",Z:"Internet Corporation","\\":"Seekers",_:"SD Card Association","}":"(educational)","\0":"Time/Warner","\0":"Advanced Gravis","\0":"Media Vision","\0":"Dornes Research Group","\0":"K-Muse","\0":"Stypher","\0\x07":"Digital Music","\0\b":"IOTA Systems","\0	":"New England Digital","\0\n":"Artisyn","\0\v":"IVL Technologies","\0\f":"Southern Music Systems","\0\r":"Lake Butler Sound Company","\0":"Alesis Studio Electronics","\0":"Sound Creation","\0":"DOD Electronics","\0":"Studer-Editech","\0":"Sonus","\0":"Temporal Acuity Products","\0":"Perfect Fretworks","\0":"KAT","\0":"Opcode Systems","\0":"Rane","\0":"Anadi Electronique","\0":"KMX","\0":"Allen & Heath Brenell","\0\x1B":"Peavey Electronics","\0":"360 Systems","\0":"Spectrum Design and Development","\0":"Marquis Music","\0":"Zeta Systems","\0 ":"Axxes","\0!":"Orban",'\0"':"Indian Valley","\0#":"Triton","\0$":"KTI","\0%":"Breakaway Technologies","\0&":"Leprecon","\0'":"Harrison Systems","\0(":"Future Lab","\0)":"Rocktron","\0*":"PianoDisc","\0+":"Cannon","\0,":"Reserved","\0-":"Rodgers Instrument","\0.":"Blue Sky Logic","\0/":"Encore Electronics","\x000":"Uptown","\x001":"Voce","\x002":"CTI Audio","\x003":"S3","\x004":"Broderbund","\x005":"Allen Organ Co.","\x006":"Reserved","\x007":"Music Quest","\x008":"Aphex","\x009":"Gallien Krueger","\0:":"IBM","\0;":"Mark Of The Unicorn","\0<":"Hotz","\0=":"ETA Lighting","\0>":"NSI","\0?":"Ad Lib","\0@":"Richmond Sound Design","\0A":"Microsoft","\0B":"Mindscape","\0C":"Russ Jones Marketing","\0D":"Intone","\0E":"Advanced Remote Technologies","\0F":"White Instruments","\0G":"GT Electronics","\0H":"Pacific Research & Engineering","\0I":"Timeline Vista","\0J":"Mesa Boogie","\0K":"FSLI","\0L":"Sequoia Development","\0M":"Studio Electronics","\0N":"Euphonix","\0O":"InterMIDI","\0P":"MIDI Solutions","\0Q":"3DO Company","\0R":"Lightwave Research","\0S":"Micro-W","\0T":"Spectral Synthesis","\0U":"Lone Wolf","\0V":"Studio Technologies","\0W":"Peterson Electro-Musical Product","\0X":"Atari","\0Y":"Marion Systems","\0Z":"Design Event","\0[":"Winjammer Software","\0\\":"AT&T","\0]":"Reserved","\0^":"Symetrix","\0_":"MIDI the World","\0`":"Spatializer","\0a":"Micros 'N MIDI","\0b":"Accordians International","\0c":"EuPhonics","\0d":"Musonix","\0e":"Turtle Beach Systems","\0f":"Mackie","\0g":"Compuserve","\0h":"BEC Technologies","\0i":"QRS Music","\0j":"P.G. Music","\0k":"Sierra Semiconductor","\0l":"EpiGraf","\0m":"Electronics Diversified","\0n":"Tune 1000","\0o":"Advanced Micro Devices","\0p":"Mediamation","\0q":"Sabine","\0r":"Woog Labs","\0s":"Micropolis","\0t":"Ta Horng Musical Instrument","\0u":"e-Tek Labs","\0v":"Electro-Voice","\0w":"Midisoft","\0x":"QSound Labs","\0y":"Westrex","\0z":"Nvidia","\0{":"ESS Technology","\0|":"Media Trix Peripherals","\0}":"Brooktree","\0~":"Otari","\0":"Key Electronics","\0":"Shure","":"AuraSound","":"Crystal Semiconductor","":"Conexant","":"Silicon Graphics","":"M-Audio","":"PreSonus","\b":"Topaz Enterprises","	":"Cast Lighting","\n":"Microsoft","\v":"Sonic Foundry","\f":"Line 6","\r":"Beatnik","":"Van Koevering","":"Altech Systems","":"S & S Research","":"VLSI Technology","":"Chromatic Research","":"Sapphire","":"IDRC","":"Justonic Tuning","":"TorComp Research","":"Newtek","":"Sound Sculpture","":"Walker Technical","":"Digital Harmony","\x1B":"InVision Interactive","":"T-Square Design","":"Nemesys Music Technology","":"DBX Professional","":"Syndyne"," ":"Bitheadz","!":"Cakewalk Music Software",'"':"Analog Devices","#":"National Semiconductor","$":"Boom Theory","%":"Virtual DSP","&":"Antares Systems","'":"Angel Software","(":"St Louis Music",")":"Passport Music Software","*":"Ashley Audio","+":"Vari-Lite",",":"Summit Audio","-":"Aureal Semiconductor",".":"SeaSound","/":"U.S. Robotics","0":"Aurisis Research","1":"Nearfield Research","2":"FM7","3":"Swivel Systems","4":"Hyperactive Audio Systems","5":"MidiLite","6":"Radikal Technologies","7":"Roger Linn Design","8":"TC-Helicon Vocal Technologies","9":"Event Electronics",":":"Sonic Network",";":"Realtime Music Solutions","<":"Apogee Digital","=":"Classical Organs",">":"Microtools","?":"Numark Industries","@":"Frontier Design Group","A":"Recordare","B":"Starr Labs","C":"Voyager Sound","D":"Manifold Labs","E":"Aviom","F":"Mixmeister Technology","G":"Notation Software","H":"Mercurial Communications","I":"Wave Arts","J":"Logic Sequencing Devices","K":"Axess Electronics","L":"Muse Research","M":"Open Labs","N":"Guillemot","O":"Samson Technologies","P":"Electronic Theatre Controls","Q":"Blackberry","R":"Mobileer","S":"Synthogy","T":"Lynx Studio Technology","U":"Damage Control Engineering","V":"Yost Engineering","W":"Brooks & Forsman Designs","X":"Infinite Response","Y":"Garritan","Z":"Plogue Art et Technologie","[":"RJM Music Technology","\\":"Custom Solutions Software","]":"Sonarcana","^":"Centrance","_":"Kesumo","`":"Stanton","a":"Livid","b":"First Act","c":"Pygraphics","d":"Panadigm Innovations","e":"Avedis Zildjian","f":"Auvital Music","g":"You Rock Guitar","h":"Chris Grigg Designs","i":"Slate Digital","j":"Mixware","k":"Social Entropy","l":"Source Audio","m":"Ernie Ball","n":"Fishman","o":"Custom Audio Electronics","p":"American Audio","q":"Mega Lite","r":"Kilpatrick Audio","s":"iConnectivity","t":"Fractal Audio","u":"NetLogic Microsystems","v":"Music Computing","w":"Nektar Technology","x":"Zenph Sound Innovations","y":"DJ TechTools","z":"Rezonance Labs","{":"Decibel Eleven","|":"CNMAT","}":"Media Overkill","~":"Confusion Studios","":"moForte","\0":"Miselu","":"Amelia's Compass","":"Zivix","":"Artiphon","":"Synclavier Digital","":"Light & Sound Control Devices","":"Retronyms","\x07":"JS Technologies","\b":"Quicco Sound","	":"A-Designs Audio","\n":"McCarthy Music","\v":"Denon DJ","\f":"Keith Robert Murray","\r":"Google","":"ISP Technologies","":"Abstrakt Instruments","":"Meris","":"Sensorpoint","":"Hi-Z Labs","":"Imitone","":"Intellijel Designs","":"Dasz Instruments","":"Remidi","":"Disaster Area Designs","":"Universal Audio","":"Carter Duncan","":"Essential Technology","\x1B":"Cantux Research","":"Hummel Technologies","":"Sensel","":"DBML Group","":"Madrona Labs"," ":"Mesa Boogie","!":"Effigy Labs",'"':"MK2 Image","#":"Red Panda","$":"OnSong","%":"Jamboxx","&":"Electro-Harmonix","'":"RnD64","(":"Neunaber Technology",")":"Kaom","*":"Hallowell","+":"Sound Devices",",":"Spectrasonics","-":"Second Sound",".":"8eo","/":"VIDVOX","0":"Matthews Effects"," \0":"Dream SAS"," ":"Strand Lighting"," ":"Amek Div of Harman Industries"," ":"Casa Di Risparmio Di Loreto"," ":"Böhm Elektronik"," ":"Syntec Digital Audio"," ":"Trident Audio Developments"," \x07":"Real World Studio"," \b":"M-Audio"," 	":"Yes Technology"," \n":"Audiomatica"," \v":"Bontempi"," \f":"F.B.T. Elettronica"," \r":"MidiTemp"," ":"LA Audio"," ":"Zero 88 Lighting"," ":"Micon Audio Electronics"," ":"Forefront Technology"," ":"Studio Audio and Video"," ":"Kenton Electronics"," ":"Celco"," ":"ADB"," ":"Marshall Products"," ":"DDA"," ":"BSS Audio"," ":"MA Lighting Technology"," ":"Fatar"," \x1B":"QSC Audio Products"," ":"Artisan Clasic Organ"," ":"Orla"," ":"Pinnacle Audio"," ":"TC Electronics","  ":"Doepfer Musikelektronik"," !":"Creative",' "':"Seyddo"," #":"LG Electronics"," $":"Midisoft"," %":"Samick"," &":"Penny and Giles"," '":"Acorn Computer"," (":"LSC Electronics"," )":"Novation"," *":"Samkyung Mechatronics"," +":"Medeli Electronics"," ,":"Charlie Lab"," -":"Blue Chip Music Technology"," .":"BEE"," /":"LG Semicon America"," 0":"TESI"," 1":"EMAGIC"," 2":"Behringer"," 3":"Access Music Electronics"," 4":"Synoptic"," 5":"Hanmesoft"," 6":"Terratec Electronic"," 7":"Proel"," 8":"IBK MIDI"," 9":"IRCAM"," :":"Propellerhead Software"," ;":"Red Sound Systems"," <":"Elektron"," =":"Sintefex Audio"," >":"MAM"," ?":"Amsaro"," @":"Lanbox"," A":"Mode Machines"," B":"DSP Arts"," C":"Phil Rees Music Tech"," D":"Stamer Musikanlagen"," E":"Musical Muntaner"," F":"C-Mexx Software"," G":"Klavis Technologies"," H":"Noteheads"," I":"Algorithmix"," J":"Skrydstrup R&D"," K":"Professional Audio"," L":"NewWave Labs"," M":"Vermona"," N":"Nokia"," O":"Wave Idea"," P":"Hartmann"," Q":"Lion's Tracs"," R":"Analogue Systems"," S":"Focal-JMlab"," T":"Ringway Electronics"," U":"Faith Technologies"," V":"Showworks"," W":"Manikin Electronic"," X":"1 Come Tech"," Y":"Phonic"," Z":"Dolby Australia"," [":"Silansys Technologies"," \\":"Winbond Electronics"," ]":"Cinetix Medien und Interface"," ^":"A&G Soluzioni Digitali"," _":"Sequentix"," `":"Oram Pro Audio"," a":"Be4"," b":"Infection Music"," c":"Central Music"," d":"genoQs Machines"," e":"Medialon"," f":"Waves Audio"," g":"Jerash Labs"," h":"Da Fact"," i":"Elby Designs"," j":"Spectral Audio"," k":"Arturia"," l":"Vixid"," m":"C-Thru Music"," n":"Ya Horng Electronic"," o":"SM Pro Audio"," p":"OTO Machines"," q":"ELZAB"," r":"Blackstar Amplification"," s":"M3i Technologies"," t":"Gemalto"," u":"Prostage"," v":"Teenage Engineering"," w":"Tobias Erichsen Consulting"," x":"Nixer"," y":"Hanpin Electron"," z":"R. Sowa"," {":"Beyond Music"," |":"Kiss Box"," }":"Misa Digital Technologies"," ~":"AI Musics Technology"," ":"Serato","!\0":"Limex","!":"Kyodday","!":"Mutable Instruments","!":"PreSonus Software","!":"Ingenico","!":"Fairlight Instruments","!":"Musicom Lab","!\x07":"Modal Electronics","!\b":"RWA","!	":"Native Instruments","!\n":"Naonext","!\v":"MFB","!\f":"Teknel Research","!\r":"Ploytec","!":"Surfin Kangaroo Studio","!":"Philips Electronics","!":"ROLI","!":"Panda-Audio","!":"BauM Software","!":"Machinewerks","!":"Xiamen Elane Electronics","!":"Marshall Amplification","!":"Kiwitechnics","!":"Rob Papen","!":"Spicetone","!":"V3Sound","!":"IK Multimedia","!\x1B":"Novalia","!":"Modor Music","!":"Ableton","!":"Dtronics","!":"ZAQ Audio","! ":"Muabaobao Education Technology","!!":"Flux Effects",'!"':"Audiothingies","!#":"Retrokits","!$":"Morningstar FX","!%":"Changsha Hotone Audio","!&":"Expressive","!'":"Expert Sleepers","!(":"Timecode-Vision Technology","!)":"Hornberg Research","!*":"Sonic Potions","!+":"Audiofront","!,":"Fred's Lab","!-":"Audio Modeling","!.":"C. Bechstein Digital","!/":"Motas Electronics","!0":"MIND Music Labs","!1":"Sonic Academy","!2":"Bome Software","!3":"AODYO","!4":"Pianoforce","!5":"Dreadbox","!6":"TouchKeys Instruments","!7":"Gigrig","!8":"ALM","!9":"CH Sound Design","!:":"Beat Bars","!;":"Blokas","!<":"GEWA Music","!=":"dadamachines","!>":"Augmented Instruments","!?":"Supercritical","!@":"Genki Instruments","!A":"Marienberg Devices","!B":"Supperware","!C":"Imoxplus","!D":"Swapp Technologies","!E":"Electra One","!F":"Digital Clef","!G":"Paul Whittington Group","@\0":"Crimson Technology","@":"Softbank","@":"D&M Holdings"};R[""]={"%\0\0":{m:"Mopho",d:"Synth Module",b:"Dave Smith"}},R["\x07"]={"\0@\0\n":{m:"PC3LE8",d:"Performance Controller"}},R[""]={"@\0":{m:"Xboard 49",d:"USB MIDI Controller"}},R[">"]={"\0	\0":{m:"Microwave XT 2",d:"Synth Module"},"\0\v\0":{m:"Microwave XT",d:"Synth Module"},"\0\0\0":{m:"Blofeld",d:"Synth Module"}},R.A={"\0\0":{m:"DR-880",d:"Drum Machine",b:"BOSS"},"\0\0":{m:"RD-300SX",d:"Digital Piano"},"\0\0":{m:"GP-10",d:"Guitar Effects Processor",b:"BOSS"},"\0\0":{m:"GT-8",d:"Guitar Effects Processor",b:"BOSS"},"	\0\0":{m:"TD-12",d:"Percussion Sound Module"},"\v\0\0":{m:"GT-PRO",d:"Guitar Effects Processor",b:"BOSS"},"\0\0":{m:"XV-3080",d:"Synth Module"},"":{m:"FANTOM",d:"Synthesizer"},"\0\0":{m:"MC-808",d:"Sampling Groovebox"},"\0\0":{m:"SH-201",d:"Synthesizer"},"\0\0":{m:"VP-550",d:"Vocal & Ensemble Keyboard"},"\0\0\0":{m:"HP-330/245",d:"Digital Piano"},"\0\0":{m:"HP-530",d:"Digital Piano"},"\0\0":{m:"C-80",d:"Digital Harpsichord"},"\0\0":{m:"FP-9",d:"Digital Piano"},"\0\0\0":{m:"HP-2",d:"Digital Piano"},"\0\0":{m:"DP-900",d:"Digital Piano"},"\0":{m:"HP-147",d:"Digital Piano"},"\0":{m:"HP-3",d:"Digital Piano"},"\0\0":{m:"EP-70",d:"Digital Piano"},"\0":{m:"EP-90",d:"Digital Piano"},"\0":{m:"HP-7",d:"Digital Piano"},"\0":{m:"HP-237",d:"Digital Piano"},"\0":{m:"HP-147R",d:"Digital Piano"},"\0":{m:"F-90",d:"Digital Piano"},"\0\0":{m:"F-100",d:"Digital Piano"},"\0":{m:"F-30",d:"Digital Piano"},"\0":{m:"F-50",d:"Digital Piano"},"\0":{m:"HP-101",d:"Digital Piano"},"\0\0":{m:"DR-770",d:"Drum Machine",b:"BOSS"},"\0\0":{m:"VG-99",d:"V-Guitar System"}," \0\0":{m:"TD-8",d:"Percussion Sound Module"},"!\0\0":{m:"V-Synth GT",d:"Synthesizer Keyboard"},"'\0\0\0":{m:"Fantom-G6",d:"Music Workstation"},"'\0\0":{m:"Fantom-G7",d:"Music Workstation"},"'\0\0":{m:"Fantom-G8",d:"Music Workstation"},"+\0\0":{m:"RD-700GX",d:"Digital Stage Piano"},",\0\0":{m:"RD-300GX",d:"Digital Piano"},"/\0\0":{m:"GT-10",d:"Guitar Effects Processor",b:"BOSS"},"3\0\0":{m:"VS-700R",d:"Digital Audio Workstation"},"6\0\0":{m:"GW-8",d:"Workstation"},"9\0\0":{m:"V-Piano",d:"Digital Piano"},"9\0":{m:"V-Piano Grand (GP-7)",d:"Digital Piano"},":\0\0":{m:"FP-3",d:"Digital Piano"},":\0\0":{m:"JUNO-Di",d:"Synthesizer"},";\0\0":{m:"VP-770",d:"Vocal & Ensemble Keyboard"},"?\0\0":{m:"TD-6V",d:"Percussion Sound Module"},"A\0\0":{m:"DR-670",d:"Drum Machine",b:"BOSS"},"A\0\0":{m:"GAIA SH-01",d:"Synthesizer"},"B\0\0\x07":{m:"SC-8820",d:"Sound Module"},"B\0\0\b":{m:"KR-577/977/1077",d:"Digital Piano"},"B\0\0\r":{m:"KR-5",d:"Digital Piano"},"B\0\0\0":{m:"KR-7",d:"Digital Piano"},"B\0\0":{m:"KF-7",d:"Digital Piano"},"B\0\0\0":{m:"KR-15",d:"Digital Piano"},"B\0\0":{m:"KR-15/17",d:"Digital Piano"},"B\0\0\0":{m:"RG-7",d:"Digital Piano"},"B\0\0":{m:"RG-3",d:"Digital Piano"},"B\0\0":{m:"KR-107",d:"Digital Piano"},"B\0\0":{m:"HP-205",d:"Digital Piano"},"B\0\0":{m:"HP-203",d:"Digital Piano"},"B\0\0":{m:"FP-7",d:"Digital Piano"},"B\0\0":{m:"FP-4",d:"Digital Piano"},"B\0\0":{m:"HP-201",d:"Digital Piano"},"B\0\0\0":{m:"AT-800",d:"Organ"},"B\0\0":{m:"AT-900",d:"Organ"},"B\0\0":{m:"AT-900C",d:"Organ"},"B\0\0\0":{m:"AT-100",d:"Organ"},"B\0\0":{m:"AT-300",d:"Organ"},"B\0\0":{m:"AT-500",d:"Organ"},"B\0\0":{m:"AT-75",d:"Organ"},"B\0\0":{m:"RK-300",d:"Keyboard"},"B\0\0":{m:"RM-700",d:"Digital Piano"},"B\0\0":{m:"HP-507",d:"Digital Piano"},"B\0\0":{m:"HP-505",d:"Digital Piano"},"B\0\0":{m:"HP-503",d:"Digital Piano"},"B\0\0":{m:"DP90/DP90S",d:"Digital Piano"},"B\0\0":{m:"HPi-50",d:"Digital Piano"},"B\0":{m:"E-500(OR)/E-500/E-300/KR-75",d:"Intelligent Keyboard"},"B\0	":{m:"HP-557R",d:"Digital Piano"},"B\0\x1B\0":{m:"HP302/HP305",d:"Digital Piano"},"B\0\x1B":{m:"HP307",d:"Digital Piano"},"B\0\x1B":{m:"RG-1F/RG-3F",d:"Digital Piano"},"B\0\x1B":{m:"LX-10F",d:"Digital Piano"},"B\0\x1B":{m:"DP990F",d:"Digital Piano"},"B\0\x1B":{m:"HPi-7F",d:"Digital Piano"},"B\0\x1B":{m:"HPi-6F",d:"Digital Piano"},"B\0\x1B\x07":{m:"FP-7F",d:"Digital Piano"},"B\0\x1B\b":{m:"FP-4F",d:"Digital Piano"},"B\0":{m:"HP-555G",d:"Digital Piano"},"B\0":{m:"KR375",d:"Digital Piano"},"B\0	\0":{m:"KR-377",d:"Digital Piano"},"B\0	":{m:"KF-90",d:"Digital Piano"},"B\0":{m:"E-600",d:"Intelligent Keyboard"},"B\0":{m:"AT-30R",d:"Organ"},"B\0":{m:"KR-277",d:"Digital Piano"},"B\0\x07":{m:"HPi-5",d:"Digital Piano"},"B\0\0":{m:"VR-700",d:"Combo Keyboard"},"H\0\0":{m:"SD-90",d:"Studio Canvas",b:"Edirol"},"J\0\0":{m:"SH-32",d:"Synthesizer Module"},"L\0\0":{m:"JUNO-Gi",d:"Mobile Synthesizer with Digital Recorder"},"M\0\0":{m:"VK-8",d:"Combo Organ"},"P\0\0":{m:"RD-700NX",d:"Digital Piano"},"Q\0\0":{m:"RD-300NX",d:"Digital Piano"},"U\0\0":{m:"JUPITER-80",d:"Synthesizer"},"Y\0\0":{m:"MC-909",d:"Sampling Groovebox"},"Y\0\0":{m:"BR-80",d:"Digital Recorder",b:"BOSS"},"`\0\0":{m:"FP-5",d:"Digital Piano"},"`\0\0":{m:"GT-100",d:"Amp Effects Processor",b:"BOSS"},"b\0\0\0\0":{m:"AT-20R",d:"Organ"},"b\0\0\0":{m:"AT-30R",d:"Organ"},"b\0\0\0":{m:"AT-800",d:"Organ"},"b\0\0":{m:"AT-900",d:"Organ"},"b\0\0":{m:"AT-900C",d:"Organ"},"b\0\0\0":{m:"AT-100",d:"Organ"},"b\0\0":{m:"AT-300",d:"Organ"},"b\0\0":{m:"AT-500",d:"Organ"},"b\0\0":{m:"AT-75",d:"Organ"},"c\0\0":{m:"JUPITER-50",d:"Synthesizer"},"d\0\0":{m:"RS-70",d:"Synthesizer"},"d\0\0\0\0":{m:"RS-50",d:"Synthesizer"},"d\0\0\0":{m:"JUNO-D",d:"Synthesizer"},"d\0\0":{m:"INTEGRA-7",d:"Sound Module"},"o\0\0":{m:"FP-2",d:"Digital Piano"},"z\0\0":{m:"TD-20",d:"Percussion Sound Module"}},R.B={"\0":{m:"Krome",d:"Music Workstation"},"\0\0\0":{m:"M1",d:"Music Workstation"},"P\0\0":{m:"Triton Pro",d:"Music Workstation/Sampler"},"P\0=\0":{m:"Triton Extreme",d:"Music Workstation/Sampler"},"`\0e\0":{m:"Pa1000",d:"Professional Arranger"},"h\0\0":{m:"Kronos 61",d:"Music Workstation"},"}\0\0\0":{m:"R3",d:"Synthesizer Vocoder"},"~\0\0\0":{m:"microKORG XL",d:"Synthesizer"}},R.C={"\0A\0":{m:"MU100/MU100R/MU128",d:"Tone Generator"},"\0A":{m:"AN200",d:"Synthesizer"},"\0AU":{m:"QY70",d:"Sequencer"},"\0A":{m:"DX200",d:"Synthesizer"},"\0A4":{m:"QY100",d:"Sequencer"},"\0A*":{m:"S90",d:"Synthesizer"},"\0A":{m:"MOTIF-RACK ES",d:"Tone Generator"},"\0A":{m:"AN1x",d:"Synthesizer"},"\0A\x1B":{m:"MU2000",d:"Tone Generator"},"\0A":{m:"MU1000",d:"Tone Generator"},"\0A":{m:"RM1x",d:"Sequence Remixer"},"\0A#":{m:"S30",d:"Synthesizer"},"\0A2":{m:"S90ES",d:"Synthesizer"},"\0A3":{m:"MO6",d:"Synthesizer"},"\0A4":{m:"MO8",d:"Synthesizer"},"\0A5":{m:"MOTIF XS6",d:"Synthesizer"},"\0A6":{m:"MOTIF XS7",d:"Synthesizer"},"\0A7":{m:"MU90",d:"Tone Generator"},"\0A7":{m:"MOTIF XS8",d:"Synthesizer"},"\0A?":{m:"CP5",d:"Stage Piano"},"\0A@":{m:"CP50",d:"Stage Piano"},"\0AD":{m:"MOX6",d:"Synthesizer"},"\0AE":{m:"MOX8",d:"Synthesizer"},"\0AF":{m:"MU50",d:"Tone Generator"},"\0AG":{m:"MX49",d:"Synthesizer"},"\0AH":{m:"QS300",d:"Synthesizer"},"\0AL":{m:"EOS B900",d:"Keyboard"},"\0AO":{m:"CS2x",d:"Synthesizer"},"\0AQ":{m:"MU15",d:"Tone Generator"},"\0AR":{m:"MU90R",d:"Tone Generator"},"\0AX":{m:"MOTIF-RACK",d:"Tone Generator"},"\0Ab":{m:"SDX3000",d:"Keyboard"},"\0Ak":{m:"CBX-K1XG",d:"Keyboard"},"\0Aw":{m:"S03",d:"Synthesizer"},"\0A|":{m:"MOTIF6",d:"Synthesizer"},"\0A}":{m:"MOTIF7",d:"Synthesizer"},"\0A~":{m:"MOTIF8",d:"Synthesizer"},"\0C,":{m:"CP33",d:"Stage Piano"},"\0CB":{m:"P-120",d:"Digital Piano"},"\0Cf":{m:"P-155",d:"Digital Piano"},"\0D'":{m:"PSS-A50",d:"Portable Keyboard"},"\0D+":{m:"NP-31",d:"Portable Keyboard"},"\0DE":{m:"MM6",d:"Synthesizer"},"\0Ls\x07":{m:"DTXTREME",d:"Drum Module"}},R.G={"\0\0":{m:"Push",d:"MIDI Controller"},"%\0\0":{m:"MPK261",d:"Performance Keyboard Controller"},"P\0\0":{m:"MPK Mini Play MK3",d:"MIDI Keyboard Controller"},"m\0\0":{m:"EWI USB",d:"USB Wind Instrument"}},R["\f"]={"\0\0":{m:"Flextone III",d:"Guitar Effects Processor"},"$\0\0":{m:"THR30II",d:"Guitar Amp",b:"Yamaha"}},R["a"]={"\0\0":{m:"Brain v1",d:"Do-It-Yourself Kit"},"\0\0":{m:"Ohm64",d:"MIDI Controller"},"\0\0":{m:"block",d:"MIDI Controller"},"\0\0":{m:"Code",d:"MIDI Controller"},"\0\x07\0":{m:"OhmRGB",d:"MIDI Controller"},"\0\b\0":{m:"CNTRL:R",d:"MIDI Controller"},"\0	\0":{m:"Brain v2",d:"Do-It-Yourself Kit"},"\0\v\0":{m:"Alias8",d:"MIDI Controller"},"\0\f\0":{m:"Base",d:"MIDI Controller"},"\0\r\0":{m:"Brain Jr",d:"Do-It-Yourself Kit"}},R["n"]={"\0\0":{m:"TriplePlay",d:"Guitar Controller"},"\0\0":{m:"TriplePlay",d:"Guitar Controller"}},R["q"]={"\0\0":{m:"Enlighten",d:"DMX Control"}},R["v"]={"\0\0":{m:"DAW",d:"MIDI Controller"}},R["y"]={"\0\0":{m:"Midi Fighter 3D",d:"MIDI Controller"},"\0\0":{m:"Midi Fighter Spectra",d:"MIDI Controller"},"\0\0":{m:"Midi Fighter Twister",d:"MIDI Controller"}},R[" \b"]={"c":{m:"Axiom 61",d:"MIDI Controller"}},R[" )"]={"\0!\0":{m:"Nova",d:"Synth Module"},"3\0\0\0":{m:"Bass Station II",d:"Analog Synthesizer"}},R["!"]={"g2\0":{m:"Push 2",d:"MIDI Controller"}}},j.Gear=j,un.exports=j}(oe)),oe.exports);export{Di as J,Bi as a,Ei as b};
